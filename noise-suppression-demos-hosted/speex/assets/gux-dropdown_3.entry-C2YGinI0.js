import{r as h,c as a,f as x,h as i,g as p,H as w}from"./index-CV4KLuUB.js";import{O}from"./on-click-outside-21dd269e-9ljsEeio.js";import{b as y}from"./index-3f1e5ba8-CrdMLsjJ.js";import{s as u}from"./simulate-native-event-e0631897-BcLDngo1.js";import{o as L,c as T}from"./on-input-disabled-state-change-27395154-_B452ZSd.js";import{b as k}from"./after-next-render-07a41f53-C_KTwidI.js";import{t as C}from"./usage-6129fffe-6kP8_2TX.js";import{O as I}from"./on-mutation-1355c534-NPHHExKE.js";import{s as c,l as E,g as D,c as b,h as R,a as m,b as v,d as P,e as z,f as A,i as H,j as g,k as _,m as B,o as V}from"./gux-listbox.service-28ef1770-C3DRrCFi.js";import{h as F}from"./has-slot-f24a46a6-D7GdaS0G.js";import{w as M}from"./when-event-is-from-2aac15f0-B4cyA2sH.js";import{r as K}from"./random-html-id-81ac821b-D30kRngR.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const W="Type to filter dropdown results",N="Select...",G="Dropdown",j={filterResults:W,noSelection:N,dropdown:G},q=":host{box-sizing:border-box;color:var(--gse-ui-formControl-input-populatedColor)}.gux-field,.gux-target-container-expanded{all:unset;box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:nowrap;place-content:stretch center;align-items:center;width:100%;height:var(--gse-ui-formControl-input-textfield-height);font-family:var(--gse-ui-formControl-input-contentText-fontFamily);font-size:var(--gse-ui-formControl-input-contentText-fontSize);font-weight:var(--gse-ui-formControl-input-contentText-fontWeight);line-height:var(--gse-ui-formControl-input-contentText-lineHeight);cursor:pointer;background-color:var(--gse-ui-formControl-input-backgroundColor)}.gux-target-container-expanded,.gux-target-container-collapsed .gux-field{padding:var(--gse-ui-formControl-input-padding)}.gux-error.gux-target-container-collapsed .gux-field-button,.gux-error.gux-target-container-expanded{border:var(--gse-ui-formControl-input-error-border-width) var(--gse-ui-formControl-input-error-border-style) var(--gse-ui-formControl-input-error-border-color)}.gux-disabled.gux-target-container-collapsed .gux-field-button,.gux-disabled.gux-target-container-expanded{border:var(--gse-ui-formControl-input-disabled-border-width) var(--gse-ui-formControl-input-disabled-border-style) var(--gse-ui-formControl-input-disabled-border-color)}.gux-target-container-collapsed .gux-field-button:hover,.gux-target-container-expanded:hover{border:var(--gse-ui-formControl-input-hover-border-width) var(--gse-ui-formControl-input-hover-border-style) var(--gse-ui-formControl-input-hover-border-color)}.gux-field.gux-input-field{height:var(--gse-ui-formControl-input-contentText-lineHeight)}.gux-field .gux-field-content{--gux-zindex-tooltip:3;display:flex;flex:1 1 0;flex-direction:row;flex-wrap:nowrap;place-content:stretch flex-start;align-items:flex-start;min-width:0;height:var(--gse-ui-formControl-input-contentText-lineHeight)}.gux-field .gux-field-content .gux-filter,.gux-field .gux-field-content .gux-selected-option,.gux-field .gux-field-content .gux-placeholder{flex:1 1 auto;align-self:auto;order:0;padding:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.gux-field .gux-field-content .gux-filter{position:relative;height:100%}.gux-field .gux-field-content .gux-filter .gux-filter-input{all:unset;width:100%;color:transparent;caret-color:var(--gse-ui-formControl-input-populatedColor)}.gux-field .gux-field-content .gux-filter .gux-filter-display{white-space:pre}.gux-field .gux-field-content .gux-filter .gux-filter-display .gux-filter-text{color:var(--gse-ui-formControl-input-populatedColor)}.gux-field .gux-field-content .gux-filter .gux-filter-display .gux-filter-suggestion{color:var(--gse-ui-formControl-input-suggestionColor)}.gux-field .gux-field-content .gux-filter .gux-filter-input,.gux-field .gux-field-content .gux-filter .gux-filter-display{position:absolute}.gux-field .gux-field-content .gux-placeholder{color:var(--gse-ui-formControl-input-placeholderColor)}.gux-field .gux-expand-icon{flex:0 0 auto;align-self:auto;order:0;width:var(--gse-ui-formControl-input-inputIcon-size);height:var(--gse-ui-formControl-input-inputIcon-size);padding-left:var(--gse-ui-dropdown-gap);color:var(--gse-ui-formControl-input-inputIcon-iconEndColor)}.gux-target-container-expanded{border:var(--gse-ui-formControl-input-active-border-width) var(--gse-ui-formControl-input-active-border-style) var(--gse-ui-formControl-input-active-border-color);border-radius:var(--gse-ui-formControl-input-borderRadius)}.gux-target-container-expanded:focus-visible{outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-target-container-expanded:focus-within:has(:focus-visible){outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-target-container-expanded .gux-filter-input{background-color:inherit;border:none}.gux-target-container-expanded .gux-filter-input:focus{border:none;outline:none}.gux-target-container-expanded .gux-field-button{width:auto;height:var(--gse-ui-formControl-input-contentText-lineHeight);margin:0;background:inherit;border:none;outline:none;box-shadow:none}.gux-target-container-expanded .gux-field-button:focus{outline:none}.gux-target-container-collapsed .gux-field-button{border:var(--gse-ui-formControl-input-default-border-width) var(--gse-ui-formControl-input-default-border-style) var(--gse-ui-formControl-input-default-border-color);border-radius:var(--gse-ui-formControl-input-borderRadius)}.gux-target-container-collapsed .gux-field-button:focus-visible{outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-target-container-collapsed .gux-field-button:focus-within:has(:focus-visible){outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}::slotted(gux-listbox){outline:none}.gux-selected-icon{display:flex;align-items:center}.gux-selected-icon gux-icon{width:var(--gse-ui-formControl-input-inputIcon-size);height:var(--gse-ui-formControl-input-inputIcon-size);padding-right:var(--gse-ui-dropdown-gap)}",U=q;var S=function(t,e,o,r){var s=arguments.length,n=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,o):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(t,e,o,r);else for(var d=t.length-1;d>=0;d--)(l=t[d])&&(n=(s<3?l(n):s>3?l(e,o,n):l(e,o))||n);return s>3&&n&&Object.defineProperty(e,o,n),n};const f=class{constructor(t){h(this,t),this.guxexpanded=a(this,"guxexpanded",7),this.guxcollapsed=a(this,"guxcollapsed",7),this.guxfilter=a(this,"guxfilter",7),this.value=void 0,this.disabled=!1,this.required=!1,this.loading=!1,this.placeholder=void 0,this.filterType="none",this.hasError=!1,this.expanded=!1,this.filter=""}watchExpanded(t){t||(this.filter="")}watchValue(t){this.validateValue(t,this.listboxElement)}handleFilter(t){this.guxfilter.emit(t)}onKeydown(t){switch(t.key){case"Escape":if(this.isFilterable()&&document.activeElement===this.listboxElement)return this.filterElement.focus();this.collapseListbox("focusFieldButton");return;case"Tab":if(this.shiftTabFromFilterListbox(t))return t.preventDefault(),this.filterElement.focus();if(this.shiftTabFromExpandedFilterInput(t))return t.preventDefault(),this.collapseListbox("focusFieldButton");this.collapseListbox("noFocusChange");return;case"ArrowDown":this.activeElementNotListbox()&&(t.preventDefault(),this.expanded=!0,c(this.listboxElement));return}}onInternallistboxoptionsupdated(t){t.stopPropagation(),x(this.root)}onBlur(t){this.stopPropagationOfInternalFocusEvents(t)}onFocus(t){this.stopPropagationOfInternalFocusEvents(t)}onFocusout(t){this.stopPropagationOfInternalFocusEvents(t)}onFocusin(t){this.stopPropagationOfInternalFocusEvents(t)}onClickOutside(){this.collapseListbox("noFocusChange")}onMutation(){var t;this.listboxElement||(this.listboxElement=(t=this.root)===null||t===void 0?void 0:t.querySelector("gux-listbox"),this.applyListboxEventListeners())}onInternalExpanded(t){t.stopPropagation(),this.guxexpanded.emit(),this.listboxElement&&k(()=>{this.listboxElement.focus(),this.isFilterable()&&this.filterElement&&this.filterElement.focus()})}onInternalCollapsed(t){t.stopPropagation(),this.guxcollapsed.emit()}connectedCallback(){var t;this.listboxElement=(t=this.root)===null||t===void 0?void 0:t.querySelector("gux-listbox"),this.listboxElement&&this.validateValue(this.value,this.listboxElement)}async componentWillLoad(){C(this.root),this.i18n=await y(this.root,j),L(this.root,()=>{x(this.root)})}componentDidLoad(){this.applyListboxEventListeners()}componentWillRender(){this.listboxElement&&(this.validateValue(this.value,this.listboxElement),this.listboxElement.loading=this.loading,this.listboxElement.filterType=this.filterType,this.listboxElement.filter=this.filter)}showTooltip(){var t;(t=this.truncateElement)===null||t===void 0||t.setShowTooltip()}hideTooltip(){var t;(t=this.truncateElement)===null||t===void 0||t.setHideTooltip()}validateValue(t,e){if(t===void 0){e&&(e.value=t);return}if(this.getOptionElementByValue(t)){e.value=t;return}}applyListboxEventListeners(){var t,e;(t=this.listboxElement)===null||t===void 0||t.addEventListener("input",o=>{o.stopPropagation(),this.updateValue(o.target.value)}),(e=this.listboxElement)===null||e===void 0||e.addEventListener("change",o=>{o.stopPropagation()})}stopPropagationOfInternalFocusEvents(t){if(this.root.contains(t.relatedTarget))return t.stopImmediatePropagation()}isFilterable(){return this.filterType==="starts-with"||this.filterType==="custom"}get optionElements(){return E(this.listboxElement)}getOptionElementByValue(t){return this.optionElements.find(e=>e.value===t)}fieldButtonClick(){this.expanded=!this.expanded}filterInput(t){t.stopPropagation(),this.filter=this.filterElement.value}shiftTabFromExpandedFilterInput(t){return t.shiftKey&&this.isFilterable()&&this.expanded&&document.activeElement!==this.listboxElement}shiftTabFromFilterListbox(t){return t.shiftKey&&this.isFilterable()&&document.activeElement===this.listboxElement}activeElementNotListbox(){return document.activeElement!==this.listboxElement}filterKeydown(t){switch(t.key){case"ArrowDown":t.stopImmediatePropagation(),t.preventDefault(),this.listboxElement.focus(),c(this.listboxElement);return;case"Enter":this.listboxElement.guxSelectActive(),t.preventDefault();return}}filterKeyup(t){switch(t.key){case" ":t.preventDefault();return}}collapseListbox(t){this.expanded&&(this.expanded=!1),t==="focusFieldButton"&&this.fieldButtonElement.focus()}updateValue(t){this.value!==t&&(this.value=t,u(this.root,"input"),u(this.root,"change")),this.collapseListbox("focusFieldButton")}getTypeaheadText(t){const e=t.length;if(e>0&&!this.loading){const o=D(this.listboxElement,t);if(o&&this.filterType!=="custom")return o.textContent.trim().substring(e)}return""}renderTargetDisplay(){const t=this.getOptionElementByValue(this.value);return t?i("div",{class:"gux-selected-option"},this.renderSelectedItem(t)):i("div",{class:"gux-placeholder"},this.placeholder||this.i18n("noSelection"))}renderSelectedItem(t){const e=t.tagName.toLowerCase();switch(e){case"gux-option":return this.renderOption(t);case"gux-option-icon":return this.renderIconOption(t);default:return e}}renderOption(t){let e=t.textContent;if(F(t,"subtext")){const o=t.querySelector("[slot=subtext]");e=e.substring(0,e.length-o.textContent.length)}return i("gux-truncate",{ref:o=>this.truncateElement=o},e)}renderIconOption(t){let e=null;return t.iconColor!==null&&(e={color:t.iconColor}),i("span",{class:"gux-selected-icon"},i("gux-icon",{"icon-name":t.iconName,style:e,decorative:!0}),i("gux-truncate",{ref:o=>this.truncateElement=o},t.textContent))}renderFilterInputField(){if(this.expanded&&this.isFilterable())return i("div",{class:"gux-field gux-input-field"},i("div",{class:"gux-field-content"},i("div",{class:"gux-filter"},i("div",{class:"gux-filter-display"},i("span",{class:"gux-filter-text"},this.filter),i("span",{class:"gux-filter-suggestion"},this.getTypeaheadText(this.filter))),i("div",{class:"input-and-dropdown-button"},i("input",{onClick:this.fieldButtonClick.bind(this),class:"gux-filter-input",type:"text","aria-label":this.i18n("filterResults"),ref:t=>this.filterElement=t,onInput:this.filterInput.bind(this),onKeyDown:this.filterKeydown.bind(this),onKeyUp:this.filterKeyup.bind(this)})))))}renderPopup(){return i("slot",{slot:"popup"})}renderTarget(){return i("div",{class:{"gux-target-container-expanded":this.expanded&&this.isFilterable(),"gux-target-container-collapsed":!(this.expanded&&this.isFilterable()),"gux-error":this.hasError,"gux-disabled":this.disabled},slot:"target"},this.renderFilterInputField(),i("button",{type:"button",class:"gux-field gux-field-button",disabled:T(this.root),onClick:this.fieldButtonClick.bind(this),onFocusin:this.showTooltip.bind(this),onFocusout:this.hideTooltip.bind(this),ref:t=>this.fieldButtonElement=t,"aria-haspopup":"listbox","aria-expanded":this.expanded.toString()},this.renderTargetContent(),this.renderRadialLoading(),i("gux-icon",{class:{"gux-expand-icon":!0},"screenreader-text":this.i18n("dropdown"),iconName:this.expanded?"custom/chevron-up-small-regular":"custom/chevron-down-small-regular"})))}renderTargetContent(){if(!(this.expanded&&this.isFilterable()))return i("div",{class:"gux-field-content"},this.renderTargetDisplay())}renderRadialLoading(){if(this.loading&&!this.expanded)return i("gux-radial-loading",{context:"input"})}render(){return i("gux-popup",{key:"1bf630a1efca19cd958d15746bebfbc53d442f67",expanded:this.expanded&&(!this.loading||this.isFilterable()),disabled:this.disabled},this.renderTarget(),this.renderPopup())}static get delegatesFocus(){return!0}get root(){return p(this)}static get watchers(){return{expanded:["watchExpanded"],value:["watchValue"],filter:["handleFilter"]}}};S([O({triggerEvents:"mousedown"})],f.prototype,"onClickOutside",null);S([I({childList:!0,subtree:!0})],f.prototype,"onMutation",null);f.style=U;const $=["gux-option","gux-option-icon"],J=$.join(","),Q="No matches",X="Loading...",Y={noMatches:Q,loading:X},Z=":host{box-sizing:border-box;display:block;max-height:var(--gse-ui-menu-maxHeight);padding:var(--gse-ui-menu-padding);margin:0;overflow:visible auto;background:var(--gse-ui-menu-backgroundColor);border:var(--gse-ui-menu-border-width) var(--gse-ui-menu-border-style) var(--gse-ui-menu-border-color);border-radius:var(--gse-ui-menu-borderRadius);outline:none;box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}:host(:focus-visible){outline:var(--gse-semantic-focusRing-width) solid var(--gse-semantic-color-focus);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-message-container{display:flex;flex-direction:column;flex-wrap:nowrap;place-content:stretch center;align-items:center;text-align:center}.gux-message-container .gux-no-matches{box-sizing:border-box;height:var(--gse-ui-menu-option-height);font-family:var(--gse-ui-dropdown-menu-emptyState-subheader-text-fontFamily);font-size:var(--gse-ui-dropdown-menu-emptyState-subheader-text-fontSize);font-weight:var(--gse-ui-dropdown-menu-emptyState-subheader-text-fontWeight);line-height:var(--gse-ui-dropdown-menu-emptyState-subheader-text-lineHeight);color:var(--gse-ui-dropdown-menu-emptyState-subheader-foregroundColor)}",tt=Z,et=class{constructor(t){h(this,t),this.internallistboxoptionsupdated=a(this,"internallistboxoptionsupdated",7),this.value=void 0,this.loading=!1,this.filter="",this.filterType="none",this.emptyMessage=void 0,this.selectedValues=[],this.listboxOptions=[],this.allListboxOptionsFiltered=void 0}onBlur(){b(this.root)}onKeydown(t){if(!R(this.root)){t.preventDefault(),c(this.root);return}switch(t.key){case"Enter":t.preventDefault(),g(this.root,e=>this.updateValue(e));return;case"ArrowDown":t.preventDefault(),A(this.root)?(t.stopPropagation(),H(this.root)):v(this.root);return;case"ArrowUp":{t.preventDefault(),P(this.root)?(t.stopPropagation(),z(this.root)):m(this.root);return}case"Home":{t.preventDefault(),v(this.root);return}case"End":{t.preventDefault(),m(this.root);return}case" ":{t.preventDefault();return}}if(t.key.length===1){_(this.root,t.key);return}}onKeyup(t){switch(t.key){case" ":g(this.root,e=>this.updateValue(e));return}}onMousemove(){b(this.root)}onClick(t){M(J,t,e=>{V(e,o=>this.updateValue(o))})}async guxSelectActive(){g(this.root,t=>this.updateValue(t))}setListboxOptions(){this.value&&(this.selectedValues=this.value.split(",")),this.listboxOptions=E(this.root),this.internallistboxoptionsupdated.emit()}updateValue(t){this.value!==t&&(this.value=t),u(this.root,"input"),u(this.root,"change")}async componentWillLoad(){C(this.root),this.i18n=await y(this.root,Y),this.setListboxOptions()}componentWillRender(){this.listboxOptions.forEach(t=>{t.selected=t.value===this.value,this.filterType!=="custom"&&(t.filtered=!B(t,this.filter))}),this.allListboxOptionsFiltered=this.listboxOptions.filter(t=>!t.filtered).length===0}renderHiddenSlot(){return i("div",{hidden:!0},i("slot",{onSlotchange:()=>this.setListboxOptions()}))}renderLoading(){return[i("div",{class:"gux-message-container"},i("gux-radial-loading",{context:"modal"}),i("span",null,this.i18n("loading"))),this.renderHiddenSlot()]}renderAllListboxOptionsFiltered(){return[i("div",{class:"gux-message-container"},i("div",{class:"gux-no-matches"},this.emptyMessage||this.i18n("noMatches"))),this.renderHiddenSlot()]}render(){return this.loading?this.renderLoading():this.allListboxOptionsFiltered?this.renderAllListboxOptionsFiltered():i(w,{role:"listbox",tabindex:0},i("slot",{onSlotchange:()=>this.setListboxOptions()}))}get root(){return p(this)}};et.style=tt;const it=":host{box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--gse-ui-menu-option-gap);place-content:stretch center;align-items:center;height:var(--gse-ui-menu-option-height);padding:var(--gse-ui-menu-option-padding);font-family:var(--gse-ui-menu-option-label-default-text-fontFamily);font-size:var(--gse-ui-menu-option-label-default-text-fontSize);font-weight:var(--gse-ui-menu-option-label-default-text-fontWeight);line-height:var(--gse-ui-menu-option-label-default-text-lineHeight);color:var(--gse-ui-menu-option-label-foregroundColor);word-wrap:break-word;cursor:pointer}:host .gux-option-wrapper{width:100%}:host .gux-slot-container{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host(.gux-disabled){pointer-events:none;cursor:default;opacity:var(--gse-ui-menu-option-disabled-opacity)}:host(.gux-selected){font-family:var(--gse-ui-menu-option-label-active-text-fontFamily);font-size:var(--gse-ui-menu-option-label-active-text-fontSize);font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);line-height:var(--gse-ui-menu-option-label-active-text-lineHeight);background:var(--gse-ui-menu-option-selected-backgroundColor)}:host(:active:not(:disabled)){font-family:var(--gse-ui-menu-option-label-active-text-fontFamily);font-size:var(--gse-ui-menu-option-label-active-text-fontSize);font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);line-height:var(--gse-ui-menu-option-label-active-text-lineHeight)}:host(.gux-active){border-radius:var(--gse-semantic-focusRing-cornerRadius);outline:var(--gse-ui-menu-option-focus-border-width) var(--gse-ui-menu-option-focus-border-style) var(--gse-ui-menu-option-focus-border-color);outline-offset:-2px}:host(.gux-show-subtext){place-content:stretch flex-start;height:auto}:host(.gux-show-subtext) .gux-option-wrapper{display:flex;flex-direction:column}:host(.gux-show-subtext) slot[name=subtext]::slotted(*){height:var(--gse-ui-groupedMenu-subtext-height);font-weight:var(--gse-ui-menu-option-label-default-text-fontWeight);color:var(--gse-ui-menu-groupedMenu-subtext-foregroundColor)}:host(:hover:not(:disabled)){background:var(--gse-ui-menu-option-hover-backgroundColor)}:host(.gux-filtered){display:none}",ot=it,nt=class{constructor(t){h(this,t),this.value=void 0,this.active=!1,this.selected=!1,this.disabled=!1,this.filtered=!1,this.hasSubtext=!1}handleActive(t){var e,o;t?(e=this.truncateElement)===null||e===void 0||e.setShowTooltip():(o=this.truncateElement)===null||o===void 0||o.setHideTooltip()}componentWillLoad(){this.root.id=this.root.id||K("gux-option"),this.onSubtextChange()}onSubtextChange(){this.hasSubtext=F(this.root,"subtext")}getAriaSelected(){return this.disabled?!1:this.selected?"true":"false"}render(){return i(w,{key:"158d52dfa54bef255d74f1403552216d319238fa",role:"option",class:{"gux-active":this.active,"gux-disabled":this.disabled,"gux-filtered":this.filtered,"gux-selected":this.selected,"gux-show-subtext":this.hasSubtext},"aria-selected":this.getAriaSelected(),"aria-disabled":this.disabled.toString()},i("div",{key:"a0d1d229beed4ad87fa19b5507f43bc22ed0d3bf",class:"gux-option-wrapper"},i("gux-truncate",{key:"2a126d7e19fda3147b9190a48f35a5e8efe43695",ref:t=>this.truncateElement=t},i("slot",{key:"550e330ac234b0defab7f9d2d973928ff6367ed2"})),i("slot",{key:"be3f45964a62e240d4c971d48b6393281e3c2c91",onSlotchange:()=>this.onSubtextChange(),name:"subtext"})))}get root(){return p(this)}static get watchers(){return{active:["handleActive"]}}};nt.style=ot;export{f as gux_dropdown,et as gux_listbox,nt as gux_option};
