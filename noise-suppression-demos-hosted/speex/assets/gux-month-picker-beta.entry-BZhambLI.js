import{r as m,h as n,g as f}from"./index-CV4KLuUB.js";import{t as x}from"./usage-6129fffe-6kP8_2TX.js";import{O as v}from"./on-click-outside-21dd269e-9ljsEeio.js";import{b,g as C}from"./index-3f1e5ba8-CrdMLsjJ.js";import{u as y,a as S}from"./use-regional-dates-a47e74e6-CHt-lzjs.js";import{s as d}from"./simulate-native-event-e0631897-BcLDngo1.js";import{b as h}from"./after-next-render-07a41f53-C_KTwidI.js";import{g as a,a as g,b as c}from"./year-month-values-7461d213-BGOpTfvI.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const k="Toggle month calendar view",w="Month",M="Year",D="Unset",B={toggleCalendar:k,month:w,year:M,unset:D},E=":host{display:inline-block}.gux-target{display:inline-flex;gap:var(--gse-ui-formControl-input-gap);padding:var(--gse-ui-formControl-textarea-padding);cursor:pointer;background-color:var(--gse-ui-calendarMenu-backgroundColor);border:var(--gse-ui-formControl-input-default-border-width) var(--gse-ui-formControl-input-default-border-style) var(--gse-ui-formControl-input-default-border-color);border-radius:var(--gse-ui-formControl-input-borderRadius)}.gux-target:focus-within{border:var(--gse-ui-formControl-input-active-border-width) var(--gse-ui-formControl-input-active-border-style) var(--gse-ui-formControl-input-active-border-color);border-radius:var(--gse-ui-formControl-focusRing-borderRadius);outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-target .gux-display{display:inline-flex;min-width:100px;padding-right:var(--gse-ui-formControl-input-gap);font-family:var(--gse-ui-formControl-label-text-fontFamily);font-size:var(--gse-ui-formControl-label-text-fontSize);font-weight:var(--gse-ui-formControl-label-text-fontWeight);line-height:var(--gse-ui-formControl-label-text-lineHeight);color:var(--gse-ui-formControl-label-labelColor)}.gux-target .gux-display .gux-spinner{outline:none}.gux-target .gux-display .gux-spinner:not(:first-child){margin-left:4px}.gux-target .gux-display .gux-spinner:focus-visible{background:var(--gse-ui-calendarMenu-month-hover-backgroundColor)}.gux-target .gux-popup-toggle{justify-content:right;color:var(--gse-ui-monthPicker-calendarStates-defaultColor);background:transparent;border:none}.gux-target .gux-popup-toggle:focus-visible{border-radius:var(--gse-ui-calendarMenu-month-calendarButton-focusBorderRadius);outline:var(--gse-ui-monthPicker-calendarStates-focus-border-width) var(--gse-ui-monthPicker-calendarStates-focus-border-style) var(--gse-ui-monthPicker-calendarStates-focus-border-color);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-target .gux-popup-toggle:not(:disabled):hover{color:var(--gse-ui-monthPicker-calendarStates-hoverColor);cursor:pointer}.gux-target .gux-popup-toggle:not(:disabled):focus{color:var(--gse-ui-monthPicker-calendarStates-activeColor);cursor:pointer}.gux-target .gux-popup-toggle:disabled{color:var(--gse-ui-monthPicker-calendarStates-disabledColor)}.gux-target .gux-popup-toggle gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm)}.gux-target .gux-popup-toggle.gux-expanded{color:var(--gse-ui-monthPicker-calendarStates-activeColor)}",P=E;var O=function(e,t,r,o){var s=arguments.length,i=s<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,o);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(i=(s<3?l(i):s>3?l(t,r,i):l(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i};const R={year:"numeric",month:"long"},Y=["ar","he","ja","ko","zh-cn","zh-tw"],p=class{constructor(e){m(this,e),this.value=void 0,this.min=void 0,this.max=void 0,this.disabled=!1,this.expanded=!1,this.locale=void 0}onKeyDown(e){switch(e.key){case"Escape":this.expanded=!1,this.calendarToggleButtonElement.focus();break}}onValueUpdate(e){this.isOutOfBounds(e)?this.isBeforeMin(e)?this.value=this.min:this.value=this.max:this.value=e,d(this.root,"input"),d(this.root,"change")}onClickOutside(){this.expanded=!1}async componentWillLoad(){x(this.root),this.i18n=await b(this.root,B),y()?this.locale=S(this.root):this.locale=C(this.root)}isOutOfBounds(e){return this.isBeforeMin(e)||this.isAfterMax(e)}isBeforeMin(e){return this.min&&this.min>e}isAfterMax(e){return this.max&&this.max<e}toggleCalendar(){this.expanded=!this.expanded,this.expanded&&h(()=>{this.monthCalendarElement.guxFocus(this.value)})}onMonthCalendarInput(){this.value=this.monthCalendarElement.value,this.expanded=!1,this.calendarToggleButtonElement.focus()}incrementMonth(e){if(this.value){const{year:t,month:r}=a(this.value),o=((parseInt(r)+11+e)%12+1).toString().padStart(2,"0");this.value=g(t,o)}else this.value=c()}incrementYear(e){if(this.value){const{year:t,month:r}=a(this.value),o=Math.max(Number(t)+e,0).toString();this.value=g(o,r)}else this.value=c()}onSpinnerKeyDown(e,t,r){switch(e.key){case"ArrowDown":e.preventDefault(),t(-1);break;case"ArrowUp":e.preventDefault(),t(1);break;case"ArrowLeft":case"ArrowRight":e.preventDefault(),r.focus();break;case"Enter":e.preventDefault(),this.expanded=!0,h(()=>{this.monthCalendarElement.guxFocus(this.value)});break;case" ":e.preventDefault();break}}onSpinnerKeyUp(e){switch(e.stopPropagation(),e.key){case" ":e.preventDefault(),this.expanded=!0,h(()=>{this.monthCalendarElement.guxFocus(this.value)});break}}onSpinnerClick(){this.expanded=!0}getSpinnerLabel(e){if(this.value){const{year:t,month:r}=a(this.value);return new Date(Number(t),Number(r)-1).toLocaleDateString(this.locale,{[e]:R[e]})}return this.i18n(e)}getSpinnerValueNow(e){return this.value?a(this.value)[e]:"0"}getSpinnerValueText(){if(this.value){const{year:e,month:t}=a(this.value);return new Date(Number(e),Number(t)-1).toLocaleDateString(this.locale,{year:"numeric",month:"long"})}return this.i18n("unset")}renderMonthSpinnerButton(){return n("div",{role:"spinbutton",class:"gux-spinner",tabIndex:this.disabled?-1:0,onKeyDown:e=>this.onSpinnerKeyDown(e,t=>this.incrementMonth(t),this.yearSpinnerElement),onKeyUp:e=>this.onSpinnerKeyUp(e),onClick:()=>this.onSpinnerClick(),ref:e=>this.monthSpinnerElement=e,"aria-valuenow":this.getSpinnerValueNow("month"),"aria-valuetext":this.getSpinnerValueText(),"aria-valuemin":"1","aria-valuemax":"12","aria-label":this.i18n("month")},this.getSpinnerLabel("month"))}renderYearSpinnerButton(){return n("div",{role:"spinbutton",class:"gux-spinner",tabIndex:this.disabled?-1:0,onKeyDown:e=>this.onSpinnerKeyDown(e,t=>this.incrementYear(t),this.monthSpinnerElement),onKeyUp:e=>this.onSpinnerKeyUp(e),onClick:()=>this.onSpinnerClick(),ref:e=>this.yearSpinnerElement=e,"aria-valuenow":this.getSpinnerValueNow("year"),"aria-valuetext":this.getSpinnerValueText(),"aria-valuemin":"0","aria-label":this.i18n("year")},this.getSpinnerLabel("year"))}renderSpinnerButtons(){return Y.includes(this.locale)?n("span",{class:"gux-display"},this.renderYearSpinnerButton(),this.renderMonthSpinnerButton()):n("span",{class:"gux-display"},this.renderMonthSpinnerButton(),this.renderYearSpinnerButton())}renderCalendarToggleButton(){return n("button",{class:{"gux-popup-toggle":!0,"gux-expanded":this.expanded},ref:e=>this.calendarToggleButtonElement=e,type:"button",onClick:()=>this.toggleCalendar(),disabled:this.disabled},n("gux-icon",{"icon-name":"fa/calendar-regular","screenreader-text":this.i18n("toggleCalendar")}))}renderTarget(){return n("div",{class:"gux-target",slot:"target"},this.renderSpinnerButtons(),this.renderCalendarToggleButton())}renderPopup(){return n("gux-month-calendar",{slot:"popup",ref:e=>this.monthCalendarElement=e,onInput:()=>this.onMonthCalendarInput(),value:this.value,min:this.min,max:this.max})}render(){return n("gux-popup",{key:"0cec690f0cf6289c761678fe22bea1ee16de27d6",expanded:this.expanded,disabled:this.disabled,"exceed-target-width":!0},this.renderTarget(),this.renderPopup())}get root(){return f(this)}static get watchers(){return{value:["onValueUpdate"]}}};O([v({triggerEvents:"mousedown"})],p.prototype,"onClickOutside",null);p.style=P;export{p as gux_month_picker_beta};
