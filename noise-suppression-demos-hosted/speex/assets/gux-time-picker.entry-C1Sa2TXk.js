import{r as w,h as u,g as y}from"./index-CV4KLuUB.js";import{O as C}from"./on-click-outside-21dd269e-9ljsEeio.js";import{s as p}from"./simulate-native-event-e0631897-BcLDngo1.js";import{b as I}from"./after-next-render-07a41f53-C_KTwidI.js";import{b as S,g as D}from"./index-3f1e5ba8-CrdMLsjJ.js";import{t as T}from"./usage-6129fffe-6kP8_2TX.js";import{u as g,a as P}from"./use-regional-dates-a47e74e6-CHt-lzjs.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const R="AM",A="Toggle suggested times",$="Input hours",E="Input minutes",V="PM",L="Time options open: {state}",B="{amOrPm} selected, click to toggle",O={am:R,"time-separator":":",clockButton:A,hoursInput:$,minutesInput:E,pm:V,timeOptionsState:L,toggleAmPM:B};function K(e,t){const i=[0,15,30,45].filter(o=>Number.isInteger(o/e)).map(o=>String(o).padStart(2,"0"));return(t==="12h"?["12","1","2","3","4","5","6","7","8","9","10","11"]:Array.from(Array(24).keys()).map(o=>String(o).padStart(2,"0"))).reduce((o,n)=>o.concat(i.map(a=>`${n}:${a}`)),[])}function M(e){let t;g()?t=P(e).toLowerCase():t=D(e).toLowerCase();const i=new Date("January 19, 1975 15:00:00 UTC+00:00"),r=new Intl.DateTimeFormat(t,{timeStyle:"short",timeZone:"UTC"}).format(i);return!g()&&["ar","ko","zh-cn","zh-tw"].some(n=>t.startsWith(n))||new RegExp(".*15.*").test(r)?"24h":"12h"}function m(e,t){const[i,r]=e.split(":");return`${((parseInt(i,10)+t+24)%24).toString().padStart(2,"0")}:${r}`}function h(e,t,i){const[r,o]=e.split(":");let a=(parseInt(o,10)+t+60)%60;for(;a%i!==0;)a=(a+t+60)%60;const s=a.toString().padStart(2,"0");return`${r}:${s}`}function f(e,t){const[i,r]=e.split(":");return t==="12h"?`${(parseInt(i,10)%12||12).toString()}:${r}`:`${i}:${r}`}function d(e,t,i){const[r,o]=e.split(":");return t==="12h"?i?`${(parseInt(r,10)%12).toString().padStart(2,"0")}:${o}`:`${(parseInt(r,10)%12+12).toString().padStart(2,"0")}:${o}`:`${r}:${o}`}function z(e,t){const[i]=f(e,t).split(":");return i}function H(e){const[,t]=e.split(":");return t}function l(e){const[t]=e.split(":");return parseInt(t,10)<12}function x(e){return e==="12h"?"^(0?[1-9]|1[012])$":"^([01]?[0-9]|2[0-3])$"}function b(){return"^[0-5][0-9]$"}function j(e,t,i,r,o){const[n,a]=f(e,t).split(":");let s=n;return i==="Backspace"?t=="12h"&&o==1?s=s.split("").filter((k,c)=>c==r-1).join(""):s=s.split("").filter((k,c)=>c!==r-1).join("").padStart(2,"0"):s=parseInt(s.slice(0,r)+i+s.slice(r+1),10).toString().slice(-2).padStart(2,"0"),new RegExp(x(t)).test(s)||(t==="12h"?s=i:s=i.padStart(2,"0")),d(`${s}:${a}`,t,l(e))}function _(e,t,i){const[r,o]=e.split(":");let n=o;return t==="Backspace"?n=n.split("").filter((a,s)=>s!==i-1).join("").padStart(2,"0"):n=(n.slice(0,i)+t+n.slice(i+1)).slice(-2).padStart(2,"0"),new RegExp(b()).test(n)||(n=t.padStart(2,"0")),`${r}:${n}`}const F=".gux-time-picker{position:relative;display:inline-block}.gux-time-picker.gux-error .gux-input-time{border-color:var(--gse-ui-formControl-input-error-border-color)}.gux-time-picker .gux-input-time{box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--gse-ui-formControl-input-gap);place-content:stretch center;align-items:center;width:100%;height:var(--gse-ui-formControl-input-textfield-height);padding:var(--gse-ui-formControl-input-padding);font-family:var(--gse-ui-formControl-input-contentText-fontFamily);font-size:var(--gse-ui-formControl-input-contentText-fontSize);line-height:var(--gse-ui-formControl-input-contentText-lineHeight);color:var(--gse-ui-formControl-input-populatedColor);white-space:nowrap;background-color:var(--gse-ui-formControl-input-backgroundColor);background-image:none;border:var(--gse-ui-formControl-input-default-border-width) var(--gse-ui-formControl-input-default-border-style) var(--gse-ui-formControl-input-default-border-color);border-radius:var(--gse-ui-formControl-input-borderRadius)}.gux-time-picker .gux-input-time:focus-within{outline:var(--gse-semantic-focusRing-default-border-color) var(--gse-semantic-focusRing-default-border-style) var(--gse-semantic-focusRing-default-border-width);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-time-picker .gux-input-time:hover:not(:disabled){border:var(--gse-ui-formControl-input-hover-border-width) var(--gse-ui-formControl-input-hover-border-style) var(--gse-ui-formControl-input-hover-border-color)}.gux-time-picker .gux-input-time input{flex:1 1 auto;align-self:auto;order:0;width:2ch;padding:0;font-size:var(--gse-ui-formControl-label-text-fontSize);background-color:var(--gse-ui-formControl-input-backgroundColor);border:none;outline:none}.gux-time-picker .gux-input-time input.gux-input-time-hours{text-align:right}.gux-time-picker .gux-input-time input::placeholder{color:var(--gse-ui-formControl-input-placeholderColor);opacity:1}.gux-time-picker .gux-input-time .gux-input-time-am-pm-selector{display:grid;grid-template:auto 1fr/auto 1fr auto;place-items:flex-end;padding:0;font-family:var(--gse-ui-formControl-input-prefixSufix-text-fontFamily);font-size:var(--gse-ui-formControl-input-prefixSufix-text-fontSize);font-weight:var(--gse-ui-formControl-input-prefixSufix-text-fontWeight);line-height:var(--gse-ui-formControl-input-prefixSufix-text-lineHeight);color:var(--gse-ui-formControl-input-populatedColor);background:transparent;border:none;outline:none}.gux-time-picker .gux-input-time .gux-input-time-am-pm-selector:focus-visible{outline:var(--gse-semantic-focusRing-small-border-color) var(--gse-semantic-focusRing-small-border-style) var(--gse-semantic-focusRing-small-border-width);border-radius:var(--gse-ui-timePicker-focusAmpm-borderRadius)}.gux-time-picker .gux-input-time .gux-input-time-am-pm-selector .gux-meridiem{display:none;grid-row:1/1;grid-column:1/1}.gux-time-picker .gux-input-time .gux-input-time-am-pm-selector .gux-meridiem.gux-visible{display:inline-block}.gux-time-picker .gux-input-time .gux-clock-button{display:flex;flex:0 1 auto;align-items:center;align-self:auto;justify-content:center;order:0;padding:0;color:var(--gse-ui-formControl-input-inputIcon-iconEndColor);background:transparent;border:none;outline:none}.gux-time-picker .gux-input-time .gux-clock-button.gux-active:not(:disabled){color:var(--gse-ui-timePicker-clockStates-activeColor);cursor:pointer}.gux-time-picker .gux-input-time .gux-clock-button:focus-visible{outline:var(--gse-semantic-focusRing-small-border-color) var(--gse-semantic-focusRing-small-border-style) var(--gse-semantic-focusRing-small-border-width);border-radius:var(--gse-ui-timePicker-focusClock-borderRadius)}.gux-time-picker .gux-input-time .gux-clock-button gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm);padding:var(--gse-ui-timePicker-clock-padding)}.gux-time-picker .gux-time-separator{padding:0 1ch}.gux-time-picker .gux-list-container{max-height:150px;margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}",N=F;var U=function(e,t,i,r){var o=arguments.length,n=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(n=(o<3?a(n):o>3?a(t,i,n):a(t,i))||n);return o>3&&n&&Object.defineProperty(t,i,n),n};const v=class{constructor(e){w(this,e),this.value="00:00",this.interval=60,this.step=1,this.disabled=!1,this.required=!1,this.hasError=!1,this.clockType=void 0,this.expanded=!1}onFocus(){this.valueLastChange=this.value}onBlur(){this.valueLastChange!==this.value&&p(this.root,"change")}onClickOutside(){this.expanded=!1}handleKeydown(e){switch(e.key){case"Escape":case"Tab":this.expanded=!1;break}}async componentWillLoad(){T(this.root),this.i18n=await S(this.root,O),this.clockType=this.clockType||M(this.root)}updateValue(e,t=!1){e!==this.value&&(this.value=e,p(this.root,"input"),t&&this.valueLastChange!==this.value&&(p(this.root,"change"),this.valueLastChange=this.value))}valueToId(e){return`gux-id-${e.replace(":","-")}`}focusRelevantItemInPopupList(){I(()=>{this.listElement.guxFocusItemByClosestId(this.valueToId(this.value))})}toggleDropdown(){this.expanded=!this.expanded,this.expanded&&this.focusRelevantItemInPopupList()}handleClickDropdownValue(e){const t=d(e,this.clockType,l(this.value));this.updateValue(t,!0),this.clockButton.focus(),this.expanded=!1}onHourKeyDown(e){switch(e.key){case"Tab":case"ArrowLeft":case"ArrowRight":case"Escape":break;case"ArrowDown":e.preventDefault(),this.updateValue(m(this.value,-1));break;case"ArrowUp":e.preventDefault(),this.updateValue(m(this.value,1));break;case"Backspace":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":e.preventDefault(),this.hourInputElement.setSelectionRange(2,2),this.updateValue(j(this.value,this.clockType,e.key,this.hourInputElement.selectionStart,this.hourInputElement.value.length));break;default:e.preventDefault()}}onMinuteKeyDown(e){switch(e.key){case"Tab":case"ArrowLeft":case"ArrowRight":case"Escape":break;case"ArrowDown":e.preventDefault(),this.updateValue(h(this.value,-1,this.step));break;case"ArrowUp":e.preventDefault(),this.updateValue(h(this.value,1,this.step));break;case"Backspace":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{e.preventDefault(),this.minuteInputElement.setSelectionRange(2,2),this.updateValue(_(this.value,e.key,this.minuteInputElement.selectionStart));break}default:e.preventDefault()}}onAmPmButtonKeyDown(e){switch(e.key){case"ArrowDown":case"ArrowUp":this.toggleAmPm(e);break}}onListKeyDown(e){switch(e.key){case"Escape":this.expanded=!1,this.clockButton.focus();break}}toggleAmPm(e){e.preventDefault(),this.updateValue(m(this.value,12),!0)}getAmPmString(){return l(this.value)?this.i18n("am"):this.i18n("pm")}renderNumberInput(){return u("div",{class:"gux-input-time-container"},u("input",{class:"gux-input-time-hours",type:"text",disabled:this.disabled,value:z(this.value,this.clockType),onKeyDown:e=>this.onHourKeyDown(e),"aria-label":this.i18n("hoursInput"),pattern:x(this.clockType),ref:e=>this.hourInputElement=e}),u("span",{class:"gux-time-separator"},this.i18n("time-separator")),u("input",{class:"gux-input-time-minutes",type:"text",disabled:this.disabled,value:H(this.value),onKeyDown:e=>this.onMinuteKeyDown(e),"aria-label":this.i18n("minutesInput"),pattern:b(),ref:e=>this.minuteInputElement=e}))}renderAmPmSelector(){if(this.clockType==="12h")return u("button",{class:"gux-input-time-am-pm-selector",type:"button",disabled:this.disabled,"aria-label":this.i18n("toggleAmPM",{amOrPm:this.getAmPmString()}),onClick:e=>this.toggleAmPm(e),onKeyDown:e=>this.onAmPmButtonKeyDown(e)},u("div",{class:{"gux-meridiem":!0,"gux-visible":l(this.value)}},this.i18n("am")),u("div",{class:{"gux-meridiem":!0,"gux-visible":!l(this.value)}},this.i18n("pm")))}renderClockButton(){return u("button",{class:{"gux-clock-button":!0,"gux-active":this.expanded},type:"button",disabled:this.disabled,"aria-label":this.i18n("clockButton"),"aria-expanded":this.expanded.toString(),onClick:this.toggleDropdown.bind(this),ref:e=>this.clockButton=e},u("gux-icon",{decorative:!0,"icon-name":"fa/clock-regular"}))}renderTimeListItems(){return K(this.interval,this.clockType).map(e=>{const t=d(e,this.clockType,l(this.value));return u("gux-list-item",{id:this.valueToId(t),onClick:()=>this.handleClickDropdownValue(e)},e)})}renderTarget(){return u("div",{class:"gux-input-time",slot:"target"},this.renderNumberInput(),this.renderAmPmSelector(),this.renderClockButton())}renderPopup(){return u("div",{slot:"popup",class:"gux-list-container",onKeyDown:e=>this.onListKeyDown(e)},u("gux-list",{ref:e=>this.listElement=e},this.renderTimeListItems()))}render(){return u("gux-popup",{key:"0eefe03617ee5a4be3754cc8f38194c5b5ff7949",class:{"gux-time-picker":!0,"gux-error":this.hasError},expanded:this.expanded,disabled:this.disabled},this.renderTarget(),this.renderPopup())}get root(){return y(this)}};U([C({triggerEvents:"mousedown"})],v.prototype,"onClickOutside",null);v.style=N;export{v as gux_time_picker};
