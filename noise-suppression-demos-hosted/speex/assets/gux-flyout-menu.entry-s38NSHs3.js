import{r as d,h as t,H as m,g as f}from"./index-CV4KLuUB.js";import{a as p,c as g,o as b,f as x,s as w,b as y}from"./floating-ui.dom.esm-8b93f9de-BrzsGlin.js";import{a as u}from"./after-next-render-07a41f53-C_KTwidI.js";import{t as v}from"./usage-6129fffe-6kP8_2TX.js";import{h as E}from"./gux-menu.common-b2a4d472-CSLYc6Td.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const S=":host{z-index:var(--gse-semantic-zIndex-popover);color:var(--gse-ui-menu-option-label-foregroundColor);cursor:default}:host(:focus){outline:none}:host(:focus-visible){outline:var(--gse-semantic-focusRing-default-border-color) var(--gse-semantic-focusRing-default-border-style) var(--gse-semantic-focusRing-default-border-width);outline-offset:var(--gse-semantic-focusRing-offset)}.gux-flyout-menu-content{position:fixed;display:none;border:none;border-radius:var(--gse-ui-menu-borderRadius)}.gux-flyout-menu-content.gux-shown{display:flex}.gux-flyout-menu-content .gux-arrow{position:absolute;z-index:-1;width:var(--gse-ui-popover-anchor-width);height:var(--gse-ui-popover-anchor-height);background:var(--gse-ui-popover-backgroundColor);border:none;box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}",k=S,C=class{constructor(e){d(this,e),this.isShown=!1}onKeydown(e){if(e.stopPropagation(),this.isShown)switch(e.key){case"Escape":case"ArrowLeft":case"ArrowUp":this.root.focus();return;case"ArrowDown":e.preventDefault(),this.focusOnMenu();return;case"Enter":this.hideDelayTimeout=u(()=>{this.focusOnMenu()});return}}onKeyup(e){switch(e.stopPropagation(),e.key){case" ":this.root===e.target?this.focusOnMenu():this.hideDelayTimeout=u(()=>{this.root.focus()});return}}onmouseenter(){this.show()}onMouseleave(){this.hide()}onClick(e){e.detail!==0&&this.hide(),this.root.focus()}onFocusin(){this.show()}onFocusout(){this.hide()}show(){clearTimeout(this.hideDelayTimeout),this.isShown=!0}hide(){this.isShown&&(this.hideDelayTimeout=setTimeout(()=>{this.isShown=!1},E))}runUpdatePosition(){this.root.isConnected?this.cleanupUpdatePosition=p(this.targetElement,this.menuContentElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){this.root&&g(this.targetElement,this.menuContentElement,{placement:"bottom-start",strategy:"fixed",middleware:[b(16),x(),w(),y({element:this.arrowElement,padding:16})]}).then(({x:s,y:i,middlewareData:n,placement:h})=>{var o;Object.assign(this.menuContentElement.style,{left:`${s}px`,top:`${i}px`});const c=h.split("-")[0],l={top:"bottom",right:"left",bottom:"top",left:"right"}[c];if(n.arrow){const{x:r,y:a}=n.arrow;Object.assign((o=this.arrowElement)===null||o===void 0?void 0:o.style,{left:r!=null?`${r}px`:"",top:a!=null?`${a}px`:"",right:"",bottom:"",[l]:`${-13/2-1}px`,transform:"rotate(-45deg)"})}})}focusOnMenu(){if(this.menuContentElement.contains(document.activeElement))return;const e=this.root.querySelector("gux-menu");Array.from(e.children)[0].guxFocus()}componentWillLoad(){v(this.root)}componentDidLoad(){this.isShown&&this.runUpdatePosition()}componentDidUpdate(){this.isShown?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}render(){return t(m,{key:"668923463417deedda3ef75f60c3577d33e4ac0f",tabIndex:0,"aria-haspopup":"true"},t("span",{key:"1e69b6c6e005bde4508fb6743e3bdfba162771a6",ref:e=>this.targetElement=e},t("slot",{key:"fc9c5449e11af4171845c0b20e4b3f6dee653710",name:"target"})),t("div",{key:"94eaf16316a15fa306ba1df5f8384f289e3d422b",class:{"gux-flyout-menu-content":!0,"gux-shown":this.isShown},ref:e=>this.menuContentElement=e},t("div",{key:"63d74ae8897f706ead076c45b9149204c1694243",ref:e=>this.arrowElement=e,class:"gux-arrow"}),t("slot",{key:"a76dabe861b1b2ba9861b87eb30d3a8967ea9fc4",name:"menu"})))}get root(){return f(this)}};C.style=k;export{C as gux_flyout_menu};
