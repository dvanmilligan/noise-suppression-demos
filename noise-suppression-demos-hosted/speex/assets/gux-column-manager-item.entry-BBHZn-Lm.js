import{r as s,c as o,h as t,H as d,g as c}from"./index-CV4KLuUB.js";import{b as g}from"./index-3f1e5ba8-CrdMLsjJ.js";import{c as n}from"./gux-column-manager.service-90a02975-GGjVHfbH.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";import"./clamp-1fc36648-DnrAwabn.js";import"./simulate-native-event-e0631897-BcLDngo1.js";function l(e,r,i){return e<r?i?r-1:r:i?r:r+1}const u="Activate reordering mode for {columnName} column",h={activateReordering:u},b=":host([gs-reorder-indicator=above]) .gux-container{border-top-color:#aac9ff}:host([gs-reorder-indicator=below]) .gux-container{border-bottom-color:#aac9ff}.gux-container{display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--gse-ui-dataTableItems-editColumn-editColumnItem-gap);place-content:stretch flex-start;align-items:center;margin-bottom:-2px;border-top:2px solid transparent;border-bottom:2px solid transparent}.gux-container.gux-drop-above{border-top-color:#aac9ff}.gux-container.gux-drop-below{border-bottom-color:#aac9ff}.gux-container.gux-dragging{border-top-color:transparent;border-bottom-color:transparent;opacity:0.4}.gux-container .gux-reorder{all:unset;display:flex;flex:0 1 auto;align-self:auto;order:0;color:#596373;cursor:grab;border-radius:4px}.gux-container .gux-reorder gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm)}.gux-container .gux-reorder.gux-reordering:focus-visible gux-icon{color:#2a60c8}.gux-container .gux-reorder:active{pointer-events:none;cursor:grabbing !important}.gux-container .gux-reorder:hover,.gux-container .gux-reorder:focus-visible{outline:var(--gse-semantic-focusRing-small-border-color) var(--gse-semantic-focusRing-small-border-style) var(--gse-semantic-focusRing-small-border-width)}.gux-container .gux-reorder:hover gux-icon,.gux-container .gux-reorder:focus-visible gux-icon{color:#2a60c8}.gux-container .gux-select{position:relative;flex:1 1 auto;align-self:auto;order:1}.gux-container .gux-select gux-text-highlight{position:absolute;top:1px;left:calc(var(--gse-ui-icon-size-sm) + var(--gse-ui-checkbox-gap));color:transparent;pointer-events:none}.gux-sr-only:not(:focus):not(:active){position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);white-space:nowrap}",f=b,m=class{constructor(e){s(this,e),this.internal_order_change=o(this,"internal_order_change",7),this.internal_keyboard_reorder_start=o(this,"internal_keyboard_reorder_start",7),this.internal_keyboard_reorder_move=o(this,"internal_keyboard_reorder_move",7),this.internal_keyboard_reorder_emit=o(this,"internal_keyboard_reorder_emit",7),this.internal_keyboard_reorder_finish=o(this,"internal_keyboard_reorder_finish",7),this.orderId=void 0,this.highlightActive=void 0,this.highlight=void 0,this.text=void 0,this.pendingReorder="none",this.isDragging=!1,this.isReordering=!1}async guxSetHighlight(e="",r=!1){this.highlight=e,this.highlightActive=r}async guxFocus(){this.reorderButtonElement.focus()}onBlur(){this.setReorderMode(!1)}onDragStart(e){this.isDragging=!0;const r=n(this.root);e.dataTransfer.setData("oldIndex",String(r)),e.dataTransfer.effectAllowed="move"}onDragEnter(e){e.dataTransfer.dropEffect="move",this.pendingReorder=this.mouseOnTopHalf(e)?"above":"below"}onDragOver(e){e.preventDefault(),this.pendingReorder=this.mouseOnTopHalf(e)?"above":"below"}onDragLeave(){this.pendingReorder="none"}onDragEnd(){this.isDragging=!1}onDrop(e){const r=Number(e.dataTransfer.getData("oldIndex")),i=n(this.root);e.stopPropagation(),e.stopImmediatePropagation(),this.pendingReorder="none";const a=l(r,i,this.mouseOnTopHalf(e));return this.internal_order_change.emit({oldIndex:r,newIndex:a}),!1}mouseOnTopHalf(e){const r=this.root.getBoundingClientRect();return e.clientY-r.top<=(r.bottom-r.top)/2}onSlotChange(){this.text=this.root.querySelector("gux-form-field-checkbox label").textContent}setReorderMode(e,r=!1){this.isReordering!==e&&(this.isReordering=e,e?this.internal_keyboard_reorder_start.emit(this.text):(r&&this.internal_keyboard_reorder_emit.emit(),this.internal_keyboard_reorder_finish.emit()))}toggleReorderMode(){this.setReorderMode(!this.isReordering,!0)}keyboardReorder(e){if(this.isReordering)switch(e.key){case"ArrowUp":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:-1,column:this.text});break}case"ArrowDown":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:1,column:this.text});break}case"Home":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:-1/0,column:this.text});break}case"End":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:1/0,column:this.text});break}case"Escape":e.preventDefault(),this.setReorderMode(!1)}}async componentWillLoad(){this.i18n=await g(this.root,h)}render(){return t(d,{key:"4b4c3ef355c0d140730fc90e635cba61e82e077e",draggable:"true"},t("div",{key:"b7108b987d42d6447701b3db59a23455a85b5554",class:{"gux-container":!0,[`gux-drop-${this.pendingReorder}`]:!0,"gux-dragging":this.isDragging}},t("button",{key:"3d66a05cf5655bd5f0d8dbfa566167be5bceb681",class:{"gux-reorder":!0,"gux-reordering":this.isReordering},type:"button",onClick:()=>this.toggleReorderMode(),onKeyDown:e=>this.keyboardReorder(e),ref:e=>this.reorderButtonElement=e},t("gux-icon",{key:"feea2baefd6ba7128d8eb1d7fbbe48f241c5f788","icon-name":"fa/grip-vertical-solid",decorative:!0}),t("span",{key:"6828baaeb877ec32bac9c78d96cceecb1becc79d",class:"gux-sr-only"},this.i18n("activateReordering",{columnName:this.text}))),t("div",{key:"e3d3148a61099acb4707f5cb66a40c1dbefc3789",class:"gux-select"},t("slot",{key:"fad304e29274cdf9fa15a679ba7d6009c68868b8",onSlotchange:()=>this.onSlotChange()}),t("gux-text-highlight",{key:"a4012488bdd5f6a979283768710e69c4f62188ea",highlight:this.highlight,text:this.text,strategy:"contains",dimmed:!this.highlightActive}))))}get root(){return c(this)}};m.style=f;export{m as gux_column_manager_item};
