import{r as u,c as h,h as p,g as f}from"./index-RhTaIPoL.js";import{a as m,c as b,o as g,f as v,s as x,b as k}from"./floating-ui.dom-s4o__4X6-DwnQVfa1.js";import{O as w}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{t as O}from"./usage-BYFiy2rf-lhiVWKSr.js";import{f as c}from"./find-element-by-id-Cr5bTKWF-DntMpzyb.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const P=".gux-popover-wrapper{position:fixed;inset-block-start:0;inset-inline-start:0;z-index:var(--gse-semantic-zIndex-popover);display:inline-block;padding-block:8px;padding-inline:0;background-color:var(--gse-ui-popover-backgroundColor);border-radius:var(--gse-ui-popover-borderRadius);box-shadow:var(--gse-ui-popover-boxShadow)}.gux-popover-wrapper.gux-hidden{display:none}.gux-popover-wrapper .gux-arrow{position:absolute;inline-size:var(--gse-ui-popover-anchor-width);block-size:var(--gse-ui-popover-anchor-width);background:var(--gse-ui-popover-backgroundColor)}";var E=function(t,e,s,o){var n=arguments.length,i=n<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,s):o,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(i=(n<3?r(i):n>3?r(e,s,i):r(e,s))||i);return n>3&&i&&Object.defineProperty(e,s,i),i};const l=class{constructor(t){u(this,t),this.guxdismiss=h(this,"guxdismiss",7),this.position="bottom",this.closeOnClickOutside=!1,this.isOpen=!1}onKeyDown(t){switch(t.key){case"Tab":case"Escape":this.dismiss();break}}checkForClickOutside(t){const e=t.composedPath(),s=c(this.root,this.for),o=e.includes(s);(this.closeOnClickOutside||!this.displayDismissButton)&&this.isOpen&&!o&&this.dismiss()}runUpdatePosition(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition(),this.root.isConnected?this.cleanupUpdatePosition=m(c(this.root,this.for),this.popupElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){const t=c(this.root,this.for);this.popupElement&&b(t,this.popupElement,{strategy:"fixed",placement:this.position,middleware:[g(7),v(),x(),k({element:this.arrowElement,padding:16})]}).then(({x:e,y:s,middlewareData:o,placement:n})=>{Object.assign(this.popupElement.style,{left:`${e}px`,top:`${s}px`});const i=n.split("-")[0],r={top:"bottom",right:"left",bottom:"top",left:"right"}[i];if(o.arrow){const{x:a,y:d}=o.arrow;this.popupElement.setAttribute("data-placement",n),Object.assign(this.arrowElement.style,{left:a!=null?`${a}px`:"",top:d!=null?`${d}px`:"",right:"",bottom:"",[r]:`${-13/2}px`,transform:"rotate(45deg)"})}})}dismiss(){this.guxdismiss.emit().defaultPrevented||(this.isOpen=!1)}connectedCallback(){O(this.root,{variant:this.position})}componentDidLoad(){this.isOpen&&this.runUpdatePosition()}componentDidUpdate(){this.isOpen?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}render(){return p("div",{key:"1d04d3e24aa35126a518716dabfd679b578a5cc5",ref:t=>this.popupElement=t,class:{"gux-hidden":!this.isOpen,"gux-popover-wrapper":!0},"data-placement":!0},p("div",{key:"696005e4b9b97ef4c96161ae6a9206c987c0cfaf",ref:t=>this.arrowElement=t,class:"gux-arrow"}),this.displayDismissButton&&p("gux-dismiss-button",{key:"d70f9afb82663115b48395b6c3aac83da1117075",onClick:this.dismiss.bind(this)}),p("div",{key:"caed4ed8d30584d0d7c0b62ace25c53bb303be45",class:"gux-popover-content"},p("slot",{key:"1f0fdd8a4a554ef5cfaeef3f54c370c391f1dbb1"})))}get root(){return f(this)}};E([w({triggerEvents:"mousedown"})],l.prototype,"checkForClickOutside",null);l.style=P;export{l as gux_popover_list};
