import{r as m,h as n,g as f}from"./index-RhTaIPoL.js";import{t as x}from"./usage-BYFiy2rf-lhiVWKSr.js";import{O as v}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{b,g as C}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{a as y}from"./spark-intl-CJJbLxeY-BrpETJ5c.js";import{u as S}from"./use-regional-dates-BgaA4g76-C5bTvd2o.js";import{s as g}from"./simulate-native-event-BMRf5pjV-BcLDngo1.js";import{b as d}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{g as i,a as h,b as c}from"./year-month-values-Dwrcabgx-BGOpTfvI.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./get-closest-element-DCZG2J0G-kuMVup89.js";const k="Toggle month calendar view",w="Month",M="Year",D="Unset";var B={toggleCalendar:k,month:w,year:M,unset:D};const O=":host{display:inline-block}.gux-target{display:inline-flex;gap:var(--gse-ui-formControl-input-gap);padding:var(--gse-ui-formControl-textarea-padding);cursor:pointer;background-color:var(--gse-ui-calendarMenu-backgroundColor);border:var(--gse-ui-formControl-input-default-border-width) var(--gse-ui-formControl-input-default-border-style) var(--gse-ui-formControl-input-default-border-color);border-radius:var(--gse-ui-formControl-input-borderRadius)}.gux-target:focus-within{outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color);outline-offset:var(--gse-semantic-focusOutline-offset);border:var(--gse-ui-formControl-input-active-border-width) var(--gse-ui-formControl-input-active-border-style) var(--gse-ui-formControl-input-active-border-color);border-radius:var(--gse-ui-formControl-focusRing-borderRadius)}.gux-target .gux-display{display:inline-flex;align-items:center;min-inline-size:100px;padding-inline-end:var(--gse-ui-formControl-input-gap);font-family:var(--gse-ui-formControl-label-text-fontFamily);font-size:var(--gse-ui-formControl-label-text-fontSize);font-weight:var(--gse-ui-formControl-label-text-fontWeight);line-height:var(--gse-ui-formControl-label-text-lineHeight);color:var(--gse-ui-formControl-label-labelColor)}.gux-target .gux-display .gux-spinner{outline:none}.gux-target .gux-display .gux-spinner:not(:first-child){margin-inline-start:4px}.gux-target .gux-display .gux-spinner:focus-visible{background:var(--gse-ui-calendarMenu-month-hover-backgroundColor)}.gux-target .gux-popup-toggle{justify-content:right;color:var(--gse-ui-monthPicker-calendarStates-defaultColor);background:transparent;border:none}.gux-target .gux-popup-toggle:focus-visible{outline:var(--gse-ui-monthPicker-calendarStates-focus-border-width) var(--gse-ui-monthPicker-calendarStates-focus-border-style) var(--gse-ui-monthPicker-calendarStates-focus-border-color);outline-offset:var(--gse-semantic-focusOutline-offset);border-radius:var(--gse-ui-calendarMenu-month-calendarButton-focusBorderRadius)}.gux-target .gux-popup-toggle:not(:disabled):hover{color:var(--gse-ui-monthPicker-calendarStates-hoverColor);cursor:pointer}.gux-target .gux-popup-toggle:not(:disabled):focus{color:var(--gse-ui-monthPicker-calendarStates-activeColor);cursor:pointer}.gux-target .gux-popup-toggle:disabled{color:var(--gse-ui-monthPicker-calendarStates-disabledColor)}.gux-target .gux-popup-toggle.gux-expanded{color:var(--gse-ui-monthPicker-calendarStates-activeColor)}";var E=function(e,t,r,o){var s=arguments.length,a=s<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,r):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,o);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(a=(s<3?l(a):s>3?l(t,r,a):l(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a};const P={calendar:"gregory",year:"numeric",month:"long"},T=["ar","he","ja","ko","zh-cn","zh-tw"],p=class{constructor(e){m(this,e),this.disabled=!1,this.expanded=!1}onKeyDown(e){switch(e.key){case"Escape":this.expanded=!1,this.calendarToggleButtonElement.focus();break}}onValueUpdate(e){this.isOutOfBounds(e)?this.isBeforeMin(e)?this.value=this.min:this.value=this.max:this.value=e,g(this.root,"input"),g(this.root,"change")}onClickOutside(){this.expanded=!1}async componentWillLoad(){x(this.root),this.i18n=await b(this.root,B),S()?this.locale=y(this.root):this.locale=C(this.root)}onFocusout(e){e.relatedTarget&&!this.root.contains(e.relatedTarget)&&(this.expanded=!1)}isOutOfBounds(e){return this.isBeforeMin(e)||this.isAfterMax(e)}isBeforeMin(e){return this.min&&this.min>e}isAfterMax(e){return this.max&&this.max<e}toggleCalendar(){this.expanded=!this.expanded,this.expanded&&d(()=>{this.monthCalendarElement.guxFocus(this.value)})}onMonthCalendarInput(){this.value=this.monthCalendarElement.value,this.expanded=!1,this.calendarToggleButtonElement.focus()}incrementMonth(e){if(this.value){const{year:t,month:r}=i(this.value),o=((parseInt(r)+11+e)%12+1).toString().padStart(2,"0");this.value=h(t,o)}else this.value=c()}incrementYear(e){if(this.value){const{year:t,month:r}=i(this.value),o=Math.max(Number(t)+e,0).toString();this.value=h(o,r)}else this.value=c()}onSpinnerKeyDown(e,t,r){switch(e.key){case"ArrowDown":e.preventDefault(),t(-1);break;case"ArrowUp":e.preventDefault(),t(1);break;case"ArrowLeft":case"ArrowRight":e.preventDefault(),r.focus();break;case"Enter":e.preventDefault(),this.expanded=!0,d(()=>{this.monthCalendarElement.guxFocus(this.value)});break;case" ":e.preventDefault();break}}onSpinnerKeyUp(e){switch(e.stopPropagation(),e.key){case" ":e.preventDefault(),this.expanded=!0,d(()=>{this.monthCalendarElement.guxFocus(this.value)});break}}onSpinnerClick(){this.expanded=!0}getSpinnerLabel(e){if(this.value){const{year:t,month:r}=i(this.value);return new Date(Number(t),Number(r)-1).toLocaleDateString(this.locale,{calendar:"gregory",[e]:P[e]})}return this.i18n(e)}getSpinnerValueNow(e){return this.value?i(this.value)[e]:"0"}getSpinnerValueText(){if(this.value){const{year:e,month:t}=i(this.value);return new Date(Number(e),Number(t)-1).toLocaleDateString(this.locale,{calendar:"gregory",year:"numeric",month:"long"})}return this.i18n("unset")}renderMonthSpinnerButton(){return n("div",{role:"spinbutton",class:"gux-spinner",tabIndex:this.disabled?-1:0,onKeyDown:e=>this.onSpinnerKeyDown(e,t=>this.incrementMonth(t),this.yearSpinnerElement),onKeyUp:e=>this.onSpinnerKeyUp(e),onClick:()=>this.onSpinnerClick(),ref:e=>this.monthSpinnerElement=e,"aria-valuenow":this.getSpinnerValueNow("month"),"aria-valuetext":this.getSpinnerValueText(),"aria-valuemin":"1","aria-valuemax":"12","aria-label":this.i18n("month")},this.getSpinnerLabel("month"))}renderYearSpinnerButton(){return n("div",{role:"spinbutton",class:"gux-spinner",tabIndex:this.disabled?-1:0,onKeyDown:e=>this.onSpinnerKeyDown(e,t=>this.incrementYear(t),this.monthSpinnerElement),onKeyUp:e=>this.onSpinnerKeyUp(e),onClick:()=>this.onSpinnerClick(),ref:e=>this.yearSpinnerElement=e,"aria-valuenow":this.getSpinnerValueNow("year"),"aria-valuetext":this.getSpinnerValueText(),"aria-valuemin":"0","aria-label":this.i18n("year")},this.getSpinnerLabel("year"))}renderSpinnerButtons(){return T.includes(this.locale)?n("span",{class:"gux-display"},this.renderYearSpinnerButton(),this.renderMonthSpinnerButton()):n("span",{class:"gux-display"},this.renderMonthSpinnerButton(),this.renderYearSpinnerButton())}renderCalendarToggleButton(){return n("button",{class:{"gux-popup-toggle":!0,"gux-expanded":this.expanded},ref:e=>this.calendarToggleButtonElement=e,type:"button",onClick:()=>this.toggleCalendar(),disabled:this.disabled},n("gux-icon",{"icon-name":"fa/calendar-regular",decorative:!0,size:"small"}),n("gux-screen-reader-beta",null,this.i18n("toggleCalendar")))}renderTarget(){return n("div",{class:"gux-target",slot:"target"},this.renderSpinnerButtons(),this.renderCalendarToggleButton())}renderPopup(){return n("gux-month-calendar",{slot:"popup",ref:e=>this.monthCalendarElement=e,onInput:()=>this.onMonthCalendarInput(),value:this.value,min:this.min,max:this.max})}render(){return n("gux-popup",{key:"2a8af0cf16d2c59ec08c241ea997770d429bef19",expanded:this.expanded,disabled:this.disabled,"exceed-target-width":!0},this.renderTarget(),this.renderPopup())}get root(){return f(this)}static get watchers(){return{value:["onValueUpdate"]}}};E([v({triggerEvents:"mousedown"})],p.prototype,"onClickOutside",null);p.style=O;export{p as gux_month_picker_beta};
