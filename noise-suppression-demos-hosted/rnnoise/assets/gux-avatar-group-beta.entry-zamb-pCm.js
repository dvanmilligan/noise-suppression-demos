import{r as u,h as i,H as c,g as m}from"./index-RhTaIPoL.js";import{t as g}from"./usage-BYFiy2rf-lhiVWKSr.js";import{l}from"./log-error-DxtJDeL9-5foDqi4E.js";import{s as d,r as p}from"./gux-avatar-group.service-DMpkGO63-DD1-fUIk.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const h=":host{display:flex;align-items:center;inline-size:fit-content;padding-block:var(--gse-semantic-interactive-sm-padding);padding-inline:var(--gse-semantic-interactive-sm-padding) var(--gse-semantic-interactive-md-padding)}:host(:focus-visible){outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset)}.gux-add-item-overflow{padding-inline-start:calc(var(--gse-core-spacing-4xs) + 2px)}",v=class{constructor(e){u(this,e),this.processedGroupItems=[],this.quantity=7}async componentWillLoad(){g(this.root,{variant:this.quantity.toString()})}componentDidLoad(){this.setInitialFocusTarget()}componentWillRender(){this.processGroupItems(),this.hideOverflowGroupItems()}onMouseOver(e){this.hideCurrentTooltip(e)}getGroupItems(){return Array.from(this.root.children)}setInitialFocusTarget(){const e=this.getGroupItems();if(e.length>0){const t=e[0];d(t)}}processGroupItems(){const e=this.getGroupItems();this.validateChildElements(e),this.processedGroupItems=e.map((t,r)=>{var o,a,s;return{img:(o=t.querySelector("img"))!==null&&o!==void 0?o:null,name:(a=t==null?void 0:t.name)!==null&&a!==void 0?a:"",accent:(s=t==null?void 0:t.accent)!==null&&s!==void 0?s:null,isOverflow:r>=this.quantity,groupItem:t}})}hideOverflowGroupItems(){this.processedGroupItems.filter(t=>t.isOverflow).forEach(t=>{t.groupItem.setAttribute("hidden","")})}hideCurrentTooltip(e){const t=e.target,r=this.getGroupItems(),o=this.root.shadowRoot.querySelector("gux-avatar-group-add-item-beta"),s=[...r,o].find(n=>n==null?void 0:n.matches(":focus-within"));s&&s!==t&&s.hideTooltip()}handleClick(e){const t=e.target;t.tagName==="GUX-AVATAR-GROUP-ITEM-BETA"&&!t.hasAttribute("hidden")&&(p(t),d(t))}validateChildElements(e){e.length===0&&l(this.root,"gux-avatar-group-beta: No child elements detected. Please add some gux-avatar-item-beta tags to slot");const t=["GUX-AVATAR-GROUP-ITEM-BETA","GUX-AVATAR-GROUP-ADD-ITEM-BETA","GUX-AVATAR-OVERFLOW-BETA"];e.some(o=>!t.includes(o.tagName))&&l(this.root,"gux-avatar-group-beta: Invalid child element detected. All child elements must be either buttons, anchor tags or gux-avatar-beta components")}renderOverflowMenu(){if(this.root.children.length>this.quantity){const e=this.processedGroupItems.filter(t=>t.isOverflow&&t.groupItem.tagName==="GUX-AVATAR-GROUP-ITEM-BETA");return i("gux-avatar-overflow-beta",null,e.map(t=>{var r,o;return i("gux-avatar-overflow-item-beta",{name:t.name,accent:t.accent,onClick:()=>t.groupItem.click()},t.img?i("img",{slot:"image",src:(r=t.img)===null||r===void 0?void 0:r.src,alt:(o=t.img)===null||o===void 0?void 0:o.alt}):null)}))}else return null}renderAddToGroup(){return this.processedGroupItems.find(t=>t.groupItem.tagName==="GUX-AVATAR-GROUP-ADD-ITEM-BETA")&&this.root.children.length>this.quantity?i("gux-avatar-group-add-item-beta",{class:"gux-add-item-overflow"}):null}render(){return i(c,{key:"12ed6958bf0eaae279c4946466c8f642998d24e1",role:"menu",onClick:this.handleClick.bind(this)},i("slot",{key:"38fe5890d9340ba6970a587084ab961431af6eaa"}),this.renderOverflowMenu(),this.renderAddToGroup())}get root(){return m(this)}};v.style=h;export{v as gux_avatar_group_beta};
