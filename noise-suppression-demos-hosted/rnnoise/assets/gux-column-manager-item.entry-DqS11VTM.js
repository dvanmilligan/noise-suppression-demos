import{r as s,c as o,h as t,H as d,g as l}from"./index-RhTaIPoL.js";import{b as u}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{c as i}from"./gux-column-manager.service-CB2ijDRX-B46yg9Cu.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./clamp-CcCycvZh-DnrAwabn.js";import"./simulate-native-event-BMRf5pjV-BcLDngo1.js";function g(e,r,n){return e<r?n?r-1:r:n?r:r+1}const c="Activate reordering mode for {columnName} column";var m={activateReordering:c};const h=":host([gs-reorder-indicator=above]) .gux-container{border-block-start-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-drop-borderColor)}:host([gs-reorder-indicator=below]) .gux-container{border-block-end-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-drop-borderColor)}.gux-container{display:flex;flex-direction:row;flex-wrap:nowrap;gap:var(--gse-ui-dataTableItems-editColumn-editColumnItem-gap);place-content:stretch flex-start;align-items:center;margin-block-end:-2px;border-block-start:2px solid transparent;border-block-end:2px solid transparent}.gux-container.gux-parent-reordering{cursor:pointer}.gux-container.gux-parent-reordering .gux-reorder{cursor:pointer}.gux-container.gux-parent-reordering:hover{border-block-end-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-drop-borderColor)}.gux-container gux-icon{border-radius:var(--gse-ui-dataTableItems-editColumn-editColumnItem-editColumnIcon-borderRadius)}.gux-container:hover gux-icon{color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-hover-foregroundColor);background-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-hover-backgroundColor)}.gux-container.gux-drop-above{border-block-start-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-drop-borderColor)}.gux-container.gux-drop-below{border-block-end-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-drop-borderColor)}.gux-container.gux-dragging{cursor:grabbing;border-block-start-color:transparent;border-block-end-color:transparent;opacity:0.4}.gux-container .gux-reorder{all:unset;display:flex;flex:0 1 auto;align-self:auto;order:0;inline-size:var(--gse-ui-dataTableItems-editColumn-editColumnItem-editColumnIcon-width);block-size:var(--gse-ui-dataTableItems-editColumn-editColumnItem-editColumnIcon-height);color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-foregroundColor);cursor:grab;border-radius:var(--gse-ui-dataTableItems-editColumn-editColumnItem-editColumnIcon-borderRadius)}.gux-container .gux-reorder.gux-reordering{color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-active-foregroundColor);background-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-active-backgroundColor)}.gux-container .gux-reorder:active{pointer-events:none;cursor:grabbing !important}.gux-container .gux-reorder:active gux-icon,.gux-container .gux-reorder:focus-visible gux-icon{color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-active-foregroundColor);background-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-active-backgroundColor)}.gux-container .gux-reorder:hover gux-icon{color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-hover-foregroundColor);background-color:var(--gse-ui-dataTableItems-editColumn-editColumnItem-columnItemIcon-hover-backgroundColor)}.gux-container .gux-select{position:relative;flex:1 1 auto;align-self:auto;order:1}.gux-container .gux-select gux-text-highlight{position:absolute;inset-block-start:1px;inset-inline-start:calc(var(--gse-ui-icon-small-size) + var(--gse-ui-checkbox-gap));color:transparent;pointer-events:none}.gux-sr-only{}.gux-sr-only:not(:focus):not(:active){position:absolute;width:1px;height:1px;overflow:hidden;white-space:nowrap;clip-path:inset(50%)}",b=class{constructor(e){s(this,e),this.internal_order_change=o(this,"internal_order_change",7),this.internal_keyboard_reorder_start=o(this,"internal_keyboard_reorder_start",7),this.internal_keyboard_reorder_move=o(this,"internal_keyboard_reorder_move",7),this.internal_keyboard_reorder_emit=o(this,"internal_keyboard_reorder_emit",7),this.internal_keyboard_reorder_finish=o(this,"internal_keyboard_reorder_finish",7),this.internal_mouse_reorder_move=o(this,"internal_mouse_reorder_move",7),this.pendingReorder="none",this.isDragging=!1,this.isReordering=!1,this.isParentReordering=!1}async guxSetHighlight(e="",r=!1){this.highlight=e,this.highlightActive=r}async guxFocus(){this.reorderButtonElement.focus()}async reset(){this.isReordering=!1,this.pendingReorder="none"}onBlur(e){const r=e.relatedTarget;(!r||r.tagName!=="GUX-COLUMN-MANAGER-ITEM")&&this.setReorderMode(!1)}onDragStart(e){this.isReordering=!0,this.isDragging=!0;const r=i(this.root);e.dataTransfer.setData("oldIndex",String(r)),e.dataTransfer.effectAllowed="move"}onDragEnter(e){e.dataTransfer.dropEffect="move",this.pendingReorder=this.mouseOnTopHalf(e)?"above":"below"}onDragOver(e){e.preventDefault(),this.pendingReorder=this.mouseOnTopHalf(e)?"above":"below"}onDragLeave(){this.pendingReorder="none"}onDragEnd(){this.isDragging=!1}onmouseenter(){const e=this.root.parentElement;this.isParentReordering=e.classList.contains("gux-reordering")}onMouseleave(){this.isParentReordering=!1}onDrop(e){const r=Number(e.dataTransfer.getData("oldIndex")),n=i(this.root);e.stopPropagation(),e.stopImmediatePropagation(),this.pendingReorder="none";const a=g(r,n,this.mouseOnTopHalf(e));return this.internal_order_change.emit({oldIndex:r,newIndex:a}),!1}mouseOnTopHalf(e){const r=this.root.getBoundingClientRect();return e.clientY-r.top<=(r.bottom-r.top)/2}onSlotChange(){this.text=this.root.querySelector("gux-form-field-checkbox label").textContent}setReorderMode(e,r=!1){this.isReordering!==e&&(this.isReordering=e,e?this.internal_keyboard_reorder_start.emit(this.text):(r&&this.internal_keyboard_reorder_emit.emit(),this.internal_keyboard_reorder_finish.emit()))}toggleReorderMode(){this.setReorderMode(!this.isReordering,!0)}onMouseDown(){this.isDragging=!1}onMouseUp(e){e.preventDefault();const r=e.target;r.tagName==="GUX-FORM-FIELD-CHECKBOX"||r.tagName==="LABEL"||r.tagName==="INPUT"||this.isDragging||(this.isReordering=!this.isReordering,this.internal_mouse_reorder_move.emit(r),document.removeEventListener("mouseup",this.onMouseUp))}keyboardReorder(e){if(this.isReordering)switch(e.key){case"ArrowUp":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:-1,column:this.text});break}case"ArrowDown":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:1,column:this.text});break}case"Home":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:-1/0,column:this.text});break}case"End":{e.preventDefault(),this.internal_keyboard_reorder_move.emit({delta:1/0,column:this.text});break}case"Escape":e.preventDefault(),this.setReorderMode(!1)}}async componentWillLoad(){this.i18n=await u(this.root,m)}render(){return t(d,{key:"4487420b72951f120cc5b3058f908f2e30a15266",draggable:"true",onMouseUp:e=>this.onMouseUp(e)},t("div",{key:"fab6ad42b76eb43bc42d8bc56c01a3773a5260c8",class:{"gux-container":!0,[`gux-drop-${this.pendingReorder}`]:!0,"gux-dragging":this.isDragging,"gux-parent-reordering":this.isParentReordering}},t("button",{key:"090afd5a47b19cdd6245e3470194001b78bc2bf8",class:{"gux-reorder":!0,"gux-reordering":this.isReordering},type:"button",onClick:()=>this.toggleReorderMode(),onMouseDown:()=>this.onMouseDown(),onKeyDown:e=>this.keyboardReorder(e),ref:e=>this.reorderButtonElement=e},t("gux-icon",{key:"2d179df883af06e483c24807a235370efb430780","icon-name":"fa/grip-vertical-solid",decorative:!0,size:"small"}),t("span",{key:"c9fafc182d1c9ffc462b472392339c71e8621217",class:"gux-sr-only"},this.i18n("activateReordering",{columnName:this.text}))),t("div",{key:"406063db65c7126b1e1ed66ba49d5691f32a5db4",class:"gux-select"},t("slot",{key:"b16e6fc9ba12667de13c731024402e2f52253f26",onSlotchange:()=>this.onSlotChange()}),t("gux-text-highlight",{key:"4d3286c479ca62ff984be682db8a108717a02bc3",highlight:this.highlight,text:this.text,strategy:"contains",dimmed:!this.highlightActive}))))}get root(){return l(this)}};b.style=h;export{b as gux_column_manager_item};
