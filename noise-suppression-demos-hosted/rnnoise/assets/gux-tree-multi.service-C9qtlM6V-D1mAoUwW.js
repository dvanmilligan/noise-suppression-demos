import{f as A}from"./index-RhTaIPoL.js";import{w as v}from"./when-event-is-from-kLXvN2m9-B4cyA2sH.js";function g(e){return e.closest("gux-tree-multi-beta")}function f(e){return["GUX-LEAF-MULTI","GUX-BRANCH-MULTI"].includes(e.tagName)}function r(e){return e.tagName==="GUX-BRANCH-MULTI"}function b(e){return e.tagName==="GUX-LEAF-MULTI"}function x(e){return e.tagName==="GUX-BRANCH-MULTI"?e.expanded:!1}function h(e){return!!s(e)}function c(e){const t=[];function n(a){for(const i of Array.from(a.children))f(i)&&t.push(i),r(i)&&n(i)}return n(e),t}function T(e){const t=[];function n(a){for(const i of Array.from(a.children))b(i)&&t.push(i),r(i)&&n(i)}return n(e),t}function u(e){const t=[];function n(a){for(const i of Array.from(a.children))f(i)&&t.push(i),x(i)&&n(i)}return n(e),t}function d(e){return u(e).filter(n=>!n.disabled&&!n.filtered)}function s(e){return u(e).find(t=>t.active)}function E(e){return u(e).find(t=>t.selected&&!t.disabled&&!t.filtered)}function l(e){return d(e)[0]}function N(e){const t=d(e);return t[t.length-1]}function L(e){if(h(e)&&s(e)!==N(e)){const t=d(e),n=s(e),a=t.indexOf(n);return t[a+1]}return l(e)}function I(e){if(h(e)){const t=d(e),n=t.indexOf(s(e));return s(e)===l(e)?N(e):t[n-1]}return l(e)}function o(e,t){if(e.disabled){U(e);return}t&&(u(e).forEach(n=>{const a=!n.disabled&&!n.filtered&&n===t;n.active=a,a&&e.setAttribute("aria-activedescendant",n.id)}),t.scrollIntoView({block:"nearest"}))}function U(e){c(e).forEach(t=>{t.active=!1}),e.removeAttribute("aria-activedescendant")}function S(e){let t=e.parentElement.closest("gux-branch-multi");for(;t;)t.expanded=!0,t=t.parentElement.closest("gux-branch-multi")}function m(e){const t=T(e),n=t.filter(a=>a.selected);n.length===0?(e.selected=!1,e.indeterminate=!1):n.length===t.length?(e.selected=!0,e.indeterminate=!1):(e.selected=!1,e.indeterminate=!0)}function p(e,t){for(const n of Array.from(e.children)){if(f(n)){const a=n;!a.disabled&&!a.filtered&&(a.selected=t,a.indeterminate=!1)}r(n)&&p(n,t)}}function B(e){let t=e.parentElement.closest("gux-branch-multi");for(;t;)m(t),t=t.parentElement.closest("gux-branch-multi")}function w(e){const t=c(e).filter(n=>n.selected&&n.value);e.value=t.map(n=>n.value).join(",")}function G(e){o(e,E(e)||l(e))}function M(e){o(e,l(e))}function V(e){o(e,N(e))}function X(e){o(e,L(e))}function k(e){o(e,I(e))}function H(e){const n=s(e).parentElement.closest("gux-branch-multi");o(e,n)}function O(e,t){const n=s(e),a=d(e).filter(i=>n.contains(i));a[0]&&o(e,a[0])}function R(e){return c(e).some(t=>t.selected)}function j(e){let t=e.parentElement.closest("gux-branch-multi, gux-tree-multi-beta, fieldset");for(;t;){if(t.disabled)return!0;t=t.parentElement.closest("gux-branch-multi, gux-tree-multi-beta, fieldset")}return!1}function z(e){c(e).forEach(t=>{A(t)})}function D(e,t){const n=!t.selected;t.selected=n,t.indeterminate=!1,r(t)&&p(t,n),B(t),w(e),t.scrollIntoView({block:"nearest"})}function y(e,t){const n=t.split(",").map(i=>i.trim()),a=c(e);a.forEach(i=>{i.selected=n.includes(i.value),i.indeterminate=!1}),a.filter(i=>r(i)).forEach(i=>{m(i)})}function _(e,t){y(e,t),F(e)}function F(e){c(e).forEach(n=>{n.selected&&S(n)})}function q(e){var t;return(t=g(e))===null||t===void 0?void 0:t.size}function J(e){var t;return(t=g(e))===null||t===void 0?void 0:t.alignment}function K({event:e,onLeaf:t,onBranch:n}){let a=!1;v("gux-leaf-multi",e,i=>{i.value&&(t(i),a=!0)}),a||v("gux-branch-multi",e,i=>{n(i)})}export{J as a,R as b,U as c,G as d,K as e,z as f,q as g,j as h,V as i,M as j,k,X as l,_ as m,H as n,O as o,y as s,D as t};
