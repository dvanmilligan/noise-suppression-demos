import{r as g,h as s,g as m}from"./index-RhTaIPoL.js";import{q as n}from"./index.esm-ByC1Z2e8-B8jVxzKx.js";import{a as D}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{s as f}from"./simulate-native-event-BMRf5pjV-BcLDngo1.js";import{g as b,a as x,b as v}from"./index-Bbwiw1Rf-CzeU2kBB.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./_commonjsHelpers-BFTU3MAI-NT8qMgGI.js";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";function y(e){return n.PlainDate.from({day:1,month:e.month,year:e.year})}function p(e,t){const a=[],i=new Date(1970,0,4);for(let l=0;l<7;l++){const u=i.toLocaleString(e,{weekday:"narrow"});a.push(u),i.setDate(i.getDate()+1)}return M(a,t)}function c(e,t){return e.toLocaleString(t,{calendar:"gregory",year:"numeric",month:"long"})}function k(e,t){let a=t-e.dayOfWeek;return a>0&&(a=a-7),e.add({days:a})}function o(e){return e?n.PlainDate.from(e):null}function M(e,t){const a=t%e.length;return e.concat(e.splice(0,a))}const F="Previous month: {localizedPreviousMonthAndYear}",w="Next month: {localizedNextMonthAndYear}";var C={previousMonth:F,nextMonth:w};const O=":host{display:inline-block}.gux-calendar-beta{box-sizing:border-box;display:inline-flex;flex-direction:column;font-family:var(--gse-ui-calendarMenu-month-defaultText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-defaultText-fontSize);background:var(--gse-ui-calendarMenu-backgroundColor);border-radius:8px;box-shadow:var(--gse-ui-calendarMenu-boxShadow)}.gux-calendar-beta.gux-disabled{pointer-events:none;opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar-beta .gux-header{display:flex;align-items:center;justify-content:center;block-size:var(--gse-ui-calendarMenu-month-single-header-height);padding:var(--gse-ui-calendarMenu-header-padding);font-style:normal;font-weight:var(--gse-ui-calendarMenu-month-currentText-fontWeight);color:var(--gse-ui-calendarMenu-header-foregroundColor);text-align:center;background-color:var(--gse-ui-calendarMenu-header-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-header-borderRadius)}.gux-calendar-beta .gux-header .gux-header-month-and-year{flex:1 1 auto;inline-size:var(--gse-ui-calendarMenu-month-single-header-textWidth);font-family:var(--gse-ui-calendarMenu-month-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-headerText-fontSize);line-height:var(--gse-ui-calendarMenu-month-headerText-lineHeight);color:var(--gse-ui-calendarMenu-month-selected-foregroundColor)}.gux-calendar-beta .gux-header .gux-left,.gux-calendar-beta .gux-header .gux-right{block-size:100%;color:var(--gse-ui-calendarMenu-header-foregroundColor);cursor:pointer;outline:none;background:none;border:none}.gux-calendar-beta .gux-header .gux-left:focus-visible,.gux-calendar-beta .gux-header .gux-right:focus-visible{outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset)}.gux-calendar-beta .gux-content{display:flex;flex-direction:column;gap:var(--gse-ui-calendarMenu-dateBody-gap);padding:var(--gse-ui-calendarMenu-dateBody-padding);color:var(--gse-ui-calendarMenu-date-default-foregroundColor);background-color:var(--gse-ui-calendarMenu-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius)}.gux-calendar-beta .gux-week-days{font-family:var(--gse-ui-calendarMenu-day-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-day-headerText-fontSize);font-weight:var(--gse-ui-calendarMenu-day-headerText-fontWeight);color:var(--gse-ui-calendarMenu-month-default-foregroundColor);text-align:center}.gux-calendar-beta .gux-week-days .gux-week-day{display:inline-block;inline-size:var(--gse-ui-calendarMenu-day-range-height);block-size:var(--gse-ui-calendarMenu-day-range-width)}",z=class{constructor(e){g(this,e),e.$hostElement$["s-ei"]?this.internals=e.$hostElement$["s-ei"]:(this.internals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.internals),this.locale="en",this.MONTH_DATE_COUNT=42,this.defaultValue=void 0,this.disabled=!1,this.readonly=!1,this.formDisabled=!1,this.focusDate=n.Now.plainDateISO()}onValueChange(e,t){var a;this.isInvalidDate(e)||(!((a=this.internals)===null||a===void 0)&&a.setFormValue&&this.internals.setFormValue(e),this.focusDate=o(e)||n.Now.plainDateISO(),this.focusOnFocusDate(),f(this.root,"input"),t!==e&&f(this.root,"change"))}formAssociatedCallback(e){console.info("Form associated:",e)}formDisabledCallback(e){this.formDisabled=e}formResetCallback(){this.value=this.defaultValue}formStateRestoreCallback(e){this.value=e}connectedCallback(){this.defaultValue=this.value}async componentWillLoad(){var e;this.locale=b(this.root),this.startDayOfWeek=this.startDayOfWeek||x(this.locale),this.i18n=await v(this.root,C),!((e=this.internals)===null||e===void 0)&&e.setFormValue&&this.internals.setFormValue(this.value);const t=o(this.value);t&&(this.focusDate=t)}onDayKeyDown(e){switch(e.key){case"ArrowDown":e.preventDefault(),this.shiftFocusDate({weeks:1}),this.focusOnFocusDate();break;case"ArrowUp":e.preventDefault(),this.shiftFocusDate({weeks:-1}),this.focusOnFocusDate();break;case"ArrowLeft":e.preventDefault(),this.shiftFocusDate({days:-1}),this.focusOnFocusDate();break;case"ArrowRight":e.preventDefault(),this.shiftFocusDate({days:1}),this.focusOnFocusDate();break;case"PageUp":e.preventDefault(),this.shiftFocusDate({months:1}),this.focusOnFocusDate();break;case"PageDown":e.preventDefault(),this.shiftFocusDate({months:-1}),this.focusOnFocusDate();break}}onDayClick(e){if(e.target.tagName==="GUX-DAY-BETA"){if(this.readonly)return;const t=e.target;this.value=t.day,e.stopPropagation()}}getGuxDayForDate(e){return this.root.shadowRoot.querySelector(`.day-${e}`)}shiftFocusDate(e){if(this.readonly)return;const t=n.Duration.from(e);let a=this.focusDate.add(t);this.min&&n.PlainDate.compare(a,o(this.min))==-1?a=o(this.min):this.max&&n.PlainDate.compare(a,o(this.max))==1&&(a=o(this.max)),this.focusDate=a}focusOnFocusDate(){D(()=>{const e=this.focusDate.toString(),t=this.getGuxDayForDate(e);t&&t.focus()})}isInvalidDate(e){return this.min&&n.PlainDate.compare(e,this.min)==-1||this.max&&n.PlainDate.compare(e,this.max)==1}getMonthDays(){const e=n.Now.plainDateISO(),t=y(this.focusDate),a=[];let i={dates:[]},l=0;const u=t.month,d=o(this.value);let r=k(t,this.startDayOfWeek);for(let h=0;h<this.MONTH_DATE_COUNT+1;h+=1)l>0&&l%7===0&&(a.push(i),i={dates:[]}),i.dates.push({date:n.PlainDate.from(r),disabled:this.isInvalidDate(r),inCurrentMonth:u===r.month,selected:d==null?void 0:d.equals(r),focused:this.focusDate.equals(r),isCurrentDate:r.equals(e)}),l+=1,r=r.add({days:1});return a}isFocusableDay(e){return(e.selected||e.focused)&&!this.disabled}renderPreviousButton(){return this.readonly?null:s("button",{type:"button",class:"gux-left",disabled:this.disabled||this.formDisabled,"aria-label":this.i18n("previousMonth",{localizedPreviousMonthAndYear:c(this.focusDate.add({months:-1}),this.locale)}),onClick:()=>this.shiftFocusDate({months:-1})},s("gux-icon",{size:"small",decorative:!0,"icon-name":"custom/chevron-left-small-regular"}))}renderNextButton(){return this.readonly?null:s("button",{type:"button",class:"gux-right",disabled:this.disabled||this.formDisabled||this.readonly,"aria-label":this.i18n("nextMonth",{localizedNextMonthAndYear:c(this.focusDate.add({months:1}),this.locale)}),onClick:()=>this.shiftFocusDate({months:1})},s("gux-icon",{size:"small",decorative:!0,"icon-name":"custom/chevron-right-small-regular"}))}renderHeader(){return s("div",{class:"gux-header"},this.renderPreviousButton(),s("div",{class:"gux-header-month-and-year"},c(this.focusDate,this.locale)),this.renderNextButton())}renderContent(){return s("div",{onKeyDown:e=>void this.onDayKeyDown(e),onClick:e=>void this.onDayClick(e)},s("div",{class:"gux-content"},s("div",{class:"gux-week-days"},p(this.locale,this.startDayOfWeek).map(e=>s("div",{class:"gux-week-day"},e))),s("div",null,this.getMonthDays().map(e=>s("div",{class:"gux-content-week"},e.dates.map(t=>{const a=t.date.toString();return s("gux-day-beta",{day:a,"aria-current":t.selected?"true":"false","aria-disabled":!t.inCurrentMonth||t.disabled||this.disabled?"true":"false",disabled:!!t.disabled,tabindex:this.isFocusableDay(t)?"2":"-1",class:`
                            ${!t.inCurrentMonth||t.disabled?"gux-muted":""}
                            day-${a}
                          `})}))))))}render(){return s("div",{key:"9f7825917f58515282d02c19b75b4e53f55aaccf",class:{"gux-calendar-beta":!0,"gux-disabled":this.disabled||this.formDisabled},"aria-disabled":this.disabled||this.formDisabled?"true":"false"},this.renderHeader(),this.renderContent())}static get delegatesFocus(){return!0}static get formAssociated(){return!0}get root(){return m(this)}static get watchers(){return{value:["onValueChange"]}}};z.style=O;export{z as gux_calendar_beta};
