import{r as l,h as t,H as c,g as d}from"./index-RhTaIPoL.js";import{t as h}from"./usage-BYFiy2rf-lhiVWKSr.js";import{g as p}from"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import{b as g}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as m}from"./en-DN3YAdAX-COCuuOUE.js";import{O as v}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{b}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{w as x}from"./when-event-is-from-kLXvN2m9-B4cyA2sH.js";import{h as y}from"./gux-rich-text-editor.service-EOVBuDBp-DfE0JhkK.js";import{r as k}from"./random-html-id-D9jKBqIb-D30kRngR.js";import{a as w,c as L,o as E,f as C,s as O}from"./floating-ui.dom-s4o__4X6-DwnQVfa1.js";import{n as I,p as z}from"./gux-list.service-BebXX5IS-BBJPvxFI.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-DCZG2J0G-kuMVup89.js";const S=":host{inline-size:100%;text-align:start;outline:none}:host([disabled]){pointer-events:none}:host([disabled=false]){pointer-events:auto}::slotted(gux-icon){inline-size:var(--gse-ui-menu-option-startIcon-height);block-size:var(--gse-ui-menu-option-startIcon-height);margin-inline-end:var(--gse-ui-menu-option-gap);vertical-align:middle}button{all:unset;box-sizing:border-box;inline-size:100%;min-block-size:var(--gse-ui-menu-option-height);padding:var(--gse-ui-menu-option-padding);font-family:var(--gse-ui-menu-option-label-default-text-fontFamily);font-size:var(--gse-ui-menu-option-label-default-text-fontSize);font-weight:var(--gse-ui-menu-option-label-default-text-fontWeight);line-height:var(--gse-ui-menu-option-label-default-text-lineHeight);color:var(--gse-ui-menu-option-label-foregroundColor);overflow-wrap:break-word;cursor:pointer;outline:none;outline-offset:calc(var(--gse-ui-menu-option-focus-border-width) * -1) !important;background-color:var(--gse-ui-menu-option-default-backgroundColor);border:none}button:focus-visible:not(:disabled){outline:var(--gse-ui-menu-option-focus-border-width) var(--gse-ui-menu-option-focus-border-style) var(--gse-ui-menu-option-focus-border-color);border-radius:var(--gse-semantic-focusOutline-sm-borderRadius)}button:hover:not(:disabled){background:var(--gse-ui-menu-option-hover-backgroundColor)}button:active:not(:disabled){font-family:var(--gse-ui-menu-option-label-active-text-fontFamily);font-size:var(--gse-ui-menu-option-label-active-text-fontSize);font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);line-height:var(--gse-ui-menu-option-label-active-text-lineHeight);background:var(--gse-ui-menu-option-selected-backgroundColor)}button:disabled{cursor:default;opacity:var(--gse-ui-menu-option-disabled-opacity)}::slotted(*){margin:0}",P=class{constructor(e){l(this,e),this.disabled=!1}onMouseUp(){this.focusParentList()}onMouseOver(){this.focusParentList()}focusParentList(){const e=p("gux-rich-text-editor-list",this.root);e&&e.shadowRoot.activeElement===null&&(this.root.blur(),e.focus({preventScroll:!0}))}componentWillLoad(){h(this.root)}render(){return t(c,{key:"3c7b78997a8283c1d14e2a274d5e2f5be5873544",role:"listitem"},t("button",{key:"fed5099d1c5a7ee45fa375277418ca287d559e90",type:"button",tabIndex:-1,disabled:this.disabled},t("gux-truncate",{key:"292ae00fa4bd7549d2a92c479095c17a8520af0c","max-lines":1},t("slot",{key:"0ad58dc4894aa5da4956d07aa55268892bb0c1e3"}))))}static get delegatesFocus(){return!0}get root(){return d(this)}};P.style=S;const F=":host{display:block;max-inline-size:fit-content;white-space:normal}button{block-size:var(--gse-ui-button-default-height);padding:var(--gse-ui-button-default-paddingIconOnly);border-radius:var(--gse-ui-button-borderRadius)}.gux-list-container{inline-size:var(--gse-ui-contextMenu-menu-width);max-block-size:var(--gse-ui-contextMenu-menu-maxHeight);margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow)}";var R=function(e,i,o,n){var a=arguments.length,s=a<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,o):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,i,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(s=(a<3?r(s):a>3?r(i,o,s):r(i,o))||s);return a>3&&s&&Object.defineProperty(i,o,s),s};const f=class{constructor(e){l(this,e),this.buttonId=k("gux-rich-text-editor-menu"),this.isOpen=!1}onClickOutside(){this.isOpen=!1}handleKeyDown(e){const i=e.composedPath().includes(this.listElement),o=e.composedPath().includes(this.button);switch(e.key){case"Escape":{i&&(e.preventDefault(),this.isOpen=!1,this.button.focus());break}case"Tab":{this.isOpen=!1;break}case"ArrowDown":case"Enter":{o&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}case"ArrowUp":{o&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusLastListItem());break}}}handleKeyup(e){switch(e.key){case" ":{e.composedPath().includes(this.button)&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}}}focusFirstListItem(){b(()=>{this.listElement.guxFocusFirstItem()})}focusLastListItem(){b(()=>{this.listElement.guxFocusLastItem()})}onActionClick(){this.isOpen=!this.isOpen,this.isOpen&&this.focusFirstListItem()}onListClick(e){x("gux-rich-style-list-item",e,()=>{this.isOpen=!1,this.button.focus()})}renderTooltip(){return t("gux-tooltip-beta",{for:this.buttonId},t("div",{slot:"content"},this.i18n("additionalActions")))}async componentWillLoad(){h(this.root),this.i18n=await g(this.root,m)}render(){return t(c,{key:"9e141400a6984ddc2d12423bf06eee51199ce894"},t("gux-popup",{key:"98ea3c9d3ec7ab07016da1000bdaf7a69a6f9c84",expanded:this.isOpen,offset:4,"exceed-target-width":!0},t("div",{key:"ed62636f8f1dccaacb6c31a336c5582d8adc7f56",slot:"target"},t("gux-button-slot",{key:"be559003fbfa2c62cd8a77cc3c27dedafa5f72df",accent:"ghost"},t("button",{key:"9e4f180477be98a2c252d3bc96ae9f8f1808e8fa",id:this.buttonId,type:"button",onClick:()=>this.onActionClick(),ref:e=>this.button=e,"aria-haspopup":"true","aria-expanded":this.isOpen.toString(),disabled:y(this.root)},t("gux-icon",{key:"103364cb455ef5c948769dee4f8bf3d72dacef9c","icon-name":"fa/ellipsis-vertical-regular",decorative:!0,size:"small"}),t("gux-screen-reader-beta",{key:"f32f20af9dcc7d740be6cf3bf0b26f1936232c74"},this.i18n("additionalActions")))),this.renderTooltip()),t("div",{key:"ec81bc91d4b394599a9e03db2655d79364097e54",slot:"popup",class:"gux-list-container"},t("gux-rich-text-editor-list",{key:"844d82b3668a980245b36019cc699c7c0ecb05e0",onClick:e=>this.onListClick(e),ref:e=>this.listElement=e},t("slot",{key:"37c9a84bf6b44675a6bc986dec6de5dc0dd279dc"})))))}static get delegatesFocus(){return!0}get root(){return d(this)}};R([v({triggerEvents:"click"})],f.prototype,"onClickOutside",null);f.style=F;const U=":host{inline-size:100%;text-align:start;outline:none}:host([disabled]){pointer-events:none}:host([disabled=false]){pointer-events:auto}::slotted(gux-icon){inline-size:var(--gse-ui-menu-option-startIcon-height);block-size:var(--gse-ui-menu-option-startIcon-height);margin-inline-end:var(--gse-ui-menu-option-gap);vertical-align:middle}button{all:unset;box-sizing:border-box;inline-size:100%;min-block-size:var(--gse-ui-menu-option-height);padding:var(--gse-ui-menu-option-padding);font-family:var(--gse-ui-menu-option-label-default-text-fontFamily);font-size:var(--gse-ui-menu-option-label-default-text-fontSize);font-weight:var(--gse-ui-menu-option-label-default-text-fontWeight);line-height:var(--gse-ui-menu-option-label-default-text-lineHeight);color:var(--gse-ui-menu-option-label-foregroundColor);overflow-wrap:break-word;cursor:pointer;outline:none;outline-offset:calc(var(--gse-ui-menu-option-focus-border-width) * -1) !important;background-color:var(--gse-ui-menu-option-default-backgroundColor);border:none}button:focus-visible:not(:disabled){outline:var(--gse-ui-menu-option-focus-border-width) var(--gse-ui-menu-option-focus-border-style) var(--gse-ui-menu-option-focus-border-color);border-radius:var(--gse-semantic-focusOutline-sm-borderRadius)}button:hover:not(:disabled){background:var(--gse-ui-menu-option-hover-backgroundColor)}button:active:not(:disabled){font-family:var(--gse-ui-menu-option-label-active-text-fontFamily);font-size:var(--gse-ui-menu-option-label-active-text-fontSize);font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);line-height:var(--gse-ui-menu-option-label-active-text-lineHeight);background:var(--gse-ui-menu-option-selected-backgroundColor)}button:disabled{cursor:default;opacity:var(--gse-ui-menu-option-disabled-opacity)}::slotted(*){margin:0}button.gux-sub-list-button{display:flex;flex-direction:row;align-items:center;justify-content:space-between}button gux-icon{align-self:center;color:var(--gse-ui-menu-option-parentIcon-selected-foregroundColor)}.gux-sub-list-wrapper{position:fixed;inset-block-start:0;inset-inline-start:0;display:none;flex-direction:column;inline-size:130px;padding:var(--gse-ui-menu-padding);margin:0;background-color:var(--gse-ui-menu-backgroundColor);border:none;border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow);opacity:0}.gux-sub-list-wrapper.gux-shown{display:flex;animation-name:fade-in;animation-duration:100ms;animation-delay:350ms;animation-fill-mode:forwards}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}",T=class{constructor(e){l(this,e),this.disabled=!1,this.isShown=!1}onKeydown(e){switch(e.key){case"Enter":e.stopPropagation(),this.focusOnSubList();break;case"ArrowUp":this.root!==e.target&&(e.preventDefault(),e.stopPropagation(),z(this.root,["gux-rich-style-list-item"]));break;case"ArrowDown":this.root!==e.target&&(e.preventDefault(),e.stopPropagation(),I(this.root,["gux-rich-style-list-item"]));break;case"ArrowRight":e.stopPropagation(),this.show(),this.focusOnSubList();break;case"ArrowLeft":case"Escape":this.root!==e.target&&e.stopPropagation(),this.buttonElement.focus();break}}onMouseEnter(){this.show()}onMouseLeave(){this.hide()}onClick(e){if(e.target.nodeName==="GUX-RICH-STYLE-LIST-ITEM"){this.hide();return}}onFocusIn(){this.show()}onFocusOut(){this.hide()}componentDidLoad(){this.isShown&&this.runUpdatePosition()}componentDidUpdate(){this.isShown?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}focusOnSubList(){if(this.subListContentElement.contains(document.activeElement))return;Array.from(this.root.children)[0].focus()}show(){clearTimeout(this.hideTimeout),this.isShown=!0}hide(){this.isShown&&(this.hideTimeout=setTimeout(()=>{this.isShown=!1},350))}runUpdatePosition(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition(),this.root.isConnected?this.cleanupUpdatePosition=w(this.buttonElement,this.subListElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){this.subListElement&&L(this.buttonElement,this.subListElement,{placement:"right-start",strategy:"fixed",middleware:[E(4),C(),O()]}).then(({x:e,y:i})=>{Object.assign(this.subListElement.style,{left:`${e}px`,top:`${i}px`})})}render(){return t(c,{key:"e717e12e759430610bf6734241614de0b5745a00"},t("button",{key:"7896cc42d7ca9100a42c2e2d8f568b6d4ddf4c35",type:"button",class:{"gux-sub-list-button":!0,"gux-sub-list-button-active":this.isShown},tabIndex:-1,role:"listitem",ref:e=>this.buttonElement=e,"aria-haspopup":"true","aria-expanded":this.isShown.toString(),disabled:this.disabled},t("span",{key:"123346cfcf7d49dfddd5028ae840c32f3024197e",class:"gux-sub-list-button-text"},this.label),t("gux-icon",{key:"bf4cbfa92fc7d4ff1aba8bfcc737ef089db00151",size:"small","icon-name":"custom/chevron-right-small-regular",decorative:!0})),t("div",{key:"e621d5ec5519c4f676ec0b76de9ede3b1933317c",ref:e=>this.subListElement=e,class:{"gux-sub-list-wrapper":!0,"gux-shown":this.isShown}},t("div",{key:"a66ee708e646ede6d08b463c9f0078e13d91eca4",role:"list",class:"gux-sub-list-content",ref:e=>this.subListContentElement=e},t("slot",{key:"1a67f6d6147c09133a1d81b9e6f61f075eb93149"}))))}static get delegatesFocus(){return!0}get root(){return d(this)}};T.style=U;export{P as gux_rich_style_list_item,f as gux_rich_text_editor_menu,T as gux_rich_text_editor_sub_list};
