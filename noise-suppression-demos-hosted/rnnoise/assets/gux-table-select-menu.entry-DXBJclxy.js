import{r as i,h as t,H as n,g as r}from"./index-RhTaIPoL.js";import{a as u}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{e as o}from"./event-is-from-C6ZfOd6U-BUOfvQpd.js";import{r as l}from"./random-html-id-D9jKBqIb-D30kRngR.js";import{b as a}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as d}from"./en-BIx814vt-Djb_tyvG.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const p="gux-table-select-menu{display:inline-flex;font-family:var(--gse-ui-popover-body-text-fontFamily);font-size:var(--gse-ui-popover-body-text-fontSize);font-weight:var(--gse-ui-popover-body-text-fontWeight);line-height:var(--gse-ui-popover-body-text-lineHeight)}gux-table-select-menu .gux-select-menu-button{padding:0;margin-inline-start:var(--gse-ui-dataTableItems-header-gap);color:var(--gse-ui-dataTableItems-cell-chevron-foregroundColor);outline:none;background-color:inherit;border:none}gux-table-select-menu .gux-select-menu-button:focus-visible{outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset);border-radius:4px}",c=class{constructor(e){i(this,e),this.dropdownOptionsButtonId=l("gux-table-select-menu"),this.hasSelectMenuOptions=!1,this.dropdownDisabled=!1,this.popoverHidden=!0}focusFirstItemInPopupList(){const e=this.root.querySelector("gux-list");u(()=>{e==null||e.guxFocusFirstItem()})}async componentWillLoad(){this.hasSelectMenuOptions=!!this.root.querySelector('[slot="select-menu-options"]'),this.i18n=await a(this.root,d,"gux-table")}onKeydown(e){var s;switch(e.key){case"ArrowDown":o(".gux-select-menu-button",e)&&(this.toggleOptions(),this.focusFirstItemInPopupList());break;case"Enter":o(".gux-select-menu-button",e)&&this.focusFirstItemInPopupList();break;case"Escape":o("gux-list",e)&&(e.stopPropagation(),this.popoverHidden=!0,(s=this.tableSelectMenuButtonElement)===null||s===void 0||s.focus());break;case"Tab":this.popoverHidden=!0;break}}onKeyup(e){switch(e.key){case" ":o(".gux-select-menu-button",e)&&this.focusFirstItemInPopupList()}}toggleOptions(){this.popoverHidden=!this.popoverHidden}renderSelectDropdown(){if(this.hasSelectMenuOptions)return[t("button",{id:this.dropdownOptionsButtonId,"aria-haspopup":"listbox","aria-expanded":(!this.popoverHidden).toString(),type:"button",class:"gux-select-menu-button",ref:e=>this.tableSelectMenuButtonElement=e,onClick:()=>this.toggleOptions(),disabled:this.dropdownDisabled},t("gux-icon",{"icon-name":"custom/chevron-down-small-regular","screenreader-text":this.i18n("tableOptions"),size:"small"})),t("gux-popover-list",{for:this.dropdownOptionsButtonId,isOpen:!this.popoverHidden,closeOnClickOutside:!0,onGuxdismiss:()=>this.popoverHidden=!0},t("div",null,t("slot",{name:"select-menu-options"})))]}render(){return t(n,{key:"637dd36876fc27338775b9a81af53e8bbc5ac520"},t("slot",{key:"2b6ec25908bb110667187d5038be4f8d9d763882"}),this.renderSelectDropdown())}get root(){return r(this)}};c.style=p;export{c as gux_table_select_menu};
