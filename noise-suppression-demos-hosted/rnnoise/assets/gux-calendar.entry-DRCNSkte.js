import{r as C,c as E,h as s,g as R}from"./index-RhTaIPoL.js";import{a as u}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{a as c,c as m,b as w,f as g}from"./iso-dates-BFybQmZw-sl_E9tb6.js";import{t as z}from"./usage-BYFiy2rf-lhiVWKSr.js";import{b as A,g as S,c as O}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{c as y}from"./capitalize-first-letter-Cf6_BoFM-DDlMtXXu.js";import{d as F}from"./spark-intl-CJJbLxeY-BrpETJ5c.js";import{u as P}from"./use-regional-dates-BgaA4g76-C5bTvd2o.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./get-closest-element-DCZG2J0G-kuMVup89.js";function W(e,t){T(e,"add",t)}function M(e,t){T(e,"remove",t)}function T(e=[],t,a){const n=[].concat(e);for(const r of n)r.classList[t](a)}const B="Go to the previous month",H="Go to the next month";var I={previousMonth:B,nextMonth:H};function L(e,t,a){const n=new Date(t,e,1,1,0,0,0),r=n.getDay(),i=-1*(a-r-7)%7;return new Date(n.getTime()-i*(86400*1e3))}function Y(e,t){const a=[],n=new Date(1970,0,4);for(let r=0;r<7;r++){const i=n.toLocaleString(e,{weekday:"narrow"});a.push(i),n.setDate(n.getDate()+1)}return q(a,t)}function q(e,t){const a=t>e.length?t%e.length:t;return e.concat(e.splice(0,a))}function j(e,t){const a=new Date(e);return a.setDate(1),a.setMonth(a.getMonth()+t),a}function k(e,t){return P()?y(F(t,{year:"numeric",month:"long"}).format(e)):y(e.toLocaleDateString(t,{calendar:"gregory",year:"numeric",month:"long"}))}const G=":host{display:inline-block}.gux-calendar{margin-block-start:2px;border-radius:8px;box-shadow:var(--gse-ui-calendarMenu-boxShadow)}.gux-calendar .gux-header{display:flex;align-items:center;justify-content:space-between;block-size:var(--gse-ui-calendarMenu-month-single-header-height);padding:var(--gse-ui-calendarMenu-header-padding);font-style:normal;font-weight:var(--gse-ui-calendarMenu-month-currentText-fontWeight);color:var(--gse-ui-calendarMenu-header-foregroundColor);text-align:center;background-color:var(--gse-ui-calendarMenu-header-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-header-borderRadius)}.gux-calendar .gux-header .gux-header-month-and-year{inline-size:var(--gse-ui-calendarMenu-month-single-header-textWidth);font-family:var(--gse-ui-calendarMenu-month-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-headerText-fontSize);line-height:var(--gse-ui-calendarMenu-month-headerText-lineHeight);color:var(--gse-ui-calendarMenu-month-selected-foregroundColor)}.gux-calendar .gux-header .gux-left,.gux-calendar .gux-header .gux-right{block-size:100%;color:var(--gse-ui-calendarMenu-header-foregroundColor);cursor:pointer;outline:none;background:none;border:none}.gux-calendar .gux-header .gux-left:focus-visible,.gux-calendar .gux-header .gux-right:focus-visible{outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset)}.gux-calendar .gux-header .gux-month-list{display:flex;justify-content:space-between;inline-size:100%;font-family:var(--gse-ui-calendarMenu-month-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-headerText-fontSize);line-height:var(--gse-ui-calendarMenu-month-headerText-lineHeight)}.gux-calendar .gux-header .gux-month-list label{inline-size:100%;text-align:center}.gux-calendar .gux-content{display:flex;align-items:flex-start;block-size:var(--gse-ui-calendarMenu-height);padding:var(--gse-ui-calendarMenu-dateBody-padding);color:var(--gse-ui-calendarMenu-month-default-foregroundColor);background-color:var(--gse-ui-calendarMenu-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius)}.gux-calendar .gux-content table{inline-size:var(--gse-ui-calendarMenu-day-input-width);text-align:start;-ms-user-select:none;user-select:none;table-layout:fixed;border-spacing:0}.gux-calendar .gux-content table:not(:last-child){padding-inline-end:24px}.gux-calendar .gux-content table tr{block-size:var(--gse-ui-calendarMenu-day-input-height)}.gux-calendar .gux-content table tr:empty{display:none}.gux-calendar .gux-content table tr th,.gux-calendar .gux-content table tr td{inline-size:var(--gse-ui-calendarMenu-day-date-size);block-size:var(--gse-ui-calendarMenu-day-date-size);padding:0;margin:0;text-align:center}.gux-calendar .gux-content table tr th{font-family:var(--gse-ui-calendarMenu-day-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-day-headerText-fontSize);font-weight:var(--gse-ui-calendarMenu-day-headerText-fontWeight);line-height:var(--gse-ui-calendarMenu-day-headerText-lineHeight)}.gux-calendar .gux-content table tr td{font-family:var(--gse-ui-calendarMenu-date-defaultText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-defaultText-fontSize);font-weight:var(--gse-ui-calendarMenu-date-defaultText-fontWeight);line-height:var(--gse-ui-calendarMenu-date-defaultText-lineHeight);color:var(--gse-ui-calendarMenu-date-default-foregroundColor);cursor:pointer}.gux-calendar .gux-content table tr td.gux-hovered{background-color:var(--gse-ui-calendarMenu-date-range-backgroundColor)}.gux-calendar .gux-content table tr td.gux-selected{color:var(--gse-ui-calendarMenu-date-selected-foregroundColor);background-color:var(--gse-ui-calendarMenu-date-selected-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-selected:hover:not(.gux-calendar .gux-content table tr td.gux-selected.gux-start-date):not(.gux-calendar .gux-content table tr td.gux-selected.gux-end-date){background-color:var(--gse-ui-calendarMenu-date-selected-hoverBackgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date,.gux-calendar .gux-content table tr td.gux-end-date{background-color:var(--gse-ui-calendarMenu-date-range-backgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date .gux-date,.gux-calendar .gux-content table tr td.gux-end-date .gux-date{display:flex;align-items:center;justify-content:center;inline-size:var(--gse-ui-calendarMenu-day-date-size);block-size:var(--gse-ui-calendarMenu-day-date-size);background-color:var(--gse-ui-calendarMenu-date-selected-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-start-date .gux-date:hover,.gux-calendar .gux-content table tr td.gux-end-date .gux-date:hover{background-color:var(--gse-ui-calendarMenu-date-selected-hoverBackgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date{border-radius:var(--gse-ui-calendarMenu-range-date-startDate-borderRadius)}.gux-calendar .gux-content table tr td.gux-end-date{border-radius:var(--gse-ui-calendarMenu-range-date-endDate-borderRadius)}.gux-calendar .gux-content table tr td:hover:not(.gux-calendar .gux-content table tr td.gux-start-date):not(.gux-calendar .gux-content table tr td.gux-end-date):not(.gux-calendar .gux-content table tr td.gux-hovered):not(.gux-calendar .gux-content table tr td.gux-selected){background-color:var(--gse-ui-calendarMenu-date-hover-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-disabled{pointer-events:none;opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar .gux-content table tr td.gux-not-in-month{opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar .gux-content table tr td.gux-not-in-month:hover{background-color:var(--gse-ui-calendarMenu-date-hover-backgroundColor)}.gux-calendar .gux-content table tr td.gux-not-in-month.gux-hidden{visibility:hidden}.gux-calendar .gux-content table tr td.gux-current-date{font-family:var(--gse-ui-calendarMenu-date-currentText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-currentText-fontSize);font-weight:var(--gse-ui-calendarMenu-date-currentText-fontWeight);line-height:var(--gse-ui-calendarMenu-date-currentText-lineHeight)}.gux-calendar .gux-content table tr td:focus-visible{border-radius:var(--gse-ui-calendarMenu-month-borderRadius);outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset)}",K=class{constructor(e){C(this,e),this.calendarSelect=E(this,"calendarSelect",7),this.value="",this.minDate="",this.maxDate="",this.mode="single",this.numberOfMonths=1,this.previewValue=new Date,this.selectingDate=null,this.locale="en"}emitCalendarSelect(){this.calendarSelect.emit(this.value)}async setValue(e){if(this.mode==="range"&&e instanceof Array){const[t,a]=e;this.value=c(t,a),this.previewValue=m(this.value)[0]}else{const t=e;this.value=w(t),this.previewValue=t}}async focusPreviewDate(){const e=this.root.shadowRoot.querySelector(`td[data-date="${this.previewValue.getTime()}"]`);e&&e.focus()}async resetCalendarView(e){this.previewValue=e}incrementPreviewDateByMonth(e){this.previewValue=new Date(this.previewValue.getFullYear(),this.previewValue.getMonth()+e,15,0,0,0)}async setValueAndEmit(e){await this.setValue(e),this.emitCalendarSelect()}outOfBounds(e){return this.maxDate!==""&&g(this.maxDate)<e||this.minDate!==""&&g(this.minDate)>e}generateDatesFrom(e,t,a){const n=[],r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);for(let i=0;i<a;i++){const l=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),o=[],h=new Date,v=r.getFullYear()===h.getFullYear()&&r.getMonth()===h.getMonth()&&r.getDate()===h.getDate();let f=!1,b=!1;l.getMonth()!==e&&(o.push("gux-not-in-month"),f=!0,this.mode==="range"&&(o.push("gux-hidden"),b=!0)),this.outOfBounds(l)&&(o.push("gux-disabled"),f=!0);let d=!1;if(v&&o.push("gux-current-date"),this.mode==="range"){const[x,V]=m(this.value),D=x.getTime(),p=V.getTime();l.getTime()===D&&l.getTime()===p?(d=!0,o.push("gux-selected")):l.getTime()===D?(d=!0,o.push("gux-selected"),o.push("gux-start-date")):l.getTime()===p&&(d=!0,o.push("gux-selected"),o.push("gux-end-date"))}else{const x=g(this.value).getTime();l.getTime()===x&&(d=!0,o.push("gux-selected"))}n.push({class:o.join(" "),date:l,hidden:b,disabled:f,selected:d,isToday:v}),r.setDate(r.getDate()+1)}return n}create2DArray(e,t){const a=[];for(let n=0;n<t-1;n++){const r=e.slice(n*t,n*t+t);this.weekShouldBeDisplayed(r)&&a.push(r)}return a}isFocusableDate(e){return e.selected||this.previewValue.getTime()===e.date.getTime()}weekShouldBeDisplayed(e){const t=e.find(a=>!a.hidden);return e.length&&!!t}getMonthDays(e){const t=new Date(this.previewValue.getTime());t.setDate(1),t.setMonth(t.getMonth()+e);const a=t.getMonth(),n=t.getFullYear(),r=L(a,n,this.startDayOfWeek),i=this.generateDatesFrom(a,r,42);return this.create2DArray(i,7)}addDays(e,t){const a=new Date(e.valueOf());return a.setDate(a.getDate()+t),a}getAllDatesElements(){const e=this.root.shadowRoot.querySelectorAll("td");return Array.from(e)}getAllSelectableDatesElements(){const e=this.root.shadowRoot.querySelectorAll('td[tabindex="0"]');return Array.from(e)}getRangeDatesElements(e,t){const a=[];let n;t<e?n=this.getRangeDates(t,e):n=this.getRangeDates(e,t);for(const r of n){const i=this.root.shadowRoot.querySelector(`td[data-date="${r.getTime()}"]:not(.gux-hidden)`);i&&a.push(i)}return a}getRangeDates(e,t){const a=[];let n=e;for(;n<=t;)a.push(new Date(n)),n=this.addDays(n,1);return a}async onDateClick(e){if(!this.outOfBounds(e))if(this.mode!=="range")await this.setValueAndEmit(e);else if(this.selectingDate===null)M(this.getAllDatesElements(),"gux-hovered"),this.selectingDate=new Date(e.valueOf()),this.value=c(e,e);else{const t=this.root.shadowRoot.querySelector(`td[data-date="${e.getTime()}"]`);t&&t.classList.add("gux-selected"),this.updateRangeElements(),await this.setValueAndEmit([this.selectingDate,e]),this.previewValue=e,this.selectingDate=null}}onDateMouseEnter(e){this.mode==="range"&&this.selectingDate!==null&&(this.value=c(e,this.selectingDate),this.updateRangeElements())}updateRangeElements(){if(this.mode==="range"){M(this.getAllDatesElements(),"gux-hovered");const[e,t]=m(this.value),a=this.getRangeDatesElements(e,t);W(a,"gux-hovered")}}async onKeyDown(e){switch(e.key){case" ":case"Enter":e.preventDefault(),await this.onDateClick(this.previewValue);break;case"ArrowDown":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()+7)),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break;case"ArrowUp":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()-7)),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break;case"ArrowLeft":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()-1)),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break;case"ArrowRight":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()+1)),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break;case"PageUp":e.preventDefault(),this.incrementPreviewDateByMonth(1),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break;case"PageDown":e.preventDefault(),this.incrementPreviewDateByMonth(-1),this.onDateMouseEnter(this.previewValue),u(()=>{this.focusPreviewDate()});break}}async componentWillLoad(){if(z(this.root,{variant:this.mode}),this.i18n=await A(this.root,I),this.locale=S(this.root),this.startDayOfWeek=this.startDayOfWeek||O(this.locale),!this.value){const e=new Date;e.setHours(0,0,0,0),this.mode==="range"?this.value=c(e,e):this.value=w(e)}this.previewValue=g(this.value)}componentDidRender(){this.updateRangeElements()}renderMonthHeader(){return s("div",{class:"gux-month-list"},Array.from(Array(this.numberOfMonths).keys()).map(e=>{const t=j(this.previewValue,e);return s("label",null,k(t,this.locale))}))}renderCalendarTable(e){return s("table",null,s("tr",null,Y(this.locale,this.startDayOfWeek).map(t=>s("th",null,t))),this.getMonthDays(e).map(t=>s("tr",null,t.map(a=>s("td",{tabindex:this.isFocusableDate(a)?"0":"-1",class:a.class,"aria-hidden":a.hidden?"true":"false","aria-disabled":a.disabled?"true":"false","data-date":a.date.getTime(),onClick:()=>void this.onDateClick(a.date),onMouseEnter:()=>this.onDateMouseEnter(a.date),onKeyDown:n=>void this.onKeyDown(n)},s("div",{class:"gux-date"},a.date.getDate(),s("gux-screen-reader-beta",null,k(a.date,this.locale))))))))}render(){return s("div",{key:"b5a731dc2713bebeae004b14d57e71bfad4967f7",class:"gux-calendar"},s("div",{key:"0457ceed23a10956d0b7b2051e9d5ed38b13f8f3",class:"gux-header"},s("button",{key:"ca572d08e8977ce5ba870c5777d3a96c8d7069a5",type:"button",class:"gux-left","aria-label":this.i18n("previousMonth"),onClick:()=>this.incrementPreviewDateByMonth(-1)},s("gux-icon",{key:"31b4897c8f29ab377ad3db059d0c28c260a92f87",size:"small",decorative:!0,"icon-name":"custom/chevron-left-small-regular"})),this.renderMonthHeader(),s("button",{key:"337a0d33001348f2c82bbdcdad7f0f00056aec09",type:"button",class:"gux-right","aria-label":this.i18n("nextMonth"),onClick:()=>this.incrementPreviewDateByMonth(1)},s("gux-icon",{key:"cbf1ff2712cfe2c4c302e65b3e828d1330f7f86a",size:"small",decorative:!0,"icon-name":"custom/chevron-right-small-regular"}))),s("div",{key:"8558d6e3c3e4eb4bba32b333ef32509bc55465af",class:"gux-content"},Array.from(Array(this.numberOfMonths).keys()).map(e=>this.renderCalendarTable(e))))}get root(){return R(this)}};K.style=G;export{K as gux_calendar};
