import{r as u,b,w as l,h as c,g}from"./index-RhTaIPoL.js";import{a as d}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{b as f}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{O as x}from"./on-mutation-D5H4nH4U-CeToMEmQ.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const S="Scroll Left",v="Scroll Right",m="Scroll Up",T="Scroll Down";var w={scrollLeft:S,scrollRight:v,scrollUp:m,scrollDown:T};const p=".gux-vertical .gux-tab-container{display:flex;flex-direction:column;inline-size:var(--gse-ui-tabs-set-vertical-width);block-size:100%;margin-inline-end:var(--gse-ui-tabs-set-vertical-marginRight);border-inline-end:var(--gse-ui-tabs-item-divider-horizontal-height) solid var(--gse-ui-tabs-item-divider-dividerColor)}.gux-vertical .gux-tab-container .gux-scroll-button-container{inline-size:100%}.gux-vertical .gux-tab-container .gux-scroll-button-container button{inline-size:100%}.gux-vertical .gux-tab-container .gux-scrollable-section{flex-direction:column;block-size:100%;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none;scroll-behavior:smooth}.gux-vertical .gux-tab-container .gux-scrollable-section::-webkit-scrollbar{inline-size:0;block-size:0}.gux-horizontal .gux-tab-container{block-size:var(--gse-ui-tabs-set-horizontal-height);margin-block-end:var(--gse-ui-tabs-set-horizontal-marginBottom);border-block-end:var(--gse-ui-tabs-item-divider-horizontal-height) solid var(--gse-ui-tabs-item-divider-dividerColor)}.gux-horizontal .gux-scrollable-section{overflow-x:auto}.gux-horizontal .gux-tab-container{box-sizing:content-box;display:flex;inline-size:100%;overflow:hidden;background-color:transparent}.gux-scrollable-section{display:flex;flex:1 1 auto;scroll-behavior:smooth;scrollbar-width:none}.gux-scrollable-section::-webkit-scrollbar{block-size:0}.gux-scroll-button-container{display:flex;align-items:center;justify-content:center;background-color:var(--gse-ui-advancedTabs-set-backgroundColor);border-radius:var(--gse-ui-button-borderRadius)}.gux-scroll-button-container gux-button-slot{inline-size:100%;block-size:100%}.gux-scroll-button-container button{display:flex;align-items:center;justify-content:center;block-size:100%}";var y=function(t,e,r,o){var i=arguments.length,s=i<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,r):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,o);else for(var n=t.length-1;n>=0;n--)(a=t[n])&&(s=(i<3?a(s):i>3?a(e,r,s):a(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s};const h=class{constructor(t){u(this,t),this.currentScrollIndex=0,this.focused=0,this.hasHorizontalScrollbar=!1,this.hasVerticalScrollbar=!1,this.isScrolledToBeginning=!1,this.isScrolledToEnd=!1}onFocusout(t){this.root.contains(t.relatedTarget)||this.tabTriggers.forEach((e,r)=>{e.guxGetActive().then(o=>{o?this.focused=r:e.querySelector("button").setAttribute("tabindex","-1")})})}onHasVerticalScrollBar(){this.checkDisabledScrollButtons()}onScroll(){this.checkDisabledScrollButtons()}onKeydown(t){switch(t.key){case"ArrowRight":case"ArrowDown":t.preventDefault(),this.handleKeyboardScroll("forward");break;case"ArrowLeft":case"ArrowUp":t.preventDefault(),this.handleKeyboardScroll("backward");break;case"Escape":t.preventDefault(),this.focusTab(this.focused);break;case"Home":t.preventDefault(),this.focusTab(0);break;case"End":t.preventDefault(),this.focusTab(this.tabTriggers.length-1);break}}onMutation(){this.setTabTriggers()}async guxSetActive(t){this.root.querySelectorAll("gux-tab").forEach(r=>{r.guxSetActive(!1)}),this.tabTriggers.forEach((r,o)=>{const i=r.tabId===t;r.guxSetActive(i),i&&(this.focused=o)})}focusTab(t){this.focused=t,this.tabTriggers.forEach((e,r)=>{e.guxGetActive().then(o=>{this.focused!==r&&!o&&e.querySelector("button").setAttribute("tabindex","-1")})}),this.tabTriggers[this.focused].querySelector("button").setAttribute("tabindex","0"),this.tabTriggers[this.focused].guxFocus()}setTabTriggers(){this.tabTriggers=this.root.querySelectorAll('gux-tab:not([gux-disabled]), gux-tab[gux-disabled="false"]'),this.tabTriggers?this.triggerIds=Array.from(this.tabTriggers).map(t=>`gux-${t.getAttribute("tab-id")}-tab`).join(" "):this.triggerIds=""}checkForScrollbarHideOrShow(){b(()=>{const t=this.root.querySelector(".gux-scrollable-section"),e=t.clientWidth<t.scrollWidth,r=t.clientHeight<t.scrollHeight;e!==this.hasHorizontalScrollbar&&(this.hasHorizontalScrollbar=e),r!==this.hasVerticalScrollbar&&(this.hasVerticalScrollbar=r),this.checkDisabledScrollButtons()})}handleKeyboardScroll(t){const e=this.root.querySelector(".gux-scrollable-section");t==="forward"?this.focused<this.tabTriggers.length-1?(l(()=>{this.hasHorizontalScrollbar?this.scrollRight():this.scrollDown()}),this.focusTab(this.focused+1)):(l(()=>{this.hasHorizontalScrollbar?e.scrollBy(-e.scrollWidth,0):e.scrollBy(0,-e.scrollHeight)}),this.focusTab(0)):t==="backward"&&(this.focused>0?(l(()=>{this.hasHorizontalScrollbar?this.scrollLeft():this.scrollUp()}),this.focusTab(this.focused-1)):(l(()=>{this.hasHorizontalScrollbar?e.scrollBy(e.scrollWidth,0):e.scrollBy(0,e.scrollHeight)}),this.focusTab(this.tabTriggers.length-1)))}disconnectedCallback(){this.resizeObserver&&this.resizeObserver.unobserve(this.root.querySelector(".gux-tab-container")),this.domObserver&&this.domObserver.disconnect()}async componentWillLoad(){this.setTabTriggers(),this.i18n=await f(this.root,w,"gux-tabs")}componentDidLoad(){!this.resizeObserver&&window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>this.checkForScrollbarHideOrShow())),this.resizeObserver&&this.resizeObserver.observe(this.root.querySelector(".gux-scrollable-section")),!this.domObserver&&window.MutationObserver&&(this.domObserver=new MutationObserver(()=>this.checkForScrollbarHideOrShow())),this.domObserver&&this.domObserver.observe(this.root,{childList:!0,attributes:!1,subtree:!0}),d(()=>{this.checkForScrollbarHideOrShow()},500)}checkDisabledScrollButtons(){const t=this.root.querySelector(".gux-scrollable-section");if(this.hasHorizontalScrollbar){const e=t.scrollLeft,r=t.scrollWidth-t.clientWidth;this.isScrolledToBeginning=e===0,this.isScrolledToEnd=r-e===0}else{const e=t.scrollTop,r=t.scrollHeight-t.clientHeight;this.isScrolledToBeginning=e===0,this.isScrolledToEnd=r-e===0}}getTabLength(){var t;return(t=this.tabTriggers[this.currentScrollIndex])===null||t===void 0?void 0:t.scrollWidth}scrollLeft(){l(()=>{this.isScrolledToEnd?this.currentScrollIndex=this.tabTriggers.length-1:this.currentScrollIndex=this.currentScrollIndex-1,this.root.querySelector(".gux-scrollable-section").scrollBy(-this.getTabLength(),0)})}scrollRight(){l(()=>{this.isScrolledToBeginning&&(this.currentScrollIndex=0),this.root.querySelector(".gux-scrollable-section").scrollBy(this.getTabLength(),0),this.currentScrollIndex=this.currentScrollIndex+1})}scrollUp(){l(()=>{this.root.querySelector(".gux-scrollable-section").scrollBy(0,-this.tabTriggers[this.focused].clientHeight)})}scrollDown(){l(()=>{this.root.querySelector(".gux-scrollable-section").scrollBy(0,this.tabTriggers[this.focused].clientHeight)})}render(){return c("div",{key:"2ce679b57914daa16b3041171d7ab972190312a8",class:"gux-tab-container"},this.hasHorizontalScrollbar?this.renderScrollButton("scrollLeft"):this.renderScrollButton("scrollUp"),c("div",{key:"6c39753ecba6b1ca17f4f59d2e80ac36f30cba6c",role:"tablist",class:"gux-scrollable-section","aria-owns":this.triggerIds},c("slot",{key:"d693e6eb9eb231828d580fab6f2e4eb4d52f82c0"})),this.hasHorizontalScrollbar?this.renderScrollButton("scrollRight"):this.renderScrollButton("scrollDown"))}renderScrollButton(t){return c("div",{class:"gux-scroll-button-container"},this.hasHorizontalScrollbar||this.hasVerticalScrollbar?c("gux-button-slot",{accent:"ghost","icon-only":!0},c("button",{class:"gux-scroll-button",disabled:this.getButtonDisabled(t),tabindex:"-1",title:this.i18n(t),"aria-label":this.i18n(t),onClick:()=>this.getScrollDirection(t)},c("gux-icon",{"icon-name":this.getChevronIconName(t),decorative:!0,size:"small"}))):null)}getButtonDisabled(t){switch(t){case"scrollLeft":case"scrollUp":return this.isScrolledToBeginning;case"scrollRight":case"scrollDown":return this.isScrolledToEnd}}getScrollDirection(t){switch(t){case"scrollLeft":this.scrollLeft();break;case"scrollRight":this.scrollRight();break;case"scrollUp":this.scrollUp();break;case"scrollDown":this.scrollDown()}}getChevronIconName(t){switch(t){case"scrollLeft":return"custom/chevron-left-small-regular";case"scrollRight":return"custom/chevron-right-small-regular";case"scrollUp":return"custom/chevron-up-small-regular";case"scrollDown":return"custom/chevron-down-small-regular"}}get root(){return g(this)}};y([x({childList:!0,subtree:!0,attributes:!0})],h.prototype,"onMutation",null);h.style=p;export{h as gux_tab_list};
