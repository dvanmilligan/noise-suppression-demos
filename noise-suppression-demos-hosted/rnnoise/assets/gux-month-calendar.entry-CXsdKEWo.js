import{r as l,h as a,g as h}from"./index-RhTaIPoL.js";import{b as c,g as d}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{a as g}from"./spark-intl-CJJbLxeY-BrpETJ5c.js";import{u as m}from"./use-regional-dates-BgaA4g76-C5bTvd2o.js";import{s}from"./simulate-native-event-BMRf5pjV-BcLDngo1.js";import{b as f}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{g as n,b as i,a as o}from"./year-month-values-Dwrcabgx-BGOpTfvI.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./get-closest-element-DCZG2J0G-kuMVup89.js";const y="Current year is {currentYear}, Click to change year to {changeYear}";var x={changeYear:y};const v=".gux-month-calendar{flex-wrap:wrap;inline-size:var(--gse-ui-calendarMenu-width);box-shadow:var(--gse-ui-calendarMenu-boxShadow)}.gux-month-calendar.gux-hidden{display:none}.gux-month-calendar .gux-current-month{font-family:var(--gse-ui-calendarMenu-month-currentText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-currentText-fontSize);font-weight:var(--gse-ui-calendarMenu-month-currentText-fontWeight);line-height:var(--gse-ui-calendarMenu-month-currentText-lineHeight);color:var(--gse-ui-calendarMenu-month-default-foregroundColor)}.gux-month-calendar .gux-year-header{position:relative;display:flex;align-items:center;justify-content:space-between;block-size:var(--gse-ui-calendarMenu-month-single-header-height);padding:var(--gse-ui-calendarMenu-header-padding);font-family:var(--gse-ui-calendarMenu-day-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-day-headerText-fontSize);font-weight:var(--gse-ui-calendarMenu-day-headerText-fontWeight);line-height:var(--gse-ui-calendarMenu-day-headerText-lineHeight);color:var(--gse-ui-calendarMenu-header-foregroundColor);background-color:var(--gse-ui-calendarMenu-header-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-header-borderRadius)}.gux-month-calendar .gux-year-header button{padding:var(--gse-ui-calendarMenu-header-arrow-padding);color:inherit;cursor:pointer;outline:none;background:none;border:none}.gux-month-calendar .gux-year-header button:focus-visible{outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-ui-color-focus);outline-offset:var(--gse-semantic-focusOutline-offset);border-radius:calc(var(--gse-semantic-focusOutline-sm-borderRadius) - var(--gse-semantic-focusOutline-offset))}.gux-month-calendar .gux-year-header button.gux-year-change:disabled{cursor:default;opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-month-calendar .gux-year-header button gux-icon{pointer-events:none}",b=class{constructor(e){l(this,e),this.expanded=!0}onValueUpdate(e){const{year:t}=n(e);this.year=t}async guxFocus(e){this.expanded=!0,e=e||i();const{year:t}=n(e);this.year=t,f(()=>{const r=this.root.shadowRoot.querySelector(`gux-month-list-item[value="${e}"]`);r&&r.focus()})}onKeyDown(e){switch(e.key){case"Tab":if(e.shiftKey)return;this.nextYearElement.matches(":focus-visible")?(this.focusSelectedMonth(),e.preventDefault()):this.previousYearElement.matches(":focus-visible")&&this.nextYearElement.disabled&&(this.focusSelectedMonth(),e.preventDefault());break}}focusSelectedMonth(){const e=this.root.shadowRoot.querySelector(`gux-month-list-item[value="${this.previewValue}"]`);if(e&&e.matches(":focus-visible"))e==null||e.focus();else{const t=this.root.shadowRoot.querySelectorAll("gux-month-list-item"),r=Array.from(t).find(u=>!u.disabled);r==null||r.focus()}}nextYearElementOnBlur(e){e.target.disabled&&!e.relatedTarget&&(this.focusSelectedMonth(),e.preventDefault())}async componentWillLoad(){this.i18n=await c(this.root,x),m()?this.locale=g(this.root):this.locale=d(this.root),this.value?(this.year=n(this.value).year,this.previewValue=this.value):this.year=n(i()).year}updateValue(e){this.value=e,this.previewValue=this.value,s(this.root,"input"),s(this.root,"change")}isOutOfBounds(e){return this.max&&this.max<e||this.min&&this.min>e}onMonthClick(e){this.isOutOfBounds(e)||this.updateValue(e)}isCurrentMonth(e){return n(i()).year==this.year&&n(i()).month==e}getMonthAriaLabel(e){const{year:t,month:r}=n(e);return new Date(Number(t),Number(r)-1).toLocaleDateString(this.locale,{calendar:"gregory",year:"numeric",month:"long"})}getYearLabel(e){return new Date(Number(e),5).toLocaleDateString(this.locale,{calendar:"gregory",year:"numeric"})}isSelectedMonth(e){return e===this.value}isAriaSelectedMonth(e){return this.isSelectedMonth(e)?"true":!1}changeYear(e){if(this.year=(parseInt(this.year)+e).toString(),this.value){const t=n(this.value).month,r=o(this.year,t);this.previewValue=r}}isPreviousYearLessThanMinYear(e,t){return(parseInt(e)-1).toString()<(t&&n(t).year)}isNextYearGreaterThanMaxYear(e,t){return(parseInt(e)+1).toString()>(t&&n(t).year)}getMonthShortName(e,t){return new Date(Number(e),Number(t)-1).toLocaleDateString(this.locale,{calendar:"gregory",month:"short"})}renderHeader(){return a("div",{class:"gux-year-header"},a("button",{type:"button",class:"gux-year-change",onClick:()=>this.changeYear(-1),disabled:this.isPreviousYearLessThanMinYear(this.year,this.min),ref:e=>this.previousYearElement=e},a("gux-icon",{"icon-name":"custom/chevron-left-small-regular",decorative:!0,size:"small"}),a("gux-screen-reader-beta",null,this.i18n("changeYear",{currentYear:parseInt(this.year),changeYear:parseInt(this.year)-1}))),a("div",{"data-testid":"year-label"},this.getYearLabel(this.year)),a("button",{type:"button",class:"gux-year-change",onClick:()=>this.changeYear(1),disabled:this.isNextYearGreaterThanMaxYear(this.year,this.max),ref:e=>this.nextYearElement=e,onBlur:this.nextYearElementOnBlur.bind(this)},a("gux-icon",{"icon-name":"custom/chevron-right-small-regular",decorative:!0,size:"small"}),a("gux-screen-reader-beta",null,this.i18n("changeYear",{currentYear:parseInt(this.year),changeYear:parseInt(this.year)+1}))))}renderMonths(){const e=Array.from(new Array(12),(t,r)=>String(r+1).padStart(2,"0")).map(t=>{const r=o(this.year,t);return a("gux-month-list-item",{class:{"gux-current-month":this.isCurrentMonth(t)},value:r,selected:this.isSelectedMonth(r),"aria-selected":this.isAriaSelectedMonth(r),"aria-label":this.getMonthAriaLabel(r),onClick:()=>this.onMonthClick(r),disabled:this.isOutOfBounds(r)},this.getMonthShortName(this.year,t))});return a("gux-month-list",null,e)}render(){return a("div",{key:"c97c4f5bc21044f324316b40e5d39918bcfa9cf7",class:{"gux-hidden":!this.expanded,"gux-month-calendar":!0}},this.renderHeader(),this.renderMonths())}static get delegatesFocus(){return!0}get root(){return h(this)}static get watchers(){return{value:["onValueUpdate"]}}};b.style=v;export{b as gux_month_calendar};
