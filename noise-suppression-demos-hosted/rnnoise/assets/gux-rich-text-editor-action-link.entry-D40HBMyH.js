import{r as p,c as u,h as t,H as f,g as d}from"./index-RhTaIPoL.js";import{O as h}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{t as b}from"./usage-BYFiy2rf-lhiVWKSr.js";import{b as m}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as g}from"./en-DN3YAdAX-COCuuOUE.js";import{b as k}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{h as x}from"./gux-rich-text-editor.service-EOVBuDBp-DfE0JhkK.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./get-closest-element-DCZG2J0G-kuMVup89.js";const y=":host{display:block}gux-popover div.gux-popover-content-wrapper{display:flex;flex-direction:column;gap:var(--gse-ui-popover-gap)}gux-button-slot{inline-size:var(--gse-ui-button-iconOnly-width);block-size:var(--gse-ui-button-default-height)}gux-button-slot button.gux-is-pressed{color:var(--gse-ui-button-ghost-active-foregroundColor);background-color:var(--gse-ui-button-ghost-active-backgroundColor)}";var v=function(e,i,o,n){var a=arguments.length,s=a<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,o):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,i,o,n);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(s=(a<3?l(s):a>3?l(i,o,s):l(i,o))||s);return a>3&&s&&Object.defineProperty(i,o,s),s};const c=class{constructor(e){p(this,e),this.linkOptions=u(this,"linkOptions",7),this.disabled=!1,this.active=!1,this.isOpen=!1}get isActive(){return this.active}set isActive(e){this.active=e}onClickOutside(){this.isOpen=!1}handleKeydown(e){const i=e.composedPath();switch(e.key){case"Escape":this.isOpen=!1,this.actionButton.focus();break;case"ArrowDown":case"Enter":i.includes(this.actionButton)&&(e.preventDefault(),this.isOpen=!0,this.focusTextToDisplayInputElement());break;case"Tab":if(this.isOpen){e.shiftKey&&i.includes(this.textToDisplayInputElement)?(e.preventDefault(),this.isOpen=!1,this.actionButton.focus()):!e.shiftKey&&i.includes(this.dismissButtonElement)&&(this.isOpen=!1);break}}}async componentWillLoad(){b(this.root),this.i18n=await m(this.root,g)}emitLinkOptions(){const e={textToDisplay:this.textToDisplayInputElement.value,href:this.linkAddressInputElement.value};this.linkOptions.emit(e),this.textToDisplayInputElement.value=null,this.linkAddressInputElement.value=null,this.isOpen=!1}togglePopover(){this.isOpen=!this.isOpen,this.isOpen?this.focusTextToDisplayInputElement():this.actionButton.focus()}focusTextToDisplayInputElement(){k(()=>{this.textToDisplayInputElement.focus()})}renderTooltip(){if(!this.disabled)return t("gux-tooltip-beta",{for:"popover-target"},t("div",{slot:"content"},this.i18n("link")))}render(){return t(f,{key:"e82d3da6914fe4ac6705586be92176db9ba61c1c"},t("gux-button-slot",{key:"385c665476a70547ca483d13575f8fff6ba32be0",accent:"ghost","icon-only":!0},t("button",{key:"5c0e87072873c5278c803d5d02220255695208db",id:"popover-target",class:{"gux-is-pressed":this.active||this.isOpen},onClick:()=>this.togglePopover(),ref:e=>this.actionButton=e,type:"button",disabled:this.disabled||x(this.root),"aria-label":this.i18n("link"),"aria-haspopup":"true","aria-expanded":this.isOpen.toString()},t("gux-icon",{key:"d49967355d824a016eae7b1da14f149f7e0ffdeb",size:"small","icon-name":"fa/link-simple-regular",decorative:!0}))),t("gux-popover",{key:"ba42a7dbbfef2e4b845e17ecbd8c3891f9396fcb","is-open":this.isOpen,for:"popover-target"},t("div",{key:"e954a7cc8e7d730ce470653e1fe307cd26ca7d52",class:"gux-popover-content-wrapper"},t("gux-form-field-text-like",{key:"6af34ecbf1725497e8c8fa5ef2df147b74d1ca8b"},t("input",{key:"776f4b1898c7a5ce1f0a57b0b96d5eb1dfdf3903",id:"textToDisplay",ref:e=>this.textToDisplayInputElement=e,slot:"input",type:"text"}),t("label",{key:"48ac1b529c4e6955885dede954e81f4c43ae4ec0",slot:"label"},this.i18n("textToDisplay"))),t("gux-form-field-text-like",{key:"45fec7c538de798568532a567dd76f74320efb72"},t("input",{key:"1976fc52ea79ab3dc381c9f0ec49e1eca8e7ff5d",ref:e=>this.linkAddressInputElement=e,slot:"input",type:"text"}),t("label",{key:"bfc6e0e94283086d3faaa56e6ec42d848ecf2693",slot:"label"},this.i18n("linkAddress"))),t("gux-cta-group",{key:"fd587a38e8e007612f3185798dc885e87dfd5a7b",align:"end"},t("gux-button",{key:"05d5d0c58e31ba651d5e3443868c8360f946edcf",onClick:()=>this.emitLinkOptions(),slot:"primary"},this.i18n("insert")),t("gux-button",{key:"8d0646812acc04e29837bcb9ccd9effbf74751ea",ref:e=>this.dismissButtonElement=e,onClick:()=>this.togglePopover(),slot:"dismiss"},this.i18n("cancel"))))),this.renderTooltip())}get root(){return d(this)}};v([h({triggerEvents:"mousedown"})],c.prototype,"onClickOutside",null);c.style=y;export{c as gux_rich_text_editor_action_link};
