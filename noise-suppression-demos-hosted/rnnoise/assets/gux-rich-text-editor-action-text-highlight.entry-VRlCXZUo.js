import{r as u,c as g,h as e,H as c,g as d}from"./index-RhTaIPoL.js";import{O as p}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{t as x}from"./usage-BYFiy2rf-lhiVWKSr.js";import{b as f}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as b}from"./en-DN3YAdAX-COCuuOUE.js";import{h as m}from"./gux-rich-text-editor.service-EOVBuDBp-DfE0JhkK.js";import{w as v}from"./when-event-is-from-kLXvN2m9-B4cyA2sH.js";import{b as H}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{e as w}from"./event-is-from-C6ZfOd6U-BUOfvQpd.js";import{r as y}from"./random-html-id-D9jKBqIb-D30kRngR.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./get-closest-element-DCZG2J0G-kuMVup89.js";const k=":host{display:block}.gux-text-highlight-popup{display:flex;flex-direction:column;gap:var(--gse-ui-rte-colorPalette-gap);inline-size:104px;padding:12px;margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow)}.gux-text-highlight-popup gux-rich-text-editor-list{display:flex;flex-direction:row;flex-wrap:wrap;gap:var(--gse-ui-rte-colorPalette-gap);align-items:flex-start;justify-content:flex-start;padding:0}.gux-text-highlight-popup gux-button-slot{align-self:center;block-size:var(--gse-ui-rte-menuButton-height)}.gux-text-highlight-popup gux-button-slot button{block-size:var(--gse-ui-rte-menuButton-height)}gux-button-slot button.gux-is-pressed{color:var(--gse-ui-button-ghost-active-foregroundColor);background-color:var(--gse-ui-button-ghost-active-backgroundColor)}";var A=function(t,i,o,r){var n=arguments.length,s=n<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,o):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,i,o,r);else for(var h=t.length-1;h>=0;h--)(a=t[h])&&(s=(n<3?a(s):n>3?a(i,o,s):a(i,o))||s);return n>3&&s&&Object.defineProperty(i,o,s),s};const l=class{constructor(t){u(this,t),this.noHighlightAction=g(this,"noHighlightAction",7),this.buttonId=y("gux-rich-text-editor-action-text-highlight"),this.disabled=!1,this.active=!1,this.expanded=!1}get isActive(){return this.active}set isActive(t){this.active=t}onClickOutside(){this.expanded=!1}watchDisabled(t){t&&(this.expanded=!1)}handleKeydown(t){const i=w("gux-rich-highlight-list-item",t),o=t.composedPath();switch(t.key){case"Escape":this.expanded=!1,this.actionButton.focus();break;case"ArrowDown":case"Enter":o.includes(this.actionButton)&&(t.preventDefault(),this.expanded=!0,this.focusNoHighlightActionButton());break;case"Tab":this.expanded&&(t.shiftKey&&o.includes(this.noHighlightActionButton)&&(t.preventDefault(),this.expanded=!1,this.actionButton.focus()),i&&!t.shiftKey&&(this.expanded=!1));break}}async componentWillLoad(){x(this.root),this.i18n=await f(this.root,b)}togglePopup(){this.expanded=!this.expanded,this.expanded?this.focusNoHighlightActionButton():this.actionButton.focus()}focusNoHighlightActionButton(){H(()=>{this.noHighlightActionButton.focus()})}renderTooltip(){if(!this.disabled&&!this.expanded)return e("gux-tooltip-beta",{for:this.buttonId},e("div",{slot:"content"},this.i18n("textHighlight")))}renderPopup(){return e("div",{class:"gux-text-highlight-popup",slot:"popup"},this.renderNoHighlightAction(),this.renderTextHighlightColors())}renderNoHighlightAction(){return e("gux-button-slot",{accent:"tertiary"},e("button",{type:"button",ref:t=>this.noHighlightActionButton=t,onClick:()=>this.emitNoHighlightAction()},e("gux-truncate",{"max-lines":1},this.i18n("noHighlight"))))}onListClick(t){v("gux-rich-highlight-list-item",t,()=>{this.expanded=!1,this.actionButton.focus()})}renderTextHighlightColors(){return e("gux-rich-text-editor-list",{onClick:t=>this.onListClick(t)},e("slot",null))}emitNoHighlightAction(){this.noHighlightAction.emit(),this.expanded=!1,this.actionButton.focus()}renderTarget(){return e("gux-button-slot",{accent:"ghost","icon-only":!0,slot:"target"},e("button",{id:this.buttonId,type:"button",ref:t=>this.actionButton=t,onClick:()=>this.togglePopup(),disabled:this.disabled||m(this.root),class:{"gux-is-pressed":this.active||this.expanded},"aria-haspopup":"true","aria-expanded":this.expanded.toString()},e("gux-icon",{size:"small","icon-name":"fa/highlighter-line-regular",decorative:!0}),e("gux-screen-reader-beta",null,this.i18n("textHighlight"))))}render(){return e(c,{key:"8e70e29e8705c34ac8a966de57e630a5fe9143a7"},e("gux-popup",{key:"ab3f4ce960cbdcd41f54855c55a29abd587cf6f6",disabled:this.disabled,expanded:this.expanded,exceedTargetWidth:!0,placement:"bottom-start"},this.renderTarget(),this.renderPopup()),this.renderTooltip())}static get delegatesFocus(){return!0}get root(){return d(this)}static get watchers(){return{disabled:["watchDisabled"]}}};A([p({triggerEvents:"mousedown"})],l.prototype,"onClickOutside",null);l.style=k;export{l as gux_rich_text_editor_action_text_highlight};
