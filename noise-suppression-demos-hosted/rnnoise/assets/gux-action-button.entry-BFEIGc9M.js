import{r as b,c as u,h as i,g as f}from"./index-RhTaIPoL.js";import{O as h}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{w as m}from"./when-event-is-from-kLXvN2m9-B4cyA2sH.js";import{a as d}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{t as g}from"./usage-BYFiy2rf-lhiVWKSr.js";import{b as x}from"./index-Bbwiw1Rf-CzeU2kBB.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const y="More options";var k={moreOptions:y};const w=["primary","secondary","tertiary","danger"];function l(t){return w.find(e=>e===t)?t:"secondary"}const v=":host{display:block;-webkit-user-select:none;user-select:none}.gux-action-button-container{min-inline-size:128px}.gux-action-button-container>*{vertical-align:middle}.gux-action-button-container .gux-action-button{inline-size:calc(100% - 33px);margin-inline-end:1px}.gux-action-button-container .gux-action-button button{inline-size:100%;max-inline-size:none;text-align:center;border-start-end-radius:0;border-end-end-radius:0}.gux-action-button-container .gux-action-button button:focus-visible:enabled{position:relative}.gux-action-button-container .gux-dropdown-button button{display:flex;align-items:center;justify-content:center;inline-size:var(--gse-ui-button-iconOnly-width);padding:0;border-start-start-radius:0;border-end-start-radius:0}.gux-action-button-container .gux-list-container{max-inline-size:220px;max-block-size:var(--gse-ui-menu-maxHeight);margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow)}";var O=function(t,e,n,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,s);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(o=(a<3?c(o):a>3?c(e,n,o):c(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o};const p=class{constructor(t){b(this,t),this.open=u(this,"open",7),this.close=u(this,"close",7),this.actionClick=u(this,"actionClick",7),this.type="button",this.disabled=!1,this.accent="secondary",this.isOpen=!1}handleKeydown(t){const e=t.composedPath();switch(t.key){case"Escape":this.isOpen=!1,e.includes(this.listElement)&&(t.preventDefault(),this.dropdownButton.focus());break;case"Tab":{this.isOpen=!1;break}case"ArrowDown":case"Enter":e.includes(this.dropdownButton)&&(t.preventDefault(),this.isOpen=!0,this.focusFirstItemInPopupList());break;case"ArrowUp":e.includes(this.dropdownButton)&&(t.preventDefault(),this.isOpen=!0,this.focusLastItemInPopupList());break}}handleKeyup(t){switch(t.key){case" ":{t.composedPath().includes(this.dropdownButton)&&(this.isOpen=!0,this.focusFirstItemInPopupList());break}}}watchDisabled(t){t&&(this.isOpen=!1)}watchValue(t){t?this.open.emit():(this.listElement.blur(),this.close.emit())}onClickOutside(t){t.relatedTarget===null&&(this.isOpen=!1)}toggle(){this.disabled||(this.isOpen=!this.isOpen,this.isOpen&&this.focusPopupList())}focusPopupList(){d(()=>{var t;(t=this.listElement)===null||t===void 0||t.focus()})}focusFirstItemInPopupList(){d(()=>{this.listElement.guxFocusFirstItem()})}focusLastItemInPopupList(){d(()=>{this.listElement.guxFocusLastItem()})}onActionClick(){this.disabled||(this.isOpen=!1,this.actionClick.emit())}onListClick(t){m("gux-list-item",t,()=>{this.isOpen=!1,this.dropdownButton.focus()})}async componentWillLoad(){g(this.root,{variant:this.type}),this.i18n=await x(this.root,k)}render(){return i("div",{key:"fae48f3efda31a910eaa137977a5cab892e92c07",class:"gux-action-button-container"},i("gux-popup",{key:"813b153dd094b536ccf0f5c10cb3faa793cb6883",expanded:this.isOpen,disabled:this.disabled,placement:"bottom-end","exceed-target-width":!0},i("div",{key:"ab9f2403aa225df9f290f3434eee9afd803d6210",slot:"target",class:"gux-action-button-container"},i("gux-button-slot",{key:"9b07eee9bcea381d11fbada67557cb33e0458a44",class:"gux-action-button",accent:l(this.accent)},i("button",{key:"a3742f2f9c0217ee0c1178f41884d42f107d2634",type:this.type,disabled:this.disabled,onClick:()=>this.onActionClick(),"data-testid":"action-button"},i("slot",{key:"9761a506b6ea64b23c3b038e7c23bbc8166123dc",name:"title"}))),i("gux-button-slot",{key:"fda21417f609ba9c65a1d54d8661f6317f550a31",class:"gux-dropdown-button",accent:l(this.accent)},i("button",{key:"d4aaa03b0fbe76af111c497249ac9089be113b8b",type:"button",disabled:this.disabled,ref:t=>this.dropdownButton=t,onMouseUp:()=>this.toggle(),"aria-haspopup":"true","aria-expanded":this.isOpen.toString(),"aria-label":this.i18n("moreOptions"),"data-testid":"dropdown-button"},i("gux-icon",{key:"1d668a89b0fa83e07cecff0928e98364a4b91fad",decorative:!0,"icon-name":"custom/chevron-down-small-regular",size:"small"})))),i("div",{key:"e54c7a56688f3d27a2ec4d1abc63108bb9569907",class:"gux-list-container",slot:"popup"},i("gux-list",{key:"9a54e5c3298edf4c36088cc1966c59f43a0a0e32",onClick:t=>this.onListClick(t),ref:t=>this.listElement=t},i("slot",{key:"ca42e4b6a39ddf2aebde782c56a3c97a704d15c3"})))))}static get delegatesFocus(){return!0}get root(){return f(this)}static get watchers(){return{disabled:["watchDisabled"],isOpen:["watchValue"]}}};O([h({triggerEvents:"click"})],p.prototype,"onClickOutside",null);p.style=v;export{p as gux_action_button};
