import{r as c,f as h,h as i,H as p,g as m}from"./index-RhTaIPoL.js";import{t as f}from"./usage-BYFiy2rf-lhiVWKSr.js";import{h as g}from"./gux-rich-text-editor.service-EOVBuDBp-DfE0JhkK.js";import{O as x}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{b as u}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{b}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as v}from"./en-DN3YAdAX-COCuuOUE.js";import{r as y}from"./random-html-id-D9jKBqIb-D30kRngR.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-DCZG2J0G-kuMVup89.js";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const I=":host{display:block}gux-button-slot button .gux-target-display{display:flex;flex-direction:row;gap:4px;align-items:center;justify-content:center}gux-button-slot button.gux-is-pressed{color:var(--gse-ui-button-ghost-active-foregroundColor);background-color:var(--gse-ui-button-ghost-active-backgroundColor)}.gux-list-container{inline-size:214px;margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow)}";var E=function(t,e,s,o){var n=arguments.length,r=n<3?e:o===null?o=Object.getOwnPropertyDescriptor(e,s):o,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,s,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(r=(n<3?a(r):n>3?a(e,s,r):a(e,s))||r);return n>3&&r&&Object.defineProperty(e,s,r),r};const d=class{constructor(t){c(this,t),this.buttonId=y("gux-rich-text-editor-action-rich-style"),this.expanded=!1,this.disabled=!1}onClickOutside(){this.expanded=!1}watchValue(t){this.validateValue(t,this.listElement)}watchDisabled(t){t&&(this.expanded=!1)}onInternallistitemsupdated(t){t.stopPropagation(),h(this.root)}handleKeydown(t){const e=t.composedPath().includes(this.actionButton),s=t.composedPath().includes(this.listElement);switch(t.key){case"Escape":s&&(t.preventDefault(),this.expanded=!1,this.actionButton.focus());break;case"ArrowDown":case"Enter":{e&&!this.expanded&&(t.preventDefault(),this.expanded=!0,this.focusFirstListItem());break}case"Tab":this.expanded=!1;break;case"ArrowUp":e&&!this.expanded&&(t.preventDefault(),this.expanded=!0,this.focusLastListItem())}}handleKeyup(t){switch(t.key){case" ":{t.composedPath().includes(this.actionButton)&&(t.preventDefault(),this.expanded=!0,this.focusFirstListItem());break}}}focusFirstListItem(){u(()=>{this.listElement.guxFocusFirstItem()})}focusLastListItem(){u(()=>{this.listElement.guxFocusLastItem()})}async componentWillLoad(){f(this.root),this.i18n=await b(this.root,v)}componentWillRender(){!(this===null||this===void 0)&&this.listElement&&this.validateValue(this.value,this.listElement)}validateValue(t,e){if(t===void 0){e.value=t;return}if(this.getListItemElementByValue(t)){e.value=t;return}}get listItemElements(){const t=this.listElement.querySelector("slot");if(t)return Array.from(t.assignedElements())}getListItemElementByValue(t){return this.listItemElements.find(e=>e.value===t)}renderTargetDisplay(){if(!(this===null||this===void 0)&&this.listElement){const t=this.getListItemElementByValue(this.value);if(t)return i("span",null,this.renderListItem(t))}}renderMenu(){return i("div",{class:"gux-target-display"},this.renderTargetDisplay(),i("gux-icon",{"icon-name":this.expanded?"custom/chevron-up-small-regular":"custom/chevron-down-small-regular","screenreader-text":this.i18n("richStyleDropdown")}))}renderListItem(t){return i("gux-truncate",{"max-lines":1},t.textContent)}renderTooltip(){if(!this.disabled&&!this.expanded)return i("gux-tooltip-beta",{for:this.buttonId},i("div",{slot:"content"},this.i18n("richStyle")))}onActionButtonClick(){this.expanded=!this.expanded,this.expanded&&this.focusFirstListItem()}updateValue(t){this.value!==t&&(this.value=t)}onListClick(t){const e=t.target.closest("gux-rich-style-list-item");e&&(this.expanded=!1,this.updateValue(e.value),this.actionButton.focus())}renderPopup(){return i("div",{class:"gux-list-container",slot:"popup"},i("gux-rich-text-editor-list",{ref:t=>this.listElement=t,onClick:t=>this.onListClick(t)},i("slot",null)))}renderTarget(){return i("gux-button-slot",{accent:"ghost",slot:"target","icon-only":!0},i("button",{id:this.buttonId,type:"button",ref:t=>this.actionButton=t,class:{"gux-is-pressed":this.expanded},onClick:()=>this.onActionButtonClick(),disabled:this.disabled||g(this.root),"aria-haspopup":"true","aria-expanded":this.expanded.toString()},this.renderMenu()))}render(){return i(p,{key:"b3a2e7811c80988aef22e84c1caf1e8f3f9aa7bf"},i("gux-popup",{key:"1b910940224664f741bd9e4cb86317795033fa9b",expanded:this.expanded,exceedTargetWidth:!0,placement:"bottom-start"},this.renderTarget(),this.renderPopup()),this.renderTooltip())}static get delegatesFocus(){return!0}get root(){return m(this)}static get watchers(){return{value:["watchValue"],disabled:["watchDisabled"]}}};E([x({triggerEvents:"mousedown"})],d.prototype,"onClickOutside",null);d.style=I;export{d as gux_rich_text_editor_action_rich_style};
