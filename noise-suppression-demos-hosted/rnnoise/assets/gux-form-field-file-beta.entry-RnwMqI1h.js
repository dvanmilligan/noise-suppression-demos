import{r as g,h as t,f as u,g as h}from"./index-RhTaIPoL.js";import{b as c}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{O as m}from"./on-mutation-D5H4nH4U-CeToMEmQ.js";import{h as s}from"./has-slot-qzV3vtOw-D7GdaS0G.js";import{t as b}from"./usage-BYFiy2rf-lhiVWKSr.js";import{a as x,G as v}from"./gux-form-field-error-Dyi3YXR2-iLJZN6dq.js";import{G as y,a as F}from"./gux-form-field-container-C1Au1mHW-CoCMVxfO.js";import{g as D,v as C}from"./gux-form-field.service-Nq3AAQGS-Db9x5865.js";import{p as w}from"./prevent-browser-validation-styling-PYfNAK8p-8P9I4Sy5.js";import{a as I,o as k,b as T}from"./on-attribute-change-De1NnCmO-C8j0fVsi.js";import{s as f}from"./simulate-native-event-BMRf5pjV-BcLDngo1.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./random-html-id-D9jKBqIb-D30kRngR.js";import"./log-error-DxtJDeL9-5foDqi4E.js";const A="Upload file",U="Upload files",z="Change file",L="Change files",O="Click to upload",_="Drag and drop a file here or",Z="Drag and drop files here or";var q={uploadFile:A,uploadFiles:U,changeFile:z,changeFiles:L,clickToUpload:O,dragAndDropFileInstructions:_,dragAndDropFilesInstructions:Z};const S=".gux-form-field-container{display:flex;flex-direction:column}.gux-form-field-container.gux-beside{flex-direction:row}.gux-character-counter{display:grid;grid-template-rows:auto auto auto;grid-template-columns:1fr 1fr}.gux-character-counter :nth-child(1){grid-row:1/2;grid-column:2/3}.gux-character-counter :nth-child(2){grid-row:1/2;grid-column:1/2}.gux-character-counter :nth-child(3){grid-row:2/3;grid-column:1/-1}.gux-character-counter :nth-child(4){grid-row:3/4;grid-column:1/-1}.gux-character-counter.gux-beside{grid-template-columns:min-content 1fr}.gux-character-counter.gux-beside :nth-child(1){grid-row:1/2;grid-column:1/-1}.gux-character-counter.gux-beside :nth-child(2){grid-row:2/3;grid-column:1/2}.gux-character-counter.gux-beside :nth-child(3){grid-row:2/3;grid-column:2/3}.gux-character-counter.gux-beside :nth-child(4){grid-row:3/4;grid-column:1/-1}.gux-form-field-error{display:none;flex-direction:row;flex-wrap:nowrap;gap:var(--gse-ui-formControl-helper-gap);place-content:stretch flex-start;padding:var(--gse-ui-formControl-helper-errorPadding);font-family:var(--gse-ui-formControl-helper-helperText-fontFamily);font-size:var(--gse-ui-formControl-helper-helperText-fontSize);line-height:var(--gse-ui-formControl-helper-helperText-lineHeight);color:var(--gse-ui-formControl-helper-errorColor)}.gux-form-field-error.gux-show{display:flex}.gux-form-field-error gux-icon{flex:0 0 auto;order:0;color:var(--gse-ui-formControl-helper-errorColor)}.gux-form-field-error .gux-message{flex:0 1 auto;align-self:auto;order:0}.gux-form-field-label{display:inline-flex;flex:1 0 auto}.gux-form-field-label ::slotted(label){min-inline-size:0}.gux-form-field-label ::slotted(gux-label-info-beta){padding-inline-start:var(--gse-ui-formControl-formField-gap)}.gux-form-field-label.gux-beside{position:relative;inset-block-start:var(--gse-ui-formControl-input-top);inline-size:fit-content;min-inline-size:var(--gse-ui-formControl-input-textfield-minWidth);max-inline-size:fit-content;margin-inline-end:var(--gse-ui-formControl-group-gapItems)}.gux-form-field-label.gux-above{padding-block-end:var(--gse-ui-formControl-formField-gap)}.gux-form-field-label.gux-screenreader{position:absolute;top:auto;left:-10000px;width:1px;height:1px;overflow:hidden}.gux-form-field-help{display:none;flex-direction:row;flex-wrap:nowrap;place-content:stretch flex-start;align-items:flex-start;justify-content:flex-start;padding-block-start:var(--gse-ui-formControl-formField-gap);font-family:var(--gse-ui-formControl-helper-helperText-fontFamily);font-size:var(--gse-ui-formControl-helper-helperText-fontSize);line-height:var(--gse-ui-formControl-helper-helperText-lineHeight);color:var(--gse-ui-formControl-helper-defaultColor)}.gux-form-field-help.gux-show{display:flex}.gux-form-field-help .gux-message{flex:0 1 auto;align-self:none;order:0}:host{display:block}::slotted(label){font-family:var(--gse-ui-formControl-label-textBold-fontFamily);font-size:var(--gse-ui-formControl-label-textBold-fontSize);font-weight:var(--gse-ui-formControl-label-textBold-fontWeight);line-height:var(--gse-ui-formControl-label-textBold-lineHeight);color:var(--gse-ui-formControl-label-labelColor)}.gux-input-and-error-container{display:flex;flex-grow:1;flex-direction:column;gap:var(--gse-ui-fileUpload-mainContainer-gap)}.gux-drop-container{box-sizing:border-box;display:flex;flex-direction:column;flex-wrap:nowrap;gap:var(--gse-ui-fileUpload-dragDrop-btnText-gap);margin-inline:0;font-family:var(--gse-ui-fileUpload-dragAndDrop-dropZone-text-fontFamily);font-size:var(--gse-ui-fileUpload-dragAndDrop-dropZone-text-fontSize);font-weight:var(--gse-ui-fileUpload-dragAndDrop-dropZone-text-fontWeight);line-height:var(--gse-ui-fileUpload-dragAndDrop-dropZone-text-lineHeight);color:var(--gse-ui-fileUpload-dragAndDrop-dropZoneText-color)}.gux-drop-container.gux-drop-zone{place-content:stretch center;align-items:center;min-block-size:var(--gse-ui-fileUpload-dragAndDrop-dropZone-minHeight);padding:20px;border:var(--gse-ui-fileUpload-dragAndDrop-dropZone-default-border-width) var(--gse-ui-fileUpload-dragAndDrop-dropZone-default-border-style) var(--gse-ui-fileUpload-dragAndDrop-dropZone-default-border-color);border-radius:var(--gse-ui-fileUpload-dropZone-borderRadius)}.gux-drop-container.gux-drop-zone.gux-drag-over:not(.gux-disabled){background-color:var(--gse-ui-fileUpload-dragAndDrop-dropZone-background-active);border:var(--gse-ui-fileUpload-dragAndDrop-dropZone-active-border-width) var(--gse-ui-fileUpload-dragAndDrop-dropZone-active-border-style) var(--gse-ui-fileUpload-dragAndDrop-dropZone-active-border-color)}.gux-drop-container.gux-drop-zone.gux-disabled{border-color:rgba(0, 0, 64, 0.2509803922)}.gux-drop-container.gux-drop-zone.gux-disabled .gux-drag-and-drop-text{opacity:0.5}.gux-offscreen{position:absolute;top:auto;left:-10000px;width:1px;height:1px;overflow:hidden}.gux-proxy-button{inline-size:fit-content;border-radius:var(--gse-ui-button-borderRadius)}.gux-proxy-button:focus-within{outline:var(--gse-semantic-focusOutline-md-borderWidth) solid var(--gse-semantic-border-focus);outline-offset:var(--gse-semantic-focusOutline-offset)}.gux-file-list{display:flex;flex-direction:column;gap:var(--gse-ui-fileUpload-fileCard-cardGroup-gap);inline-size:100%}";var P=function(e,i,o,r){var l=arguments.length,n=l<3?i:r===null?r=Object.getOwnPropertyDescriptor(i,o):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,i,o,r);else for(var d=e.length-1;d>=0;d--)(a=e[d])&&(n=(l<3?a(n):l>3?a(i,o,n):a(i,o))||n);return l>3&&n&&Object.defineProperty(i,o,n),n};const p=class{constructor(e){g(this,e),this.indicatorMark="required",this.dragAndDrop=!1,this.disabled=!1,this.hasError=!1,this.hasHelp=!1,this.required=!1,this.multiple=!1}onMutation(){this.labelInfo=this.root.querySelector("[slot=label-info]"),this.hasError=s(this.root,"error"),this.hasHelp=s(this.root,"help")}handleKeyup(e){var i,o;switch(e.key){case"Tab":{this.input.matches(":focus-visible")&&((i=this.labelInfo)===null||i===void 0||i.showTooltip(),this.hideLabelInfoTimeout=setTimeout(()=>{var r;(r=this.labelInfo)===null||r===void 0||r.hideTooltip()},6e3));break}case"Shift":break;default:{this.input.matches(":focus-visible")&&((o=this.labelInfo)===null||o===void 0||o.hideTooltip(),clearTimeout(this.hideLabelInfoTimeout));break}}}onFocusout(){var e;(e=this.labelInfo)===null||e===void 0||e.hideTooltip(),clearTimeout(this.hideLabelInfoTimeout)}onGuxRemoveFile(e){this.removeFile(e.detail)}async componentWillLoad(){this.getI18nValue=await c(this.root,q),this.setInput(),this.hasError=s(this.root,"error"),this.hasHelp=s(this.root,"help"),this.labelInfo=this.root.querySelector("[slot=label-info]"),b(this.root)}disconnectedCallback(){var e,i,o;(e=this.disabledObserver)===null||e===void 0||e.disconnect(),(i=this.requiredObserver)===null||i===void 0||i.disconnect(),(o=this.multipleObserver)===null||o===void 0||o.disconnect()}render(){return t(F,{key:"8cb62412baa8938600c8ef9257d658f55a383fe1",labelPosition:"above"},t(y,{key:"33d2d7bbffce478329df60a9ea89d17803ea72a5",position:"above",required:this.required},t("slot",{key:"1ec2a2e2d5639c52883f355672f0959e28c42fe0",name:"label"}),t("gux-form-field-label-indicator",{key:"4a3b9d1fefdcbec08e2ab5220db5fdc7382bcc3b",variant:this.indicatorMark,required:this.required}),t("slot",{key:"71122a7a2fe4f124d2bd0aa5086f673cdf1c3518",name:"label-info"})),t("div",{key:"719ad765ac661bbc40a22454833a6d5e15d5d49f",class:"gux-input-and-error-container"},t(x,{key:"bb6d4f4f4b58272eb3b67c7e5012d435e29dceb7",show:this.hasHelp},t("slot",{key:"77c32b2d8da20fc58f6aa1ddd14753c09609af19",name:"help"})),this.renderInputSlot(),t(v,{key:"b6a7f30194e9fb1e259c0017a6b8e80ece24dc8d",show:this.hasError},t("slot",{key:"5d9766c44b2e4e71bf6f99d2522d365f58b8a2e3",name:"error"})),this.renderFileList()))}setInput(){this.input=D(this.root,'input[type="file"][slot="input"]'),this.input.addEventListener("input",()=>{u(this.root)}),w(this.input),this.disabled=this.input.disabled,this.required=this.input.required,this.multiple=this.input.multiple,this.disabledObserver=I(this.input,e=>{this.disabled=e}),this.requiredObserver=k(this.input,e=>{this.required=e}),this.multipleObserver=T(this.input,e=>{this.multiple=e}),C(this.root,this.input)}getDropZoneText(){return this.multiple?this.getI18nValue("dragAndDropFilesInstructions"):this.getI18nValue("dragAndDropFileInstructions")}getProxyButtonText(){var e,i,o,r;return this.dragAndDrop?this.getI18nValue("clickToUpload"):this.multiple?((i=(e=this.input)===null||e===void 0?void 0:e.files)===null||i===void 0?void 0:i.length)>0?this.getI18nValue("changeFiles"):this.getI18nValue("uploadFiles"):((r=(o=this.input)===null||o===void 0?void 0:o.files)===null||r===void 0?void 0:r.length)>0?this.getI18nValue("changeFile"):this.getI18nValue("uploadFile")}removeFile(e){const i=this.input.files,o=new DataTransfer;for(let r=0;r<i.length;r++)e!==r&&o.items.add(i[r]);this.modifyInputFiles(o.files)}modifyInputFiles(e){this.input.files=e,f(this.root,"input"),f(this.root,"change"),u(this.root)}onProxyFileButtonClick(e){e.preventDefault(),e.stopImmediatePropagation(),this.input.focus(),this.input.click()}onDrop(e){if(e.preventDefault(),e.stopPropagation(),this.disabled)return;const i=this.input.files,o=e.dataTransfer.items,r=new DataTransfer;if(this.multiple)for(let l=0;l<i.length;l++)r.items.add(i[l]);for(let l=0;l<o.length;l++){const n=o[l];if(n.kind==="file"&&n.webkitGetAsEntry().isFile&&(r.items.add(n.getAsFile()),!this.multiple))break}this.dropContainer.classList.remove("gux-drag-over"),this.modifyInputFiles(r.files)}onDragOver(e){e.preventDefault(),e.stopPropagation(),this.disabled||this.dropContainer.classList.add("gux-drag-over")}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this.dropContainer.classList.remove("gux-drag-over")}renderFileList(){const e=Array.from(this.input.files||new DataTransfer().files);return e.length===0?null:t("div",{class:"gux-file-list"},e.map((i,o)=>t("slot",{name:`file-${o}`},t("gux-file-list-item",{name:i.name,index:o,disabled:this.disabled}))))}renderInputSlot(){return t("div",{ref:e=>this.dropContainer=e,class:{"gux-drop-container":!0,"gux-drop-zone":this.dragAndDrop,"gux-disabled":this.disabled},"aria-disabled":this.disabled?"true":"false",onDrop:e=>this.onDrop(e),onDragOver:e=>this.onDragOver(e),onDragEnter:e=>this.onDragOver(e),onDragLeave:e=>this.onDragLeave(e)},this.dragAndDrop&&t("div",{class:"gux-drag-and-drop-text"},this.getDropZoneText()),t("div",{class:"gux-proxy-button"},t("gux-button-slot",{accent:"tertiary"},t("button",{tabIndex:-1,type:"button",disabled:this.disabled,onClick:e=>this.onProxyFileButtonClick(e)},t("div",null,this.getProxyButtonText()))),t("div",{class:"gux-offscreen"},t("slot",{name:"input",onSlotchange:()=>this.setInput()}))))}get root(){return h(this)}};P([m({childList:!0,subtree:!0})],p.prototype,"onMutation",null);p.style=S;export{p as gux_form_field_file_beta};
