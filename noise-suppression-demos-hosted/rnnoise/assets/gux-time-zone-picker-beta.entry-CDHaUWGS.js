import{r as h,h as o,g as p}from"./index-RhTaIPoL.js";import{b as g}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{f as x,g as Z,t as T}from"./time-zone-RWUera2Z-N1h6kK8c.js";import{t as b}from"./usage-BYFiy2rf-lhiVWKSr.js";import{s as l}from"./simulate-native-event-BMRf5pjV-BcLDngo1.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const y="gux-dropdown .zone-header{padding-block:8px 4px;padding-inline:12px;color:#6b7585;text-transform:uppercase}gux-dropdown gux-option{padding:var(--gse-ui-menu-option-padding)}gux-dropdown gux-option.gux-has-defaults{block-size:auto}gux-dropdown gux-option .gux-option-wrapper{display:flex;flex-direction:column}gux-dropdown gux-option .gux-default-zone{color:#626e84}",L=class{constructor(e){h(this,e),this.hasError=!1,this.disabled=!1,this.required=!1,this.searchString=""}on(e){this.searchString=e.detail,this.filteredZoneList=this.filterTimeZoneList(this.timeZoneList),this.timeZoneOptionElements=this.renderTimeZones(this.filteredZoneList)}async componentWillLoad(){b(this.root),this.i18n=await g(this.root,T),this.timeZoneList=this.getTimeZoneOptionsList(),this.filteredZoneList=this.timeZoneList,this.timeZoneOptionElements=this.renderTimeZones(this.filteredZoneList)}componentDidLoad(){this.applyEventListeners()}applyEventListeners(){var e;const s=(e=this.root)===null||e===void 0?void 0:e.shadowRoot.querySelector("gux-dropdown");s&&s.addEventListener("input",t=>{const i=t.target,a=i==null?void 0:i.value;this.value=a,l(this.root,"input"),l(this.root,"change")})}filterTimeZoneList(e){const s=this.searchString;return e.filter(t=>this.getFormattedTimeZoneOption(t).toLowerCase().includes(s.toLowerCase()))}getTimeZoneOption(e){const s=this.i18n(e.name),t=e.countryName?this.i18n(e.countryName):void 0;if(!s)return;const i=x(e.currentTimeOffsetInMinutes),a=this.i18n("UTC"),n=`${s}`,r=` (${a}${i})`,u=`${r}`,d=n.replace(/_/g," "),c=`${t}`,f="",m=n.startsWith("Etc/GMT")?2:1;return{value:e.name,localizedGroupName:s,formattedOffset:i,displayTextNameFormatted:d,displayTextOffset:r,baseDisplayOffsetText:u,countryName:c,defaultZone:f,priority:m}}getFormattedTimeZoneOption(e){return e.displayTextNameFormatted.startsWith("Etc/GMT")?e.displayTextNameFormatted.concat(e.baseDisplayOffsetText):e.displayTextNameFormatted.split("/").pop().concat(", ",e.countryName,e.baseDisplayOffsetText)}getTimeZoneOptionsList(){const e=Z(),s=[];return e.forEach(t=>{const i=this.getTimeZoneOption(t);i&&s.push(i)}),s.sort((t,i)=>{var a;return t.priority-i.priority||((a=t.displayTextNameFormatted)===null||a===void 0?void 0:a.localeCompare(i.displayTextNameFormatted))})}getDefaultZones(){return[this.workspaceDefault,this.localDefault,this.customDefault].filter(e=>!!e)}getDefaultZoneList(){const e=this.getDefaultZones(),s=this.timeZoneList.reduce((t,i)=>e.includes(i.value)?t.concat([Object.assign({},i)]):t,[]);return s.forEach(t=>{this.workspaceDefault===this.localDefault?t.defaultZone=`${this.i18n("localAndWorkspaceDefault")}`:t.value===this.workspaceDefault?t.defaultZone=`${this.i18n("workspaceDefault")}`:t.value===this.localDefault&&(t.defaultZone=`${this.i18n("localDefault")}`),t.value===this.customDefault&&(t.defaultZone=`(${this.customDefaultLabel})`)}),s}renderTimeZones(e){return e.map(s=>o("gux-option",{class:{"gux-has-defaults":s.defaultZone!==""},value:s.value},o("div",{class:"gux-option-wrapper"},o("div",null,this.getFormattedTimeZoneOption(s)),o("span",{class:"gux-default-zone"},s.defaultZone))))}renderDefaultsList(){const e=this.renderTimeZones(this.getDefaultZoneList());if(e.length)return o("gux-option-group-beta",{label:this.i18n("default")},e)}renderAllTimeZoneOptionsList(){return o("gux-option-group-beta",{label:this.i18n("all")},this.timeZoneOptionElements)}render(){return o("gux-dropdown",{key:"e76ff880ccb7ca1f614865ab889c9ac9db2a49f4",class:{"has-defaults":!!this.workspaceDefault||!!this.localDefault||!!this.customDefault},"filter-type":"custom",placeholder:this.i18n("selectZone"),value:this.value,hasError:this.hasError,disabled:this.disabled},o("gux-listbox",{key:"1744eb0e16bd59be3b29d8b7bb42f063f42f3c0b","aria-label":this.i18n("timeZones")},this.renderDefaultsList(),this.renderAllTimeZoneOptionsList()))}get root(){return p(this)}};L.style=y;export{L as gux_time_zone_picker_beta};
