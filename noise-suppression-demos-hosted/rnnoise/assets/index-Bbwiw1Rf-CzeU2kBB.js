var ie=Object.defineProperty;var re=(t,e,n)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>re(t,typeof e!="symbol"?e+"":e,n);import{a as oe}from"./index-RhTaIPoL.js";import{g as he}from"./get-closest-element-Cd4R0amv-C_5KDHD-.js";function R(t,e){const n=e&&e.cache?e.cache:me,s=e&&e.serializer?e.serializer:fe;return(e&&e.strategy?e.strategy:ue)(t,{cache:n,serializer:s})}function ae(t){return t==null||typeof t=="number"||typeof t=="boolean"}function ce(t,e,n,s){const i=ae(s)?s:n(s);let o=e.get(i);return typeof o>"u"&&(o=t.call(this,s),e.set(i,o)),o}function W(t,e,n){const s=Array.prototype.slice.call(arguments,3),i=n(s);let o=e.get(i);return typeof o>"u"&&(o=t.apply(this,s),e.set(i,o)),o}function $(t,e,n,s,i){return n.bind(e,t,s,i)}function ue(t,e){const n=t.length===1?ce:W;return $(t,this,n,e.cache.create(),e.serializer)}function le(t,e){return $(t,this,W,e.cache.create(),e.serializer)}const fe=function(){return JSON.stringify(arguments)};class pe{constructor(){E(this,"cache");this.cache=Object.create(null)}get(e){return this.cache[e]}set(e,n){this.cache[e]=n}}const me={create:function(){return new pe}},C={variadic:le},Ee=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function be(t){const e={};return t.replace(Ee,n=>{const s=n.length;switch(n[0]){case"G":e.era=s===4?"long":s===5?"narrow":"short";break;case"y":e.year=s===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][s-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][s-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=s===4?"long":s===5?"narrow":"short";break;case"e":if(s<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][s-4];break;case"c":if(s<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][s-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][s-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][s-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][s-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][s-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][s-1];break;case"s":e.second=["numeric","2-digit"][s-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=s<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}const ge=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function He(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");const e=t.split(ge).filter(s=>s.length>0),n=[];for(const s of e){let i=s.split("/");if(i.length===0)throw new Error("Invalid number skeleton");const[o,...h]=i;for(const c of h)if(c.length===0)throw new Error("Invalid number skeleton");n.push({stem:o,options:h})}return n}function Be(t){return t.replace(/^(.*?)-/,"")}const D=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Z=/^(@+)?(\+|#+)?[rs]?$/g,Te=/(\*)(0+)|(#+)(0+)|(0+)/g,z=/^(0+)$/;function F(t){const e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Z,function(n,s,i){return typeof i!="string"?(e.minimumSignificantDigits=s.length,e.maximumSignificantDigits=s.length):i==="+"?e.minimumSignificantDigits=s.length:s[0]==="#"?e.maximumSignificantDigits=s.length:(e.minimumSignificantDigits=s.length,e.maximumSignificantDigits=s.length+(typeof i=="string"?i.length:0)),""}),e}function Q(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function _e(t){let e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){const n=t.slice(0,2);if(n==="+!"?(e.signDisplay="always",t=t.slice(2)):n==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!z.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function v(t){const e={},n=Q(t);return n||e}function ye(t){let e={};for(const n of t){switch(n.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=n.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=Be(n.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e={...e,notation:"scientific",...n.options.reduce((o,h)=>({...o,...v(h)}),{})};continue;case"engineering":e={...e,notation:"engineering",...n.options.reduce((o,h)=>({...o,...v(h)}),{})};continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(n.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(Te,function(o,h,c,r,l,a){if(h)e.minimumIntegerDigits=c.length;else{if(r&&l)throw new Error("We currently do not support maximum integer digits");if(a)throw new Error("We currently do not support exact integer digits")}return""});continue}if(z.test(n.stem)){e.minimumIntegerDigits=n.stem.length;continue}if(D.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(D,function(h,c,r,l,a,u){return r==="*"?e.minimumFractionDigits=c.length:l&&l[0]==="#"?e.maximumFractionDigits=l.length:a&&u?(e.minimumFractionDigits=a.length,e.maximumFractionDigits=a.length+u.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});const o=n.options[0];o==="w"?e={...e,trailingZeroDisplay:"stripIfInteger"}:o&&(e={...e,...F(o)});continue}if(Z.test(n.stem)){e={...e,...F(n.stem)};continue}const s=Q(n.stem);s&&(e={...e,...s});const i=_e(n.stem);i&&(e={...e,...i})}return e}let b=(function(t){return t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag",t})({}),L=(function(t){return t[t.number=0]="number",t[t.dateTime=1]="dateTime",t})({});function k(t){return t.type===b.literal}function Ae(t){return t.type===b.argument}function q(t){return t.type===b.number}function J(t){return t.type===b.date}function Y(t){return t.type===b.time}function K(t){return t.type===b.select}function ee(t){return t.type===b.plural}function de(t){return t.type===b.pound}function te(t){return t.type===b.tag}function ne(t){return!!(t&&typeof t=="object"&&t.type===L.number)}function U(t){return!!(t&&typeof t=="object"&&t.type===L.dateTime)}let m=(function(t){return t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG",t})({});const se=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,d={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GS:["H","h","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ku-SY":["H","hB"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function Se(t,e){let n="";for(let s=0;s<t.length;s++){const i=t.charAt(s);if(i==="j"){let o=0;for(;s+1<t.length&&t.charAt(s+1)===i;)o++,s++;let h=1+(o&1),c=o<2?1:3+(o>>1),r="a",l=Le(e);for((l=="H"||l=="k")&&(c=0);c-- >0;)n+=r;for(;h-- >0;)n=l+n}else i==="J"?n+="H":n+=i}return n}function Le(t){let e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}const n=t.language;let s;return n!=="root"&&(s=t.maximize().region),(d[s||""]||d[n||""]||d[`${n}-001`]||d["001"])[0]}const Ne=new RegExp(`^${se.source}*`),Pe=new RegExp(`${se.source}*$`);function f(t,e){return{start:t,end:e}}const Ie=!!Object.fromEntries,Re=!!String.prototype.trimStart,Ce=!!String.prototype.trimEnd,V=Ie?Object.fromEntries:function(e){const n={};for(const[s,i]of e)n[s]=i;return n},Oe=Re?function(e){return e.trimStart()}:function(e){return e.replace(Ne,"")},Me=Ce?function(e){return e.trimEnd()}:function(e){return e.replace(Pe,"")},X=new RegExp("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");function Ue(t,e){return X.lastIndex=e,X.exec(t)[1]??""}class Ge{constructor(e,n={}){E(this,"message");E(this,"position");E(this,"locale");E(this,"ignoreTag");E(this,"requiresOtherClause");E(this,"shouldParseSkeletons");this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}parse(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)}parseMessage(e,n,s){let i=[];for(;!this.isEOF();){const o=this.char();if(o===123){const h=this.parseArgument(e,s);if(h.err)return h;i.push(h.val)}else{if(o===125&&e>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){const h=this.clonePosition();this.bump(),i.push({type:b.pound,location:f(h,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(s)break;return this.error(m.UNMATCHED_CLOSING_TAG,f(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&G(this.peek()||0)){const h=this.parseTag(e,n);if(h.err)return h;i.push(h.val)}else{const h=this.parseLiteral(e,n);if(h.err)return h;i.push(h.val)}}}return{val:i,err:null}}parseTag(e,n){const s=this.clonePosition();this.bump();const i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:b.literal,value:`<${i}/>`,location:f(s,this.clonePosition())},err:null};if(this.bumpIf(">")){const o=this.parseMessage(e+1,n,!0);if(o.err)return o;const h=o.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!G(this.char()))return this.error(m.INVALID_TAG,f(c,this.clonePosition()));const r=this.clonePosition(),l=this.parseTagName();return i!==l?this.error(m.UNMATCHED_CLOSING_TAG,f(r,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:b.tag,value:i,children:h,location:f(s,this.clonePosition())},err:null}:this.error(m.INVALID_TAG,f(c,this.clonePosition())))}else return this.error(m.UNCLOSED_TAG,f(s,this.clonePosition()))}else return this.error(m.INVALID_TAG,f(s,this.clonePosition()))}parseTagName(){const e=this.offset();for(this.bump();!this.isEOF()&&De(this.char());)this.bump();return this.message.slice(e,this.offset())}parseLiteral(e,n){const s=this.clonePosition();let i="";for(;;){const h=this.tryParseQuote(n);if(h){i+=h;continue}const c=this.tryParseUnquoted(e,n);if(c){i+=c;continue}const r=this.tryParseLeftAngleBracket();if(r){i+=r;continue}break}const o=f(s,this.clonePosition());return{val:{type:b.literal,value:i,location:o},err:null}}tryParseLeftAngleBracket(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!we(this.peek()||0))?(this.bump(),"<"):null}tryParseQuote(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();const n=[this.char()];for(this.bump();!this.isEOF();){const s=this.char();if(s===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(s);this.bump()}return String.fromCodePoint(...n)}tryParseUnquoted(e,n){if(this.isEOF())return null;const s=this.char();return s===60||s===123||s===35&&(n==="plural"||n==="selectordinal")||s===125&&e>0?null:(this.bump(),String.fromCodePoint(s))}parseArgument(e,n){const s=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(m.EXPECT_ARGUMENT_CLOSING_BRACE,f(s,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(m.EMPTY_ARGUMENT,f(s,this.clonePosition()));let i=this.parseIdentifierIfPossible().value;if(!i)return this.error(m.MALFORMED_ARGUMENT,f(s,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(m.EXPECT_ARGUMENT_CLOSING_BRACE,f(s,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:b.argument,value:i,location:f(s,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(m.EXPECT_ARGUMENT_CLOSING_BRACE,f(s,this.clonePosition())):this.parseArgumentOptions(e,n,i,s);default:return this.error(m.MALFORMED_ARGUMENT,f(s,this.clonePosition()))}}parseIdentifierIfPossible(){const e=this.clonePosition(),n=this.offset(),s=Ue(this.message,n),i=n+s.length;this.bumpTo(i);const o=this.clonePosition(),h=f(e,o);return{value:s,location:h}}parseArgumentOptions(e,n,s,i){let o=this.clonePosition(),h=this.parseIdentifierIfPossible().value,c=this.clonePosition();switch(h){case"":return this.error(m.EXPECT_ARGUMENT_TYPE,f(o,c));case"number":case"date":case"time":{this.bumpSpace();let r=null;if(this.bumpIf(",")){this.bumpSpace();const u=this.clonePosition(),p=this.parseSimpleArgStyleIfPossible();if(p.err)return p;const g=Me(p.val);if(g.length===0)return this.error(m.EXPECT_ARGUMENT_STYLE,f(this.clonePosition(),this.clonePosition()));const B=f(u,this.clonePosition());r={style:g,styleLocation:B}}const l=this.tryParseArgumentClose(i);if(l.err)return l;const a=f(i,this.clonePosition());if(r&&r.style.startsWith("::")){let u=Oe(r.style.slice(2));if(h==="number"){const p=this.parseNumberSkeletonFromString(u,r.styleLocation);return p.err?p:{val:{type:b.number,value:s,location:a,style:p.val},err:null}}else{if(u.length===0)return this.error(m.EXPECT_DATE_TIME_SKELETON,a);let p=u;this.locale&&(p=Se(u,this.locale));const g={type:L.dateTime,pattern:p,location:r.styleLocation,parsedOptions:this.shouldParseSkeletons?be(p):{}};return{val:{type:h==="date"?b.date:b.time,value:s,location:a,style:g},err:null}}}return{val:{type:h==="number"?b.number:h==="date"?b.date:b.time,value:s,location:a,style:(r==null?void 0:r.style)??null},err:null}}case"plural":case"selectordinal":case"select":{const r=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(m.EXPECT_SELECT_ARGUMENT_OPTIONS,f(r,{...r}));this.bumpSpace();let l=this.parseIdentifierIfPossible(),a=0;if(h!=="select"&&l.value==="offset"){if(!this.bumpIf(":"))return this.error(m.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,f(this.clonePosition(),this.clonePosition()));this.bumpSpace();const B=this.tryParseDecimalInteger(m.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,m.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(B.err)return B;this.bumpSpace(),l=this.parseIdentifierIfPossible(),a=B.val}const u=this.tryParsePluralOrSelectOptions(e,h,n,l);if(u.err)return u;const p=this.tryParseArgumentClose(i);if(p.err)return p;const g=f(i,this.clonePosition());return h==="select"?{val:{type:b.select,value:s,options:V(u.val),location:g},err:null}:{val:{type:b.plural,value:s,options:V(u.val),offset:a,pluralType:h==="plural"?"cardinal":"ordinal",location:g},err:null}}default:return this.error(m.INVALID_ARGUMENT_TYPE,f(o,c))}}tryParseArgumentClose(e){return this.isEOF()||this.char()!==125?this.error(m.EXPECT_ARGUMENT_CLOSING_BRACE,f(e,this.clonePosition())):(this.bump(),{val:!0,err:null})}parseSimpleArgStyleIfPossible(){let e=0;const n=this.clonePosition();for(;!this.isEOF();)switch(this.char()){case 39:{this.bump();let i=this.clonePosition();if(!this.bumpUntil("'"))return this.error(m.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,f(i,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}return{val:this.message.slice(n.offset,this.offset()),err:null}}parseNumberSkeletonFromString(e,n){let s=[];try{s=He(e)}catch{return this.error(m.INVALID_NUMBER_SKELETON,n)}return{val:{type:L.number,tokens:s,location:n,parsedOptions:this.shouldParseSkeletons?ye(s):{}},err:null}}tryParsePluralOrSelectOptions(e,n,s,i){let o=!1;const h=[],c=new Set;let{value:r,location:l}=i;for(;;){if(r.length===0){const g=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){const B=this.tryParseDecimalInteger(m.EXPECT_PLURAL_ARGUMENT_SELECTOR,m.INVALID_PLURAL_ARGUMENT_SELECTOR);if(B.err)return B;l=f(g,this.clonePosition()),r=this.message.slice(g.offset,this.offset())}else break}if(c.has(r))return this.error(n==="select"?m.DUPLICATE_SELECT_ARGUMENT_SELECTOR:m.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);r==="other"&&(o=!0),this.bumpSpace();const a=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?m.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:m.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,f(this.clonePosition(),this.clonePosition()));const u=this.parseMessage(e+1,n,s);if(u.err)return u;const p=this.tryParseArgumentClose(a);if(p.err)return p;h.push([r,{value:u.val,location:f(a,this.clonePosition())}]),c.add(r),this.bumpSpace(),{value:r,location:l}=this.parseIdentifierIfPossible()}return h.length===0?this.error(n==="select"?m.EXPECT_SELECT_ARGUMENT_SELECTOR:m.EXPECT_PLURAL_ARGUMENT_SELECTOR,f(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!o?this.error(m.MISSING_OTHER_CLAUSE,f(this.clonePosition(),this.clonePosition())):{val:h,err:null}}tryParseDecimalInteger(e,n){let s=1;const i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(s=-1);let o=!1,h=0;for(;!this.isEOF();){const r=this.char();if(r>=48&&r<=57)o=!0,h=h*10+(r-48),this.bump();else break}const c=f(i,this.clonePosition());return o?(h*=s,Number.isSafeInteger(h)?{val:h,err:null}:this.error(n,c)):this.error(e,c)}offset(){return this.position.offset}isEOF(){return this.offset()===this.message.length}clonePosition(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}}char(){const e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");const n=this.message.codePointAt(e);if(n===void 0)throw Error(`Offset ${e} is at invalid UTF-16 code unit boundary`);return n}error(e,n){return{val:null,err:{kind:e,message:this.message,location:n}}}bump(){if(this.isEOF())return;const e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}bumpIf(e){if(this.message.startsWith(e,this.offset())){for(let n=0;n<e.length;n++)this.bump();return!0}return!1}bumpUntil(e){const n=this.offset(),s=this.message.indexOf(e,n);return s>=0?(this.bumpTo(s),!0):(this.bumpTo(this.message.length),!1)}bumpTo(e){if(this.offset()>e)throw Error(`targetOffset ${e} must be greater than or equal to the current offset ${this.offset()}`);for(e=Math.min(e,this.message.length);;){const n=this.offset();if(n===e)break;if(n>e)throw Error(`targetOffset ${e} is at invalid UTF-16 code unit boundary`);if(this.bump(),this.isEOF())break}}bumpSpace(){for(;!this.isEOF()&&Fe(this.char());)this.bump()}peek(){if(this.isEOF())return null;const e=this.char(),n=this.offset();return this.message.charCodeAt(n+(e>=65536?2:1))??null}}function G(t){return t>=97&&t<=122||t>=65&&t<=90}function we(t){return G(t)||t===47}function De(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Fe(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function w(t){t.forEach(e=>{if(delete e.location,K(e)||ee(e))for(const n in e.options)delete e.options[n].location,w(e.options[n].value);else q(e)&&ne(e.style)||(J(e)||Y(e))&&U(e.style)?delete e.style.location:te(e)&&w(e.children)})}function ve(t,e={}){e={shouldParseSkeletons:!0,requiresOtherClause:!0,...e};const n=new Ge(t,e).parse();if(n.err){const s=SyntaxError(m[n.err.kind]);throw s.location=n.err.location,s.originalMessage=n.err.message,s}return e!=null&&e.captureLocation||w(n.val),n.val}let P=(function(t){return t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API",t})({});class I extends Error{constructor(n,s,i){super(n);E(this,"code");E(this,"originalMessage");this.code=s,this.originalMessage=i}toString(){return`[formatjs Error: ${this.code}] ${this.message}`}}class x extends I{constructor(e,n,s,i){super(`Invalid values for "${e}": "${n}". Options are "${Object.keys(s).join('", "')}"`,P.INVALID_VALUE,i)}}class ke extends I{constructor(e,n,s){super(`Value for "${e}" must be of type ${n}`,P.INVALID_VALUE,s)}}class Ve extends I{constructor(e,n){super(`The intl string context variable "${e}" was not provided to the string "${n}"`,P.MISSING_VALUE,n)}}let T=(function(t){return t[t.literal=0]="literal",t[t.object=1]="object",t})({});function Xe(t){return t.length<2?t:t.reduce((e,n)=>{const s=e[e.length-1];return!s||s.type!==T.literal||n.type!==T.literal?e.push(n):s.value+=n.value,e},[])}function xe(t){return typeof t=="function"}function S(t,e,n,s,i,o,h){if(t.length===1&&k(t[0]))return[{type:T.literal,value:t[0].value}];const c=[];for(const r of t){if(k(r)){c.push({type:T.literal,value:r.value});continue}if(de(r)){typeof o=="number"&&c.push({type:T.literal,value:n.getNumberFormat(e).format(o)});continue}const{value:l}=r;if(!(i&&l in i))throw new Ve(l,h);let a=i[l];if(Ae(r)){(!a||typeof a=="string"||typeof a=="number"||typeof a=="bigint")&&(a=typeof a=="string"||typeof a=="number"||typeof a=="bigint"?String(a):""),c.push({type:typeof a=="string"?T.literal:T.object,value:a});continue}if(J(r)){const u=typeof r.style=="string"?s.date[r.style]:U(r.style)?r.style.parsedOptions:void 0;c.push({type:T.literal,value:n.getDateTimeFormat(e,u).format(a)});continue}if(Y(r)){const u=typeof r.style=="string"?s.time[r.style]:U(r.style)?r.style.parsedOptions:s.time.medium;c.push({type:T.literal,value:n.getDateTimeFormat(e,u).format(a)});continue}if(q(r)){const u=typeof r.style=="string"?s.number[r.style]:ne(r.style)?r.style.parsedOptions:void 0;if(u&&u.scale){const p=u.scale||1;if(typeof a=="bigint"){if(!Number.isInteger(p))throw new TypeError(`Cannot apply fractional scale ${p} to bigint value. Scale must be an integer when formatting bigint.`);a=a*BigInt(p)}else a=a*p}c.push({type:T.literal,value:n.getNumberFormat(e,u).format(a)});continue}if(te(r)){const{children:u,value:p}=r,g=i[p];if(!xe(g))throw new ke(p,"function",h);const B=S(u,e,n,s,i,o);let _=g(B.map(A=>A.value));Array.isArray(_)||(_=[_]),c.push(..._.map(A=>({type:typeof A=="string"?T.literal:T.object,value:A})))}if(K(r)){const u=a,p=(Object.prototype.hasOwnProperty.call(r.options,u)?r.options[u]:void 0)||r.options.other;if(!p)throw new x(r.value,a,Object.keys(r.options),h);c.push(...S(p.value,e,n,s,i));continue}if(ee(r)){const u=`=${a}`;let p=Object.prototype.hasOwnProperty.call(r.options,u)?r.options[u]:void 0;if(!p){if(!Intl.PluralRules)throw new I(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,P.MISSING_INTL_API,h);const B=typeof a=="bigint"?Number(a):a,_=n.getPluralRules(e,{type:r.pluralType}).select(B-(r.offset||0));p=(Object.prototype.hasOwnProperty.call(r.options,_)?r.options[_]:void 0)||r.options.other}if(!p)throw new x(r.value,a,Object.keys(r.options),h);const g=typeof a=="bigint"?Number(a):a;c.push(...S(p.value,e,n,s,i,g-(r.offset||0)));continue}}return Xe(c)}function je(t,e){return e?{...t,...e,...Object.keys(t).reduce((n,s)=>(n[s]={...t[s],...e[s]},n),{})}:t}function We(t,e){return e?Object.keys(t).reduce((n,s)=>(n[s]=je(t[s],e[s]),n),{...t}):t}function O(t){return{create(){return{get(e){return t[e]},set(e,n){t[e]=n}}}}}function $e(t={number:{},dateTime:{},pluralRules:{}}){return{getNumberFormat:R((...e)=>new Intl.NumberFormat(...e),{cache:O(t.number),strategy:C.variadic}),getDateTimeFormat:R((...e)=>new Intl.DateTimeFormat(...e),{cache:O(t.dateTime),strategy:C.variadic}),getPluralRules:R((...e)=>new Intl.PluralRules(...e),{cache:O(t.pluralRules),strategy:C.variadic})}}const H=class H{constructor(e,n=H.defaultLocale,s,i){E(this,"ast");E(this,"locales");E(this,"resolvedLocale");E(this,"formatters");E(this,"formats");E(this,"message");E(this,"formatterCache",{number:{},dateTime:{},pluralRules:{}});E(this,"format",e=>{const n=this.formatToParts(e);if(n.length===1)return n[0].value;const s=n.reduce((i,o)=>(!i.length||o.type!==T.literal||typeof i[i.length-1]!="string"?i.push(o.value):i[i.length-1]+=o.value,i),[]);return s.length<=1?s[0]||"":s});E(this,"formatToParts",e=>S(this.ast,this.locales,this.formatters,this.formats,e,void 0,this.message));E(this,"resolvedOptions",()=>{var e;return{locale:((e=this.resolvedLocale)==null?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(this.locales)[0]}});E(this,"getAst",()=>this.ast);if(this.locales=n,this.resolvedLocale=H.resolveLocale(n),typeof e=="string"){if(this.message=e,!H.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");const{...o}=i||{};this.ast=H.__parse(e,{...o,locale:this.resolvedLocale})}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=We(H.formats,s),this.formatters=i&&i.formatters||$e(this.formatterCache)}static get defaultLocale(){return H.memoizedDefaultLocale||(H.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),H.memoizedDefaultLocale}};E(H,"memoizedDefaultLocale",null),E(H,"resolveLocale",e=>{if(typeof Intl.Locale>"u")return;const n=Intl.NumberFormat.supportedLocalesOf(e);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof e=="string"?e:e[0])}),E(H,"__parse",ve),E(H,"formats",{number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}});let N=H;const M={},Ze=(t="en")=>oe(`i18n/genesys-webcomponents.i18n.${t}.json`),ze=async(t,e)=>{if(!M[e]){const n=Ze(e),i=await(await fetch(n)).json();M[e]=i}return M[e][t]};var j=["ar","cs","da","de","en","es-es","es","fi","fr-ca","fr","he","hi","it","ja","ko","nl","no","pl","pt-br","pt-pt","ru","sv","th","tr","uk","zh-cn","zh-tw"];const Qe=6,qe=1,Je=1,Ye=1,Ke=0,et=1,tt=1,nt=1,st=0,it=0,rt=1,ot=0,ht=0,at=1,ct=1,ut=1,lt=1,ft=1,pt=0,mt=1,Et=1;var bt={ar:Qe,cs:qe,da:Je,de:Ye,en:Ke,"es-es":1,es:et,fi:tt,"fr-ca":0,fr:nt,he:st,hi:it,it:rt,ja:ot,ko:ht,nl:at,no:ct,pl:ut,"pt-br":0,"pt-pt":0,ru:lt,sv:ft,th:pt,tr:mt,uk:Et,"zh-cn":1,"zh-tw":0};const y="en";async function dt(t,e,n){let s=e,i="en";t!==void 0&&(i=Ht(t),s=await gt(t,e,i,n));const o=Object.entries(s).reduce((c,[r,l])=>(c.set(r,new N(l,i)),c),new Map),h=Object.entries(e).reduce((c,[r,l])=>(c.set(r,new N(l,y)),c),new Map);return(c,r)=>{var l,a;let u=(l=o.get(c))===null||l===void 0?void 0:l.format(r);return u||(u=(a=h.get(c))===null||a===void 0?void 0:a.format(r),console.warn(`No localized string available for "${c}-${u}" for "${i}" locale. Falling back to English translation.`)),u}}async function gt(t,e,n,s){const i=s||t.tagName.toLocaleLowerCase().replace(/-beta$/,"");let o;if(t["i18n-resources"])o=t["i18n-resources"];else if(n!==y)try{o=await ze(i,n)}catch{o=null}return o||(o=e),o}function Ht(t){const e=Bt(t),n=e.split(/[_-]/)[0];return j.indexOf(e)>=0?e:j.indexOf(n)>=0?n:y}function Bt(t){const e=he("[lang]",t);return e&&e.lang?e.lang.toLowerCase():y}function Tt(t=y){const e=bt;return e[t]?e[t]:e[y]}function St(t=y){return((Tt(t)-1)%7+7)%7+1}export{St as a,dt as b,Tt as c,Ht as g,j as l};
