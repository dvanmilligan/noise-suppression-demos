import{r as u,c as h,h as a,g as f}from"./index-RhTaIPoL.js";import{a as m,c as g,o as v,f as b,s as E,h as x,b as k}from"./floating-ui.dom-s4o__4X6-DwnQVfa1.js";import{a as y}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{O as P}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{t as w}from"./usage-BYFiy2rf-lhiVWKSr.js";import{f as c}from"./find-element-by-id-Cr5bTKWF-DntMpzyb.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const O=":popover-open{position:absolute;inset:unset}.gux-popover-wrapper{position:fixed;inset-block-start:0;inset-inline-start:0;z-index:var(--gse-semantic-zIndex-popover);display:inline-block;padding-block:8px;padding-inline:0;overflow-y:hidden;background-color:var(--gse-ui-popover-backgroundColor);border:none;border-radius:var(--gse-ui-popover-borderRadius);box-shadow:var(--gse-ui-popover-boxShadow)}.gux-popover-wrapper.gux-hidden{display:none}.gux-popover-wrapper{}.gux-popover-wrapper .gux-arrow{position:absolute;inline-size:var(--gse-ui-popover-anchor-width);block-size:var(--gse-ui-popover-anchor-width);background:var(--gse-ui-popover-backgroundColor)}";var C=function(e,t,o,i){var n=arguments.length,s=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,o):i,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,o,i);else for(var p=e.length-1;p>=0;p--)(r=e[p])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};const l=class{constructor(e){u(this,e),this.guxdismiss=h(this,"guxdismiss",7),this.position="bottom",this.closeOnClickOutside=!1,this.isOpen=!1,this.disconnect=void 0}onKeyDown(e){switch(e.key){case"Tab":this.dismiss();break;case"Escape":this.dismiss(),this.forElement.focus();break}}checkForClickOutside(e){const t=e.composedPath(),o=c(this.root,this.for),i=t.includes(o);(this.closeOnClickOutside||!this.displayDismissButton)&&this.isOpen&&!i&&this.dismiss()}runUpdatePosition(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition(),this.root.isConnected?this.cleanupUpdatePosition=m(c(this.root,this.for),this.popupElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){const e=c(this.root,this.for);this.popupElement&&g(e,this.popupElement,{strategy:"fixed",placement:this.position,middleware:[v(2),b(),E(),x(),k({element:this.arrowElement,padding:16})]}).then(({x:t,y:o,middlewareData:i,placement:n})=>{Object.assign(this.popupElement.style,{left:`${t}px`,top:`${o}px`});const s=n.split("-")[0],r={top:"bottom",right:"left",bottom:"top",left:"right"}[s];if(i.arrow){const{x:p,y:d}=i.arrow;this.popupElement.setAttribute("data-placement",n),Object.assign(this.arrowElement.style,{left:p!=null?`${p}px`:"",top:d!=null?`${d}px`:"",right:"",bottom:"",[r]:`${-13/2}px`,transform:"rotate(45deg)"})}i.hide&&Object.assign(this.popupElement.style,{visibility:i.hide.referenceHidden?"hidden":"visible"})})}dismiss(){this.guxdismiss.emit().defaultPrevented||(this.isOpen=!1,this.popupElement.togglePopover())}focusFirstItemInPopupList(){y(()=>{this.listElement.guxFocusFirstItem()})}onKeydown(e){switch(e.key){case"Enter":case" ":this.popupElement.togglePopover(),this.isOpen=!this.isOpen,this.runUpdatePosition(),this.focusFirstItemInPopupList();break}}onMouseup(){this.popupElement.togglePopover(),this.isOpen=!this.isOpen,this.runUpdatePosition()}connectedCallback(){w(this.root,{variant:this.position}),this.listElement=this.root.querySelector("gux-list"),this.forElement=c(this.root,this.for),this.forElement.setAttribute("aria-haspopup","true");const e=this.onKeydown.bind(this);this.forElement.addEventListener("keydown",e);const t=this.onMouseup.bind(this);this.forElement.addEventListener("mouseup",t),this.disconnect=()=>{this.forElement.removeEventListener("keydown",e),this.forElement.removeEventListener("mouseup",t)}}componentDidLoad(){this.isOpen&&(this.popupElement.togglePopover(),this.runUpdatePosition())}componentDidUpdate(){this.isOpen?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition(),this.disconnect()}render(){return a("div",{key:"763508d0c204450406b2c5c1e65379181c6d2578",ref:e=>this.popupElement=e,class:{"gux-hidden":!this.isOpen,"gux-popover-wrapper":!0},"data-placement":!0,popover:"manual"},a("div",{key:"f4d94fb769f25efd4c5c87dbc67a4c8afaceb825",ref:e=>this.arrowElement=e,class:"gux-arrow"}),this.displayDismissButton&&a("gux-dismiss-button",{key:"c36ae357ff5dab8df9eafb74cf47c65e5508c171",onClick:this.dismiss.bind(this)}),a("div",{key:"f9c323060710d3af720c341e315ef043a2af9f70",class:"gux-popover-content"},a("slot",{key:"7aed9829e3bf0b6a19ef696bc5244cd7aea4618c"})))}get root(){return f(this)}};C([P({triggerEvents:"mousedown"})],l.prototype,"checkForClickOutside",null);l.style=O;export{l as gux_popover_list_beta};
