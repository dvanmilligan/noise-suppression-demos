import{r as g,c as u,b as x,h as a,g as b}from"./index-RhTaIPoL.js";import{O as p}from"./on-resize-DU66ME6L-yF4SUj4S.js";import{h as f}from"./has-slot-qzV3vtOw-D7GdaS0G.js";import{t as m}from"./usage-BYFiy2rf-lhiVWKSr.js";import{g as l}from"./gux-rich-text-editor.service-EOVBuDBp-DfE0JhkK.js";import{b as y}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as v}from"./en-DN3YAdAX-COCuuOUE.js";import{a as A}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{O as S}from"./on-mutation-D5H4nH4U-CeToMEmQ.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-DCZG2J0G-kuMVup89.js";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const C=":host{display:block}:host([style*=resize]){overflow:auto;resize:inherit}.gux-rich-text-editor-container{box-sizing:border-box;display:flex;flex-direction:column;gap:var(--gse-ui-rte-innerContainer-gap);inline-size:100%;max-inline-size:100%;block-size:100%;max-block-size:100%;padding:var(--gse-ui-rte-padding);overflow:hidden scroll;background-color:var(--gse-ui-formControl-input-backgroundColor);border:var(--gse-ui-rte-mainContainer-default-border-width) var(--gse-ui-rte-mainContainer-default-border-color) var(--gse-ui-rte-mainContainer-default-border-style);border-radius:var(--gse-ui-rte-container-borderRadius)}.gux-rich-text-editor-container.gux-toolbar-hidden{gap:0}.gux-rich-text-editor-container .gux-rich-text-editor-toolbar-container{display:flex;flex-direction:row;justify-content:flex-start}.gux-rich-text-editor-container .gux-rich-text-editor-toolbar-container .gux-global-action-container{margin-inline-start:auto}.gux-rich-text-editor-container.gux-disabled{pointer-events:none;cursor:default;user-select:none;border:var(--gse-ui-rte-mainContainer-disabled-border-width) var(--gse-ui-rte-mainContainer-disabled-border-color) var(--gse-ui-rte-mainContainer-disabled-border-style);opacity:0.5}.gux-rich-text-editor-container:active:enabled{border:var(--gse-ui-rte-mainContainer-active-border-width) var(--gse-ui-rte-mainContainer-active-border-color) var(--gse-ui-rte-mainContainer-active-border-style)}.gux-rich-text-editor-container:focus-within:not(.gux-disabled),.gux-rich-text-editor-container:hover:not(.gux-disabled){border:var(--gse-ui-rte-mainContainer-hover-border-width) var(--gse-ui-rte-mainContainer-hover-border-color) var(--gse-ui-rte-mainContainer-hover-border-style)}.gux-rich-text-editor-container:focus-within:not(.gux-disabled){outline:var(--gse-ui-rte-mainContainer-focus-border-width) var(--gse-ui-rte-mainContainer-focus-border-color) var(--gse-ui-rte-mainContainer-focus-border-style)}";var c=function(i,t,e,o){var r=arguments.length,s=r<3?t:o===null?o=Object.getOwnPropertyDescriptor(t,e):o,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(i,t,e,o);else for(var d=i.length-1;d>=0;d--)(n=i[d])&&(s=(r<3?n(s):r>3?n(t,e,s):n(t,e))||s);return r>3&&s&&Object.defineProperty(t,e,s),s};const h=class{constructor(i){g(this,i),this.guxToggleAction=u(this,"guxToggleAction",7),this.disabled=!1,this.typographicalEmphasisActions=[],this.textStylingActions=[],this.listsAndIndentationActions=[],this.insertingActions=[],this.hasToolbar=!1}checkResponsiveLayout(){x(()=>{this.handleOverflow(),this.getHiddenActions()})}onMutation(){this.hasToolbar=this.hasToolbarChildren()}async componentWillLoad(){m(this.root),this.i18n=await y(this.root,v),this.hasToolbar=this.hasToolbarChildren()}componentDidLoad(){A(()=>{this.checkResponsiveLayout()})}componentDidUpdate(){this.handleOverflow()}isOverFlowing(){var i;const t=(i=this.root)===null||i===void 0?void 0:i.shadowRoot.querySelector(".gux-rich-text-editor-toolbar-container");return Array.from(t.children).filter(r=>!r.classList.contains("gux-hidden")).reduce((r,s)=>r+s.clientWidth,0)>t.clientWidth}handleOverflow(){const i=Array.from(this.root.querySelectorAll("gux-rich-text-editor-action-group"));for(;this.isOverFlowing();){let t=!1;for(let e=i.length-1;e>=0;e--)if(!i[e].classList.contains("gux-hidden")){i[e].classList.add("gux-hidden"),t=!0;break}if(!t)break}for(const t of i)if(t.classList.contains("gux-hidden")&&(t.classList.remove("gux-hidden"),this.isOverFlowing())){t.classList.add("gux-hidden");break}}getHiddenActions(){this.typographicalEmphasisActions=l(this.root,'gux-rich-text-editor-action-group[slot="typographical-emphasis"]',"gux-hidden"),this.listsAndIndentationActions=l(this.root,'gux-rich-text-editor-action-group[slot="lists-indentation"]',"gux-hidden"),this.textStylingActions=l(this.root,'gux-rich-text-editor-action-group[slot="text-styling"]',"gux-hidden"),this.insertingActions=l(this.root,'gux-rich-text-editor-action-group[slot="inserting"]',"gux-hidden")}getAllActions(){return[...this.typographicalEmphasisActions,...this.textStylingActions,...this.listsAndIndentationActions,...this.insertingActions]}categorizeActions(){const i="rich-style-",t="highlight-",e=[],o={richStyle:[],highlight:[],other:[]},r=[],s=[];return this.typographicalEmphasisActions.forEach(n=>e.push(n)),this.textStylingActions.forEach(n=>{n.action.startsWith(i)?o.richStyle.push({action:n.action.slice(i.length),disabled:n.disabled}):n.action.startsWith(t)?o.highlight.push({action:n.action.slice(t.length),disabled:n.disabled}):o.other.push(n)}),this.listsAndIndentationActions.forEach(n=>r.push(n)),this.insertingActions.forEach(n=>s.push(n)),{typographicalEmphasis:e,textStyling:o,listsAndIndentation:r,insertingActions:s}}renderListItems(i,t=!1){return i.map((e,o)=>{const r=e.action.replace(/<\/?[^>]+(>|$)/g,"");return a("gux-rich-style-list-item",Object.assign({onClick:()=>this.guxToggleAction.emit(r),key:o,value:r,disabled:e.disabled},t?{innerHTML:e.action}:{}),!t&&(this.i18n(r)||r))})}renderSubList(i,t,e=!1){if(t.length>0){const o=t.every(r=>r.disabled);return a("gux-rich-text-editor-sub-list",{label:this.i18n(i),disabled:o},this.renderListItems(t,e))}}renderHighlightSubList(i){if(i.length>0){const t=i.every(e=>e.disabled);return a("gux-rich-text-editor-sub-list",{label:this.i18n("textHighlight"),disabled:t},this.renderListItems(i),a("gux-rich-style-list-item",{onClick:()=>this.guxToggleAction.emit("noHighlightAction"),value:"noHighlight",disabled:t},a("gux-truncate",{"max-lines":1},this.i18n("noHighlight"))))}}renderTextEditorMenu(){if(this.getAllActions().length>0){const{typographicalEmphasis:t,textStyling:e,listsAndIndentation:o,insertingActions:r}=this.categorizeActions();return a("gux-rich-text-editor-menu",null,this.renderListItems(t),this.renderSubList("richStyle",e.richStyle,!0),this.renderHighlightSubList(e.highlight),this.renderListItems(e.other),this.renderListItems(o),this.renderListItems(r))}}renderSlot(i,t){return f(this.root,i)?a("div",{class:t},a("slot",{name:i})):null}renderTypographicalEmphasis(){return this.renderSlot("typographical-emphasis","gux-typographical-emphasis-container")}renderTextStyling(){return this.renderSlot("text-styling","gux-text-styling-container")}renderListsIndentation(){return this.renderSlot("lists-indentation","gux-lists-indentation-container")}renderInserting(){return this.renderSlot("inserting","gux-inserting-container")}renderGlobalAction(){return this.renderSlot("global-action","gux-global-action-container")}hasToolbarChildren(){return[this.renderTypographicalEmphasis(),this.renderTextStyling(),this.renderListsIndentation(),this.renderInserting(),this.renderTextEditorMenu(),this.renderGlobalAction()].some(i=>i!=null)}render(){return a("div",{key:"078726fe98c3f862df555ee861c8846a0b0f016d",class:{"gux-rich-text-editor-container":!0,"gux-disabled":this.disabled,"gux-toolbar-hidden":!this.hasToolbar}},a("div",{key:"565e11f262ed4e1e961ac3813685bd775b91733d",class:"gux-rich-text-editor-toolbar-container"},this.renderTypographicalEmphasis(),this.renderTextStyling(),this.renderListsIndentation(),this.renderInserting(),this.renderTextEditorMenu(),this.renderGlobalAction()),a("slot",{key:"9aa908a9aa8651ee7bd0eb4c7688efe9bc8b552b",name:"editor"}))}get root(){return b(this)}};c([p()],h.prototype,"checkResponsiveLayout",null);c([S({childList:!0,subtree:!0})],h.prototype,"onMutation",null);h.style=C;export{h as gux_rich_text_editor_beta};
