import{r as s,h as t,H as n,g as u}from"./index-RhTaIPoL.js";import{a,c as r,o as c,f as l,s as d}from"./floating-ui.dom-s4o__4X6-DwnQVfa1.js";import{a as o}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{m as h,h as m}from"./gux-menu.common-QGDBFOq1-CC6R-ieU.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const b=":host{display:block;flex:1 1 auto;align-self:auto}:host .gux-submenu-button{all:unset;box-sizing:border-box;display:flex;flex-direction:row;flex-wrap:nowrap;place-content:stretch flex-start;align-items:center;inline-size:var(--gse-ui-flyoutMenu-width);block-size:var(--gse-ui-menu-option-height);padding:var(--gse-ui-menu-option-padding);line-height:var(--gse-ui-menu-option-label-default-text-lineHeight);color:var(--gse-ui-menu-option-label-foregroundColor);background-color:var(--gse-ui-menu-option-default-backgroundColor)}:host .gux-submenu-button:focus-within,:host .gux-submenu-button:hover{background-color:var(--gse-ui-menu-option-hover-backgroundColor)}:host .gux-submenu-button.gux-submenu-button-active{font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);color:var(--gse-ui-menu-option-shortcut-selected-foregroundColor);background-color:var(--gse-ui-menu-option-selected-backgroundColor)}:host .gux-submenu-button .gux-submenu-button-text{flex:1 1 auto;align-self:auto;order:0;margin-inline-end:var(--gse-ui-menu-option-gap);overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap}:host .gux-submenu-button .gux-submenu-open-icon{flex:0 0 auto;align-self:auto;order:0}:host .gux-submenu-wrapper{position:fixed;inset-block-start:0;inset-inline-start:0;visibility:hidden;flex-direction:column;padding:var(--gse-ui-menu-padding);margin:0;background-color:var(--gse-ui-menu-backgroundColor);border:none;border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow);opacity:0}:host .gux-submenu-wrapper.gux-shown{visibility:visible;animation-name:fade-in;animation-duration:100ms;animation-delay:350ms;animation-fill-mode:forwards}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}",g=class{constructor(e){s(this,e),this.isShown=!1}async guxFocus(){this.buttonElement.focus()}onKeydown(e){switch(h(e,this.root),e.key){case"Enter":e.stopPropagation(),this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()}),this.guxFocus();break;case"ArrowRight":e.stopPropagation(),this.show(),this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()});break;case"ArrowLeft":case"Escape":this.root!==e.target&&e.stopPropagation(),this.guxFocus();break}}onKeyup(e){switch(e.key){case" ":this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()}),this.guxFocus();break}}onmouseenter(){this.show()}onMouseleave(){this.hide()}onClick(e){if(e.target.nodeName==="GUX-MENU-OPTION"){this.hide();return}e.stopPropagation()}onFocusin(){this.show()}onFocusout(){this.hide()}show(){clearTimeout(this.hideDelayTimeout),this.isShown=!0}hide(){this.isShown&&(this.hideDelayTimeout=setTimeout(()=>{this.isShown=!1},m))}runUpdatePosition(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition(),this.root.isConnected?this.cleanupUpdatePosition=a(this.buttonElement,this.submenuElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){this.submenuElement&&r(this.buttonElement,this.submenuElement,{placement:"right-start",strategy:"fixed",middleware:[c(4),l(),d()]}).then(({x:e,y:i})=>{Object.assign(this.submenuElement.style,{left:`${e}px`,top:`${i-8}px`})})}focusOnSubmenu(){if(this.submenuContentElement.contains(document.activeElement))return;Array.from(this.root.children)[0].guxFocus()}componentDidLoad(){this.isShown&&this.runUpdatePosition()}componentDidUpdate(){this.isShown?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}render(){return t(n,{key:"9d3b6ee6a13d8dc05034cdb1c45cc6539acfded4"},t("button",{key:"20946826dae27cf3744589bc6f4c48f1a0128227",type:"button",class:{"gux-submenu-button":!0,"gux-submenu-button-active":this.isShown},role:"menuitem",tabIndex:-1,ref:e=>this.buttonElement=e,"aria-haspopup":"true","aria-expanded":this.isShown.toString()},t("span",{key:"ee7c83b33477dfa1a54f3c0dd96224ac45173a19",class:"gux-submenu-button-text"},this.label),t("gux-icon",{key:"c88f50097fd1e19c91bdbc3e49d6cfa679ad2f6e",class:"gux-submenu-open-icon","icon-name":"custom/chevron-right-small-regular",decorative:!0,size:"small"})),t("div",{key:"a971754c28ad1ade14b2b451ba2ccc938694b25e",ref:e=>this.submenuElement=e,class:{"gux-submenu-wrapper":!0,"gux-shown":this.isShown}},t("div",{key:"94fa443667ab5021e7bb8a73cbf7824bac24c455",role:"menu",class:"gux-submenu-content",ref:e=>this.submenuContentElement=e},t("slot",{key:"252733079a1875a6bfdbd702f5c91621ed53cac4"}))))}get root(){return u(this)}};g.style=b;export{g as gux_submenu};
