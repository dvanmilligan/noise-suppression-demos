import{r as l,h as t,H as b,g as p}from"./index-RhTaIPoL.js";import{r as h}from"./random-html-id-D9jKBqIb-D30kRngR.js";import{t as f}from"./usage-BYFiy2rf-lhiVWKSr.js";import{b as g}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{O as m}from"./on-click-outside-C-8pG9cs-6YGsTWW7.js";import{b as u}from"./after-next-render-Bg4q97BS-C_KTwidI.js";import{w as x}from"./when-event-is-from-kLXvN2m9-B4cyA2sH.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";const v={gap:"4px"};var k={dropdown:v};const y="Context menu";var O={contextMenuScreenreaderText:y};function w(e){return e.endsWith("px")?parseFloat(e):0}const C=":host{display:block;max-inline-size:fit-content;white-space:normal}gux-icon{color:var(--gse-ui-button-ghost-default-foregroundColor)}button{block-size:var(--gse-ui-button-default-height);padding:var(--gse-ui-button-default-paddingIconOnly);border-radius:var(--gse-ui-button-borderRadius)}button.gux-compact{min-inline-size:var(--gse-ui-contextMenu-button-compact);block-size:var(--gse-ui-button-compact-height);padding:var(--gse-ui-button-compact-paddingIconOnly)}button:hover:enabled{background-color:var(--gse-ui-button-ghost-hover-backgroundColor)}button:hover:enabled gux-icon{color:var(--gse-ui-button-ghost-hover-foregroundColor)}button:active:enabled{background-color:var(--gse-ui-button-ghost-active-backgroundColor)}button:active:enabled gux-icon{color:var(--gse-ui-button-ghost-active-foregroundColor)}button[disabled]{opacity:var(--gse-ui-button-disabled-opacity)}.gux-list-container{inline-size:var(--gse-ui-contextMenu-menu-width);max-block-size:var(--gse-ui-contextMenu-menu-maxHeight);margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow)}";var I=function(e,o,s,n){var r=arguments.length,i=r<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,s):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,o,s,n);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(i=(r<3?a(i):r>3?a(o,s,i):a(o,s))||i);return r>3&&i&&Object.defineProperty(o,s,i),i};const d=class{constructor(e){l(this,e),this.buttonId=h(),this.compact=!1,this.disabled=!1,this.screenreaderText="",this.placement="bottom-start",this.isOpen=!1}onClickOutside(){this.isOpen=!1}handleKeyDown(e){const o=e.composedPath().includes(this.listElement),s=e.composedPath().includes(this.button);switch(e.key){case"Escape":{o&&(e.preventDefault(),this.isOpen=!1,this.button.focus());break}case"Tab":{this.isOpen=!1;break}case"ArrowDown":case"Enter":{s&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}case"ArrowUp":{s&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusLastListItem());break}}}handleKeyup(e){switch(e.key){case" ":{e.composedPath().includes(this.button)&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}}}focusFirstListItem(){u(()=>{this.listElement.guxFocusFirstItem()})}focusLastListItem(){u(()=>{this.listElement.guxFocusLastItem()})}onButtonClick(){this.isOpen=!this.isOpen}onListClick(e){x("gux-list-item",e,()=>{this.isOpen=!1,this.button.focus()})}async componentWillLoad(){f(this.root),this.i18n=await g(this.root,O)}render(){return t(b,{key:"9655169c4bab4e6a88926067f909bba5cbe276a2"},t("gux-popup",{key:"7bb713543b09f29859faaaca06357e744dc0e146",placement:this.placement,expanded:this.isOpen,offset:w(k.dropdown.gap),"exceed-target-width":!0},t("div",{key:"0cba6dad19b7164d35902b3196bb0c4ee58a9c25",slot:"target",class:"gux-button-container"},t("gux-button-slot",{key:"414b2d6734198fd37940362ab4de85163eab0d37",accent:"ghost"},t("button",{key:"9050dbae164f6e2d7deafd8781ad19c6d312fe39",type:"button",onClick:()=>this.onButtonClick(),id:this.buttonId,class:{"gux-compact":this.compact},ref:e=>this.button=e,"aria-haspopup":"true","aria-expanded":this.isOpen.toString(),disabled:this.disabled},t("gux-screen-reader-beta",{key:"53fb5bd1b641380387108bb720b565cc1ba44490"},this.screenreaderText||this.i18n("contextMenuScreenreaderText")),t("gux-icon",{key:"03025f745ac9eacee22a7fd588143409b9cea522","icon-name":"fa/ellipsis-vertical-regular",size:"small",decorative:!0})))),t("div",{key:"e1474cc2440a6981a79bcf04bc92ff79228c24a5",slot:"popup",class:"gux-list-container"},t("gux-list",{key:"b3b841f727d19b04564eff3842f229b43f7634da",onClick:e=>this.onListClick(e),ref:e=>this.listElement=e},t("slot",{key:"bef9c28bca9bb5fd60247edc26f9ce0c3a1cb71f"})))))}static get delegatesFocus(){return!0}get root(){return p(this)}};I([m({triggerEvents:"click"})],d.prototype,"onClickOutside",null);d.style=C;export{d as gux_context_menu};
