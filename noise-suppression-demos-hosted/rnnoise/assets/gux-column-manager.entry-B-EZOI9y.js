import{r as u,c as g,f as i,h as o,H as m,g as b}from"./index-RhTaIPoL.js";import{b as C}from"./index-Bbwiw1Rf-CzeU2kBB.js";import{t as p}from"./usage-BYFiy2rf-lhiVWKSr.js";import{g as r,s as x,a as c,b as y,c as s,d as k,e as h,f,h as I}from"./gux-column-manager.service-CB2ijDRX-B46yg9Cu.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-Cd4R0amv-C_5KDHD-.js";import"./clamp-CcCycvZh-DnrAwabn.js";import"./simulate-native-event-BMRf5pjV-BcLDngo1.js";const w="Search",O="search results",v="{count} / {total} Columns Selected",P="{count} of {total} columns selected: check checkbox to select all {total} columns",R="{count} of {total} columns selected: uncheck checkbox to unselect all {total} columns",E="Press space or enter to move the {columnName} column to position {newPositionNumber} from position {oldPositionNumber}.",S="Reordering mode active. Reposition the {columnName} column using the up arrow key, the down arrow key, the home key and the end key. Press Escape to deactivate reordering mode.";var A={search:w,searchResults:O,selectedColumnCount:v,selectAllColumnsScreenReader:P,unselectAllColumnsScreenReader:R,movePositionPrompt:E,reorderingModeActive:S};const M=".gux-container{inline-size:320px;min-inline-size:320px;padding:var(--gse-ui-dataTableItems-editColumn-editColumnContent-padding)}.gux-container .gux-search gux-content-search{inline-size:100%}.gux-container .gux-search gux-content-search input[type=search]::-webkit-search-decoration,.gux-container .gux-search gux-content-search input[type=search]::-webkit-search-cancel-button,.gux-container .gux-search gux-content-search input[type=search]::-webkit-search-results-button,.gux-container .gux-search gux-content-search input[type=search]::-webkit-search-results-decoration{display:none;-webkit-appearance:none}.gux-container .gux-select{padding:var(--gse-ui-dataTableItems-editColumn-editColumnContent-padding);margin-inline-start:24px}.gux-sr-only{}.gux-sr-only:not(:focus):not(:active){position:absolute;width:1px;height:1px;overflow:hidden;white-space:nowrap;clip-path:inset(50%)}",N=class{constructor(e){u(this,e),this.guxorderchange=g(this,"guxorderchange",7),this.highlightResults={matchCount:0,currentMatch:0},this.keyboardOrderChange=r()}watchKeyboardOrderChange(){x(this.root,this.keyboardOrderChange)}async componentWillLoad(){p(this.root),this.i18n=await C(this.root,A)}componentDidLoad(){c(this.root,this.mainCheckboxElement)}handleInternalorderchange(e){e.stopPropagation(),Array.from(this.root.children).forEach(t=>{t.reset()}),this.keyboardOrderChange=r(),this.emitOrderChange(e.detail)}emitOrderChange(e){const{oldIndex:t,newIndex:n}=e;if(t!==n){const a=y(this.root,e);this.guxorderchange.emit(a)}}handleInternalkeyboardorderstart(e){e.stopPropagation();const t=e.detail,n=s(e.target);this.keyboardOrderChange={oldIndex:n,newIndex:n},this.announceElement.guxAnnounce(this.i18n("reorderingModeActive",{columnName:t}))}handleInternalMousereordermove(e){var t;if(e.stopPropagation(),typeof((t=this.keyboardOrderChange)===null||t===void 0?void 0:t.oldIndex)=="number"){const n=s(e.target);this.keyboardOrderChange.newIndex=n,this.emitOrderChange(this.keyboardOrderChange),this.keyboardOrderChange=r(),Array.from(this.root.children).forEach(a=>{a.reset()})}else{const n=s(e.target);this.keyboardOrderChange={oldIndex:n,newIndex:null}}}handleInternalkeyboardreordermove(e){e.stopPropagation();const{delta:t,column:n}=e.detail;this.keyboardOrderChange=k(this.root,this.keyboardOrderChange,t);const a=n,d=this.keyboardOrderChange.newIndex+1,l=this.keyboardOrderChange.oldIndex+1;this.announceElement.guxAnnounce(this.i18n("movePositionPrompt",{columnName:a,newPositionNumber:d,oldPositionNumber:l}))}handleInternalkeyboarddoreorder(e){e.stopPropagation(),this.emitOrderChange(this.keyboardOrderChange),e.target.guxFocus()}handleInternalkeyboardorderfinish(e){e.stopPropagation(),this.keyboardOrderChange=r(),Array.from(this.root.children).forEach(t=>{t.reset()})}onSearchInput(){this.highlightResults=h(this.root,this.searchElement)}onGuxCurrentMatchChanged(e){this.highlightResults=h(this.root,this.searchElement,e.detail)}onMainCheckboxChange(){f(this.root,this.mainCheckboxElement.checked),i(this.root)}onListChange(){c(this.root,this.mainCheckboxElement),i(this.root)}onSlotChange(){this.onListChange()}renderSelectedColumnCount(){const{count:e,total:t}=I(this.root);return o("div",null,o("span",{"aria-hidden":"true"},this.i18n("selectedColumnCount",{count:e,total:t})),o("span",{class:"gux-sr-only"},e===t?o("span",null,": ",this.i18n("unselectAllColumnsScreenReader",{count:e,total:t})):o("span",null,": ",this.i18n("selectAllColumnsScreenReader",{count:e,total:t}))))}render(){var e;const t=((e=this.keyboardOrderChange)===null||e===void 0?void 0:e.oldIndex)!==null;return o(m,{key:"a5f8f0194761c16d2c2a33033da9e999b19eb17a",class:{"gux-reordering":t}},o("div",{key:"0d84a3d280228e491fee2584b187da557e714d51",class:"gux-container"},o("div",{key:"2ade53e6b363c84741523cba00b207d6e2240c58",class:"gux-sr-only","aria-live":"polite"},`${this.highlightResults.matchCount} ${this.i18n("searchResults")}`),o("div",{key:"3b260077a9b8e139daa450a86489ddd0aeff28ea",class:"gux-search"},o("gux-content-search",{key:"65965fe9a454ad2eab52bed124fc7bda8d0a414e","match-count":this.highlightResults.matchCount,"current-match":this.highlightResults.currentMatch,onGuxcurrentmatchchanged:n=>this.onGuxCurrentMatchChanged(n)},o("input",{key:"7655c586f837494f2f773a70f95b814dd2100b75",type:"search",placeholder:this.i18n("search"),onInput:()=>this.onSearchInput(),ref:n=>this.searchElement=n}))),o("div",{key:"e343fe76cbd5b2b182f25f2b994cc0560a85d34f",class:"gux-select"},o("gux-form-field-checkbox",{key:"5f1f4a3e8f378fd0256e86be4adad652ee873936"},o("input",{key:"3331ba12fcc298810b44486d20d108b2dc5e24d6",slot:"input",type:"checkbox",ref:n=>this.mainCheckboxElement=n,onChange:()=>this.onMainCheckboxChange()}),o("label",{key:"ce75215fb8eb0e71233c0a7060e608516f1151d0",slot:"label"},this.renderSelectedColumnCount()))),o("div",{key:"5a7dd85371bc84a6a1867af7d88b21bc3385c512",class:"gux-list",onChange:()=>this.onListChange()},o("slot",{key:"b68d590b305f26b8afede3a1ee81de5d96896caa",onSlotchange:()=>this.onSlotChange()})),o("gux-announce-beta",{key:"3be5fc554ca6bf1dbbf1b8aa1d547a473b46ce74",ref:n=>this.announceElement=n})))}get root(){return b(this)}static get watchers(){return{keyboardOrderChange:["watchKeyboardOrderChange"]}}};N.style=M;export{N as gux_column_manager};
