import{r as v,h as a,g as M}from"./index-d9wy7qxQ.js";import{f as x,a as w}from"./iso-dates-8d3f106d-Dhyd_FQE.js";import{c as y}from"./capitalize-first-letter-404638dd-DDlMtXXu.js";import{g as D,a as k,b as T}from"./index-3f1e5ba8-CvJZzdvG.js";import{a as d}from"./after-next-render-07a41f53-C_KTwidI.js";import{l as V}from"./log-error-274efeb7-BpRSdGLj.js";import{s as C}from"./simulate-native-event-e0631897-BcLDngo1.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";function F(e){return new Date(e.getFullYear(),e.getMonth(),1,0,0,0)}function I(e,t){const n=[],o=new Date(1970,0,4);for(let s=0;s<7;s++){const i=o.toLocaleString(e,{weekday:"narrow"});n.push(i),o.setDate(o.getDate()+1)}return A(n,t)}function g(e,t){return y(e.toLocaleDateString(t,{year:"numeric",month:"long"}))}function A(e,t){const n=t%e.length;return e.concat(e.splice(0,n))}function z(e,t,n){const o=new Date(t,e,1,0,0,0,0),s=o.getDay(),i=-1*(n-s-7)%7,u=new Date(o.getTime()-i*(86400*1e3));return u.setHours(0,0,0,0),u}const O="Previous month: {localizedPreviousMonthAndYear}",S="Next month: {localizedNextMonthAndYear}",W={previousMonth:O,nextMonth:S},N=".gux-calendar-beta{box-sizing:border-box;display:inline-flex;flex-direction:column;font-family:var(--gse-ui-calendarMenu-month-defaultText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-defaultText-fontSize);background:var(--gse-ui-calendarMenu-date-selected-foregroundColor);border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius);box-shadow:rgba(34, 37, 41, 0.24) 0 2px 4px}.gux-calendar-beta .gux-header{display:flex;align-items:center;justify-content:space-between;height:var(--gse-ui-calendarMenu-month-single-header-height);padding:var(--gse-ui-calendarMenu-header-padding);font-style:normal;font-weight:var(--gse-ui-calendarMenu-month-currentText-fontWeight);color:var(--gse-ui-calendarMenu-header-foregroundColor);text-align:center;background-color:var(--gse-ui-calendarMenu-header-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-header-borderRadius)}.gux-calendar-beta .gux-header .gux-header-month-and-year{width:var(--gse-ui-calendarMenu-month-single-header-textWidth);font-family:var(--gse-ui-calendarMenu-month-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-headerText-fontSize);line-height:var(--gse-ui-calendarMenu-month-headerText-lineHeight);color:var(--gse-ui-calendarMenu-month-selected-foregroundColor)}.gux-calendar-beta .gux-header .gux-left,.gux-calendar-beta .gux-header .gux-right{color:var(--gse-ui-calendarMenu-month-monthHeader-foregroundColor);cursor:pointer;background:none;border:none;outline:none}.gux-calendar-beta .gux-header .gux-left:focus-visible,.gux-calendar-beta .gux-header .gux-right:focus-visible{outline:2px solid #aac9ff;outline-offset:1px}.gux-calendar-beta .gux-header .gux-left gux-icon,.gux-calendar-beta .gux-header .gux-right gux-icon{width:16px;height:16px}.gux-calendar-beta .gux-week-days{padding-top:24px;padding-right:24px;padding-left:24px;font-family:var(--gse-ui-calendarMenu-day-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-day-headerText-fontSize);font-weight:var(--gse-ui-calendarMenu-day-headerText-fontWeight);color:var(--gse-ui-calendarMenu-day-dayHeader-foregroundColor);text-align:center}.gux-calendar-beta .gux-week-days .gux-week-day{display:inline-block;width:var(--gse-ui-calendarMenu-day-date-size);height:16px;font-weight:var(--gse-ui-calendarMenu-day-header-fontWeight)}.gux-calendar-beta .gux-content{padding:var(--gse-ui-calendarMenu-dateBody-padding);color:var(--gse-core-color-cornflower-900);background-color:var(--gse-ui-calendarMenu-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius)}.gux-calendar-beta .gux-content-week .gux-content-date{display:inline-block;width:var(--gse-ui-calendarMenu-day-date-size);height:var(--gse-ui-calendarMenu-day-input-height);font-family:var(--gse-ui-calendarMenu-date-currentText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-defaultText-fontSize);font-style:normal;font-weight:var(--gse-ui-calendarMenu-date-defaultText-fontWeight);line-height:32px;color:var(--gse-core-color-cornflower-600);text-align:center;vertical-align:middle;border:none;outline:none;opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar-beta .gux-content-week .gux-content-date.gux-current-month{color:var(--gse-ui-calendarMenu-month-default-foregroundColor);opacity:1}.gux-calendar-beta .gux-content-week .gux-content-date.gux-hidden{display:none}.gux-calendar-beta .gux-content-week .gux-content-date.gux-disabled{pointer-events:none}.gux-calendar-beta .gux-content-week .gux-content-date.gux-selected{color:var(--gse-ui-calendarMenu-date-selected-foregroundColor);background-color:var(--gse-ui-calendarMenu-date-selected-backgroundColor);border:none;border-radius:var(--gse-ui-calendarMenu-month-borderRadius);outline:none}.gux-calendar-beta .gux-content-week .gux-content-date.gux-selected:hover{background-color:var(--gse-ui-calendarMenu-date-selected-hoverBackgroundColor)}.gux-calendar-beta .gux-content-week .gux-content-date:hover{cursor:pointer;background-color:var(--gse-ui-calendarMenu-date-hover-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar-beta .gux-content-week .gux-content-date:focus-visible{border-radius:var(--gse-ui-calendarMenu-month-focusBorderRadius);outline:var(--gse-semantic-focusRing-default-border-width) solid var(--gse-semantic-focusRing-default-border-color)}.gux-calendar-beta .gux-content-week .gux-content-date .gux-sr-only:not(:focus):not(:active){position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);white-space:nowrap}.gux-calendar-beta .gux-content-week .gux-content-date.gux-current-date{font-family:var(--gse-ui-calendarMenu-month-currentText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-currentText-fontSize);font-weight:var(--gse-ui-calendarMenu-date-currentText-fontWeight)}",R=N,Y=class{constructor(e){v(this,e),this.locale="en",this.MONTH_DATE_COUNT=42,this.focusedValue=void 0,this.minValue=void 0,this.maxValue=void 0}get slottedInput(){return this.root.querySelector('input[type="date"]')}async componentWillLoad(){this.slottedInput||V(this.root,'You must slot a date input element like so: input[type="date"].'),this.locale=D(this.root);const e=this.slottedInput.getAttribute("start-day-of-week");e!=null&&e.length&&(this.startDayOfWeek=parseInt(e,10)),this.startDayOfWeek=this.startDayOfWeek||k(this.locale),this.i18n=await T(this.root,W),this.slottedInput.value&&(this.focusedValue=x(this.slottedInput.value)),this.slottedInput.min&&(this.minValue=new Date(this.slottedInput.min),this.minValue.setHours(0,0,0,0)),this.slottedInput.max&&(this.maxValue=new Date(this.slottedInput.max),this.maxValue.setHours(0,0,0,0))}onDateClick(e){this.isInvalidDate(e)||(this.focusedValue=new Date(e.getTime()),this.slottedInput.value=w(e),C(this.root,"input"))}setDateAfterArrowKeyPress(e,t){e.preventDefault(),this.focusedValue=new Date(this.getFocusedValue().getFullYear(),this.getFocusedValue().getMonth(),this.getFocusedValue().getDate()+t,0,0,0),d(()=>{this.focusDate()})}focusDate(){const e=this.root.shadowRoot.querySelector(`.gux-content-date[data-date="${this.focusedValue.getTime()}"]`);e&&e.focus()}onKeyDown(e){switch(e.key){case" ":break;case"Enter":e.preventDefault(),this.onDateClick(this.getFocusedValue()),d(()=>{this.focusDate()});break;case"ArrowDown":this.setDateAfterArrowKeyPress(e,7);break;case"ArrowUp":this.setDateAfterArrowKeyPress(e,-7);break;case"ArrowLeft":this.setDateAfterArrowKeyPress(e,-1);break;case"ArrowRight":this.setDateAfterArrowKeyPress(e,1);break;case"PageUp":e.preventDefault(),this.setNewFocusedMonth(1),d(()=>{this.focusDate()});break;case"PageDown":e.preventDefault(),this.setNewFocusedMonth(-1),d(()=>{this.focusDate()});break}}isInvalidDate(e){return this.minValue&&e.getTime()<=this.minValue.getTime()||this.maxValue&&e.getTime()>this.maxValue.getTime()}getMonthDays(){var e,t;const n=F(this.getFocusedValue()),o=[];let s={dates:[]},i=0;const u=n.getMonth(),l=this.getSelectedValue(),m=new Date(n.getTime()),r=z(u,m.getFullYear(),this.startDayOfWeek);for(let h=0;h<this.MONTH_DATE_COUNT+1;h+=1){const b=l.getTime()===r.getTime()&&this.focusedValue!==void 0;i>0&&i%7===0&&(o.push(s),s={dates:[]});const f=this.isInvalidDate(r),p=((e=this.getFocusedValue())===null||e===void 0?void 0:e.getTime())===r.getTime()&&((t=this.getFocusedValue())===null||t===void 0?void 0:t.getTime())!==l.getTime(),c=new Date;s.dates.push({date:new Date(r),disabled:f,inCurrentMonth:u===r.getMonth()&&!f,selected:b&&l,focused:p,isCurrentDate:r.getDate()===c.getDate()&&r.getMonth()===c.getMonth()&&r.getFullYear()===c.getFullYear()}),i+=1,r.setDate(r.getDate()+1)}return o}getFocusedValue(){return this.focusedValue?this.focusedValue:this.getSelectedValue()}changeMonth(e){return new Date(this.getFocusedValue().getFullYear(),this.getFocusedValue().getMonth()+e,1,0,0,0)}setNewFocusedMonth(e){this.focusedValue=this.changeMonth(e)}getSelectedValue(){if(this.slottedInput.value)return x(this.slottedInput.value);const e=new Date;return e.setHours(0,0,0,0),e}renderHeader(){return a("div",{class:"gux-header"},a("button",{type:"button",class:"gux-left","aria-label":this.i18n("previousMonth",{localizedPreviousMonthAndYear:g(this.changeMonth(-1),this.locale)}),onClick:()=>this.setNewFocusedMonth(-1)},a("gux-icon",{decorative:!0,"icon-name":"custom/chevron-left-small-regular"})),a("span",{class:"gux-header-month-and-year"},g(this.getFocusedValue(),this.locale)),a("button",{type:"button",class:"gux-right","aria-label":this.i18n("nextMonth",{localizedNextMonthAndYear:g(this.changeMonth(1),this.locale)}),onClick:()=>this.setNewFocusedMonth(1)},a("gux-icon",{decorative:!0,"icon-name":"custom/chevron-right-small-regular"})))}renderContent(){return a("div",null,a("div",{class:"gux-week-days"},I(this.locale,this.startDayOfWeek).map(e=>a("div",{class:"gux-week-day"},e))),a("div",{class:"gux-content"},this.getMonthDays().map(e=>a("div",{class:"gux-content-week"},e.dates.map(t=>a("div",{"data-date":t.date.getTime(),onClick:()=>this.onDateClick(t.date),role:"button","aria-current":t.selected?"true":"false",tabindex:t.selected||t.focused?"0":"-1",onKeyDown:n=>void this.onKeyDown(n),"aria-disabled":t.disabled?"true":"false",class:{"gux-content-date":!0,"gux-disabled":t.disabled,"gux-current-month":t.inCurrentMonth,"gux-selected":t.selected,"gux-current-date":t.isCurrentDate}},a("span",{class:"gux-non-sr","aria-hidden":"true"},t.date.getDate()),a("span",{class:"gux-sr-only"},a("gux-date-beta",{datetime:t.date.toISOString(),format:"long"}))))))))}render(){return a("div",{key:"e2f9a107ee91621f919e080a6c10341ded7389be",class:"gux-calendar-beta"},a("slot",{key:"f773c2600908c44ff26b2e89e61e1d9afedf4337"}),this.renderHeader(),this.renderContent())}get root(){return M(this)}};Y.style=R;export{Y as gux_calendar_beta};
