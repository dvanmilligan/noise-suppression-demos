import{r as h,c as u,h as i,g as p}from"./index-d9wy7qxQ.js";import{O as f}from"./on-click-outside-21dd269e-C4O7qXsf.js";import{w as g}from"./when-event-is-from-2aac15f0-B4cyA2sH.js";import{a as d}from"./after-next-render-07a41f53-C_KTwidI.js";import{t as m}from"./usage-6129fffe-6kP8_2TX.js";import{b as x}from"./index-3f1e5ba8-CvJZzdvG.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const w="More options",y={moreOptions:w},k=["primary","secondary","tertiary","danger"];function l(t){return k.find(e=>e===t)?t:"secondary"}const v=":host{display:block;-webkit-user-select:none;user-select:none}.gux-action-button-container{min-width:128px}.gux-action-button-container>*{vertical-align:middle}.gux-action-button-container .gux-action-button{width:calc(100% - 33px);margin-right:1px}.gux-action-button-container .gux-action-button button{width:100%;max-width:none;text-align:center;border-top-right-radius:0;border-bottom-right-radius:0}.gux-action-button-container .gux-dropdown-button button{display:flex;align-items:center;justify-content:center;width:var(--gse-ui-button-iconOnly-width);padding:0;border-top-left-radius:0;border-bottom-left-radius:0}.gux-action-button-container .gux-dropdown-button button gux-icon{width:var(--gse-ui-button-icon-size);height:var(--gse-ui-button-icon-size)}.gux-action-button-container .gux-list-container{max-width:220px;max-height:var(--gse-ui-menu-maxHeight);margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}",O=v;var C=function(t,e,n,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,s);else for(var r=t.length-1;r>=0;r--)(c=t[r])&&(o=(a<3?c(o):a>3?c(e,n,o):c(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o};const b=class{constructor(t){h(this,t),this.open=u(this,"open",7),this.close=u(this,"close",7),this.actionClick=u(this,"actionClick",7),this.type="button",this.disabled=!1,this.accent="secondary",this.isOpen=!1}handleKeydown(t){const e=t.composedPath();switch(t.key){case"Escape":this.isOpen=!1,e.includes(this.listElement)&&(t.preventDefault(),this.dropdownButton.focus());break;case"Tab":{this.isOpen=!1;break}case"ArrowDown":case"Enter":e.includes(this.dropdownButton)&&(t.preventDefault(),this.isOpen=!0,this.focusFirstItemInPopupList());break}}handleKeyup(t){switch(t.key){case" ":{t.composedPath().includes(this.dropdownButton)&&(this.isOpen=!0,this.focusFirstItemInPopupList());break}}}watchDisabled(t){t&&(this.isOpen=!1)}watchValue(t){t?this.open.emit():this.close.emit()}onClickOutside(t){t.relatedTarget===null&&(this.isOpen=!1)}toggle(){this.disabled||(this.isOpen=!this.isOpen,this.isOpen&&this.focusPopupList())}focusPopupList(){d(()=>{this.listElement.focus&&this.listElement.focus()})}focusFirstItemInPopupList(){d(()=>{this.listElement.guxFocusFirstItem()})}onActionClick(){this.disabled||(this.isOpen=!1,this.actionClick.emit())}onListClick(t){g("gux-list-item",t,()=>{this.isOpen=!1,this.dropdownButton.focus()})}async componentWillLoad(){m(this.root,{variant:this.type}),this.i18n=await x(this.root,y)}render(){return i("div",{key:"0cd7beefebe16c498525f8e4e3480c50e3e49c9f",class:"gux-action-button-container"},i("gux-popup",{key:"0d4397ff6e5f654f7ed28f6035ff674f4d635dcc",expanded:this.isOpen,disabled:this.disabled,placement:"bottom-end","exceed-target-width":!0},i("div",{key:"fd4494b21cd332ecb2a86b821540dae6edb82c22",slot:"target",class:"gux-action-button-container"},i("gux-button-slot",{key:"bc8c314442ea33ee3ac247bfe4fa56a7bab22501",class:"gux-action-button",accent:l(this.accent)},i("button",{key:"13f21d5e008d1006c9c5fac49ea7901c0d6428e4",type:this.type,disabled:this.disabled,onClick:()=>this.onActionClick()},i("slot",{key:"8adb116e8c7a97f87453e45f4f39fbe52427563b",name:"title"}))),i("gux-button-slot",{key:"32d826f3a791589cba410b4c6d58e8e4defbb585",class:"gux-dropdown-button",accent:l(this.accent)},i("button",{key:"00b77b9065ca6bc5280aa3cb16ea4f617e161e9d",type:"button",disabled:this.disabled,ref:t=>this.dropdownButton=t,onMouseUp:()=>this.toggle(),"aria-haspopup":"true","aria-expanded":this.isOpen.toString(),"aria-label":this.i18n("moreOptions")},i("gux-icon",{key:"c2d3e68f420809e861827e936668e46cb18e9e43",decorative:!0,"icon-name":"custom/chevron-down-small-regular"})))),i("div",{key:"2a1b5272b5ab3c2129df81d71cde1fbd8d919f74",class:"gux-list-container",slot:"popup"},i("gux-list",{key:"f89b27e882bbc4afe23b1e0d02041a51f785f280",onClick:t=>this.onListClick(t),ref:t=>this.listElement=t},i("slot",{key:"0e3d86f2f9e45f898cd7f8bbf30bc7e16875d0ed"})))))}get root(){return p(this)}static get watchers(){return{disabled:["watchDisabled"],isOpen:["watchValue"]}}};C([f({triggerEvents:"click"})],b.prototype,"onClickOutside",null);b.style=O;export{b as gux_action_button};
