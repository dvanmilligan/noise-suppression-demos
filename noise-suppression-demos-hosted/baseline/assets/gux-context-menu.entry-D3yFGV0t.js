import{r as b,h as t,H as l,g as h}from"./index-d9wy7qxQ.js";import{r as g}from"./random-html-id-81ac821b-D30kRngR.js";import{t as f}from"./usage-6129fffe-6kP8_2TX.js";import{b as p}from"./index-3f1e5ba8-CvJZzdvG.js";import{O as m}from"./on-click-outside-21dd269e-C4O7qXsf.js";import{b as c}from"./after-next-render-07a41f53-C_KTwidI.js";import{w as x}from"./when-event-is-from-2aac15f0-B4cyA2sH.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const v="Context menu",k={contextMenuScreenreaderText:v},y=":host{display:block;max-width:fit-content;white-space:normal}gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm);color:var(--gse-ui-button-ghost-default-foregroundColor)}button{height:var(--gse-ui-button-default-height);padding:var(--gse-ui-button-default-paddingIconOnly);border-radius:var(--gse-ui-button-borderRadius)}button.gux-compact{height:var(--gse-ui-button-compact-height);padding:var(--gse-ui-button-compact-paddingIconOnly)}button:hover:enabled{background-color:var(--gse-ui-button-ghost-hover-backgroundColor)}button:hover:enabled gux-icon{color:var(--gse-ui-button-ghost-hover-foregroundColor)}button:active:enabled{background-color:var(--gse-ui-button-ghost-active-backgroundColor)}button:active:enabled gux-icon{color:var(--gse-ui-button-ghost-active-foregroundColor)}button[disabled]{opacity:var(--gse-ui-button-disabled-opacity)}.gux-list-container{width:var(--gse-ui-contextMenu-menu-width);max-height:var(--gse-ui-contextMenu-menu-maxHeight);margin:0;overflow-y:auto;background:var(--gse-ui-menu-backgroundColor);border-color:var(--gse-ui-menu-border-color);border-style:var(--gse-ui-menu-border-style);border-width:var(--gse-ui-menu-border-width);border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}",w=y;var O=function(e,o,s,n){var r=arguments.length,i=r<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,s):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,o,s,n);else for(var u=e.length-1;u>=0;u--)(a=e[u])&&(i=(r<3?a(i):r>3?a(o,s,i):a(o,s))||i);return r>3&&i&&Object.defineProperty(o,s,i),i};const d=class{constructor(e){b(this,e),this.buttonId=g(),this.compact=!1,this.disabled=!1,this.screenreaderText="",this.isOpen=!1}onClickOutside(){this.isOpen=!1}handleKeyDown(e){const o=e.composedPath().includes(this.listElement),s=e.composedPath().includes(this.button);switch(e.key){case"Escape":{o&&(e.preventDefault(),this.isOpen=!1,this.button.focus());break}case"Tab":{this.isOpen=!1;break}case"ArrowDown":case"Enter":{s&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}case"ArrowUp":{s&&!this.isOpen&&(e.preventDefault(),this.isOpen=!0,this.focusLastListItem());break}}}handleKeyup(e){switch(e.key){case" ":{e.composedPath().includes(this.button)&&(e.preventDefault(),this.isOpen=!0,this.focusFirstListItem());break}}}focusFirstListItem(){c(()=>{this.listElement.guxFocusFirstItem()})}focusLastListItem(){c(()=>{this.listElement.guxFocusLastItem()})}onButtonClick(){this.isOpen=!this.isOpen,this.isOpen&&this.focusFirstListItem()}onListClick(e){x("gux-list-item",e,()=>{this.isOpen=!1,this.button.focus()})}async componentWillLoad(){f(this.root),this.i18n=await p(this.root,k)}render(){return t(l,{key:"f0541f7bb22b271ab0ac4adb09dc274162fc6b3b"},t("gux-popup",{key:"f140a6e82a37ade87baec7536fee2990f28c460b",expanded:this.isOpen,offset:4,"exceed-target-width":!0},t("div",{key:"459323b0c1742b8eddead8961e4355c96801397a",slot:"target",class:"gux-button-container"},t("gux-button-slot",{key:"ed3d5016dcfc5f203df91bf6b2a1488c1c6c36e5",accent:"ghost"},t("button",{key:"a2925a0822e9085b6c285496b4a8eec958badb6f",type:"button",onClick:()=>this.onButtonClick(),id:this.buttonId,class:{"gux-compact":this.compact},ref:e=>this.button=e,"aria-haspopup":"true","aria-expanded":this.isOpen.toString(),disabled:this.disabled},t("gux-icon",{key:"e56609d43adfb8a8c56553987bc43489b03367fb","icon-name":"fa/ellipsis-vertical-regular","screenreader-text":this.screenreaderText||this.i18n("contextMenuScreenreaderText")})))),t("div",{key:"7eab593cc6438bd1afb0bf4a17504c066e011da7",slot:"popup",class:"gux-list-container"},t("gux-list",{key:"edeab18b640d37bb32b68ca6cb452d2fcf6e014d",onClick:e=>this.onListClick(e),ref:e=>this.listElement=e},t("slot",{key:"b57bcc824d35ffc462edbdefad489eecc4501e88"})))))}static get delegatesFocus(){return!0}get root(){return h(this)}};O([m({triggerEvents:"click"})],d.prototype,"onClickOutside",null);d.style=w;export{d as gux_context_menu};
