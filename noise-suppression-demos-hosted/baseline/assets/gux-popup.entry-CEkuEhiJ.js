import{r as p,c as a,h as n}from"./index-d9wy7qxQ.js";import{a as d,c as r,o as l,f as c,d as h,s as u,h as x}from"./floating-ui.dom.esm-8b93f9de-BrzsGlin.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const f=".gux-target-container.gux-disabled{pointer-events:none;cursor:default;opacity:0.5}.gux-popup-container{position:fixed;z-index:var(--gse-semantic-zIndex-popup);width:max-content;visibility:hidden;background-color:var(--gse-ui-menu-backgroundColor)}.gux-popup-container.gux-expanded{visibility:visible}.gux-sr-only-clip:not(:focus):not(:active){position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip-path:inset(50%);white-space:nowrap}",g=f,m=class{constructor(e){p(this,e),this.internalexpanded=a(this,"internalexpanded",7),this.internalcollapsed=a(this,"internalcollapsed",7),this.placement="bottom-start",this.expanded=!1,this.disabled=!1,this.offset=2,this.exceedTargetWidth=!1}runUpdatePosition(){this.cleanupUpdatePosition=d(this.targetElementContainer,this.popupElementContainer,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0})}updatePosition(){if(this.targetElementContainer&&this.popupElementContainer){const e=this.exceedTargetWidth;r(this.targetElementContainer,this.popupElementContainer,{strategy:"fixed",placement:this.placement,middleware:[l(this.offset),c(),h({apply({rects:t,elements:i}){e?Object.assign(i.floating.style,{minWidth:`${t.reference.width}px`}):Object.assign(i.floating.style,{width:`${t.reference.width}px`,overflow:"hidden"})}}),u(),x()]}).then(({x:t,y:i,middlewareData:s})=>{const{referenceHidden:o}=s.hide;Object.assign(this.popupElementContainer.style,{left:`${t}px`,top:`${i}px`}),o?this.popupElementContainer.classList.add("gux-sr-only-clip"):this.popupElementContainer.classList.remove("gux-sr-only-clip")})}}onExpandedChange(e){e?this.internalexpanded.emit():this.internalcollapsed.emit()}componentDidLoad(){this.runUpdatePosition()}componentDidUpdate(){this.expanded?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}render(){return n("div",{key:"2194e8499b7d574c4387729c71ca6444a90f3d97",class:{"gux-target-container":!0,"gux-disabled":this.disabled},"aria-disabled":this.disabled.toString(),ref:e=>this.targetElementContainer=e},n("slot",{key:"d4297e9512421463f0b04ca9f2e53e77541e924c",name:"target"}),n("div",{key:"12fc7fda177f95a1b7213befbb3aa318964c4490",class:{"gux-popup-container":!0,"gux-expanded":this.expanded&&!this.disabled},ref:e=>this.popupElementContainer=e},n("slot",{key:"b0cb9c0ea13eda8a351cd01de0cbc6e203cc9638",name:"popup"})))}static get watchers(){return{expanded:["onExpandedChange"]}}};m.style=g;export{m as gux_popup};
