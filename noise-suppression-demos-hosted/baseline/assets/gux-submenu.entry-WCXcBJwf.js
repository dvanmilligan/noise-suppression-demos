import{r as s,h as t,H as n,g as u}from"./index-d9wy7qxQ.js";import{a,c as r,o as h}from"./floating-ui.dom.esm-8b93f9de-BrzsGlin.js";import{a as o}from"./after-next-render-07a41f53-C_KTwidI.js";import{m as l,h as d}from"./gux-menu.common-b2a4d472-CSLYc6Td.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const c=":host{display:block;flex:1 1 auto;align-self:auto}:host .gux-submenu-button{all:unset;display:flex;flex-direction:row;flex-wrap:nowrap;place-content:stretch flex-start;align-items:center;width:var(--gse-ui-flyoutMenu-width);height:var(--gse-ui-menu-option-height);padding:var(--gse-ui-menu-option-padding);line-height:var(--gse-ui-menu-option-label-default-text-lineHeight);color:var(--gse-ui-menu-option-label-foregroundColor);background-color:var(--gse-ui-menu-option-default-backgroundColor)}:host .gux-submenu-button:focus-within,:host .gux-submenu-button:hover{background-color:var(--gse-ui-menu-option-hover-backgroundColor)}:host .gux-submenu-button.gux-submenu-button-active{font-weight:var(--gse-ui-menu-option-label-active-text-fontWeight);color:var(--gse-ui-menu-option-shortcut-selected-foregroundColor);background-color:var(--gse-ui-menu-option-selected-backgroundColor)}:host .gux-submenu-button .gux-submenu-button-text{flex:1 1 auto;align-self:auto;order:0;margin-right:var(--gse-ui-menu-option-gap);overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap}:host .gux-submenu-button .gux-submenu-open-icon{flex:0 0 auto;align-self:auto;order:0;width:var(--gse-ui-menu-option-startIcon-width);height:var(--gse-ui-menu-option-startIcon-height)}:host .gux-submenu-wrapper{position:fixed;top:0;left:0;flex-direction:column;padding:var(--gse-ui-menu-padding);margin:0;visibility:hidden;background-color:var(--gse-ui-menu-backgroundColor);border:none;border-radius:var(--gse-ui-menu-borderRadius);box-shadow:var(--gse-ui-menu-boxShadow-x) var(--gse-ui-menu-boxShadow-y) var(--gse-ui-menu-boxShadow-blur) var(--gse-ui-menu-boxShadow-spread) var(--gse-ui-menu-boxShadow-color)}:host .gux-submenu-wrapper.gux-shown{visibility:visible}",m=c,b=class{constructor(e){s(this,e),this.label=void 0,this.isShown=!1}async guxFocus(){this.buttonElement.focus()}onKeydown(e){switch(l(e,this.root),e.key){case"Enter":e.stopPropagation(),this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()}),this.guxFocus();break;case"ArrowRight":e.stopPropagation(),this.show(),this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()});break;case"ArrowLeft":case"Escape":this.root!==e.target&&e.stopPropagation(),this.guxFocus();break}}onKeyup(e){switch(e.key){case" ":this.hideDelayTimeout=o(()=>{this.focusOnSubmenu()}),this.guxFocus();break}}onmouseenter(){this.show()}onMouseleave(){this.hide()}onClick(e){if(e.target.nodeName==="GUX-MENU-OPTION"){this.hide();return}e.stopPropagation()}onFocusin(){this.show()}onFocusout(){this.hide()}show(){clearTimeout(this.hideDelayTimeout),this.isShown=!0}hide(){this.isShown&&(this.hideDelayTimeout=setTimeout(()=>{this.isShown=!1},d))}runUpdatePosition(){this.root.isConnected?this.cleanupUpdatePosition=a(this.buttonElement,this.submenuElement,()=>this.updatePosition(),{ancestorScroll:!0,elementResize:!0,animationFrame:!0,ancestorResize:!0}):this.disconnectedCallback()}updatePosition(){this.submenuElement&&r(this.buttonElement,this.submenuElement,{placement:"right-start",strategy:"fixed",middleware:[h(4)]}).then(({x:e,y:i})=>{Object.assign(this.submenuElement.style,{left:`${e}px`,top:`${i-8}px`})})}focusOnSubmenu(){if(this.submenuContentElement.contains(document.activeElement))return;Array.from(this.root.children)[0].guxFocus()}componentDidLoad(){this.isShown&&this.runUpdatePosition()}componentDidUpdate(){this.isShown?this.runUpdatePosition():this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}disconnectedCallback(){this.cleanupUpdatePosition&&this.cleanupUpdatePosition()}render(){return t(n,{key:"7e642bf815750185f8ed4c3629acfdd5fce06db1"},t("button",{key:"d383df46f57de9aec3dd18fefde5dd6f369fb7f9",type:"button",class:{"gux-submenu-button":!0,"gux-submenu-button-active":this.isShown},role:"menuitem",tabIndex:-1,ref:e=>this.buttonElement=e,"aria-haspopup":"true","aria-expanded":this.isShown.toString()},t("span",{key:"2a86ac278b7e3066bf60bbe7911ec2baf43a05a0",class:"gux-submenu-button-text"},this.label),t("gux-icon",{key:"3f0f05fd374f17c1d457af8b70836170a5a09e08",class:"gux-submenu-open-icon","icon-name":"custom/chevron-right-small-regular",decorative:!0})),t("div",{key:"ad5bb371fb46c2635aa251c739bb953c5d653d58",ref:e=>this.submenuElement=e,class:{"gux-submenu-wrapper":!0,"gux-shown":this.isShown}},t("div",{key:"8ec9163990d5244a36d17ec848d3af0abbb93e45",role:"menu",class:"gux-submenu-content",ref:e=>this.submenuContentElement=e},t("slot",{key:"b12468fb757f0135b25a389894e3ae3a4601c037"}))))}get root(){return u(this)}};b.style=m;export{b as gux_submenu};
