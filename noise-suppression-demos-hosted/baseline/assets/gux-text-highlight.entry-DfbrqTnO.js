import{r as d,h as s,g as x}from"./index-d9wy7qxQ.js";import{t as p}from"./usage-6129fffe-6kP8_2TX.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";const o=/[ +]/g,g=new Map,a=new Map;function f(t,e){let i=g.get(t);return i||(i=k(t),g.set(t,i)),i.test(e)}function b(t){return t.split(o).map(m).map(e=>{let i=a.get(e);return i||(i=new RegExp(e,"i"),a.set(e,i)),i})}function m(t){return t.replace(/[\^$*+?.(){}[\]\\]/g,"\\$&")}function k(t){const e=t.split(o).map(m);if(e.length===1)return new RegExp(e[0],"i");let i="(";return e.forEach((n,h)=>{i+=n+").*",h!==e.length-1&&(i+="(")}),new RegExp(i+"$","i")}const w="span mark{background-color:var(--gse-ui-search-match-firstLevel-backgroundColor)}.gux-dimmed mark{background-color:var(--gse-ui-search-match-subsequentLevel-backgroundColor)}",C=w,L=class{constructor(t){d(this,t),this.text=void 0,this.highlight=void 0,this.strategy="start",this.dimmed=!1}componentWillLoad(){p(this.root)}render(){if(this.highlight&&this.text)switch(this.strategy){case"start":return this.renderStartsWith();case"contains":return this.renderContains();case"fuzzy":return this.renderFuzzy()}return s("span",{class:{"gux-dimmed":this.dimmed}},this.text)}renderStartsWith(){if(this.text.toLowerCase().startsWith(this.highlight.toLowerCase())){const t=this.text.substring(0,this.highlight.length),e=this.text.substring(this.highlight.length);return s("span",{class:{"gux-dimmed":this.dimmed}},s("mark",null,t),e)}return s("span",{class:{"gux-dimmed":this.dimmed}},this.text)}renderContains(){const t={highlighted:"",remaining:this.text};for(;t.remaining.toLowerCase().includes(this.highlight.toLowerCase());){const e=t.remaining.toLowerCase().indexOf(this.highlight.toLowerCase()),i=t.remaining.substring(0,e),n=t.remaining.substring(e,e+this.highlight.length);t.highlighted+=i+`<mark>${n}</mark>`,t.remaining=t.remaining.substring(e+n.length)}return s("span",{class:{"gux-dimmed":this.dimmed},innerHTML:t.highlighted+t.remaining})}renderFuzzy(){if(f(this.highlight,this.text)){const t=b(this.highlight).reduce((e,i)=>{const{0:n,index:h,input:r}=e.remaining.match(i),l=r.substring(0,h),u=`${e.highlighted+l}<mark>${n}</mark>`,c=r.substring(h+n.length);return{highlighted:u,remaining:c}},{highlighted:"",remaining:this.text});return s("span",{class:{"gux-dimmed":this.dimmed},innerHTML:t.highlighted+t.remaining})}return s("span",{class:{"gux-dimmed":this.dimmed}},this.text)}get root(){return x(this)}};L.style=C;export{L as gux_text_highlight};
