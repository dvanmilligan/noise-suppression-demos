import{r as i,h as t,H as n,g as r}from"./index-d9wy7qxQ.js";import{a as u}from"./after-next-render-07a41f53-C_KTwidI.js";import{e as o}from"./event-is-from-60a4bc72-BUOfvQpd.js";import{r as a}from"./random-html-id-81ac821b-D30kRngR.js";import{b as l}from"./index-3f1e5ba8-CvJZzdvG.js";import{t as d}from"./en-1f9d79e6-D5hlE5o5.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";const c="gux-table-select-menu{display:inline-flex;font-family:var(--gse-ui-popover-body-text-fontFamily);font-size:var(--gse-ui-popover-body-text-fontSize);font-weight:var(--gse-ui-popover-body-text-fontWeight);line-height:var(--gse-ui-popover-body-text-lineHeight)}gux-table-select-menu .gux-select-menu-button{padding:0;margin-left:var(--gse-ui-dataTableItems-header-gap);color:var(--gse-ui-dataTableItems-cell-chevron-foregroundColor);background-color:inherit;border:none;outline:none}gux-table-select-menu .gux-select-menu-button:focus-visible{outline:var(--gse-semantic-focusRing-default-border-color) var(--gse-semantic-focusRing-default-border-style) var(--gse-semantic-focusRing-default-border-width);outline-offset:var(--gse-semantic-focusRing-offset);border-radius:4px}gux-table-select-menu .gux-select-menu-button gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm)}",p=c,g=class{constructor(e){i(this,e),this.dropdownOptionsButtonId=a("gux-table-select-menu"),this.hasSelectMenuOptions=!1,this.dropdownDisabled=!1,this.popoverHidden=!0}focusFirstItemInPopupList(){const e=this.root.querySelector("gux-list");u(()=>{e==null||e.guxFocusFirstItem()})}async componentWillLoad(){this.hasSelectMenuOptions=!!this.root.querySelector('[slot="select-menu-options"]'),this.i18n=await l(this.root,d,"gux-table")}onKeydown(e){var s;switch(e.key){case"ArrowDown":o(".gux-select-menu-button",e)&&(this.toggleOptions(),this.focusFirstItemInPopupList());break;case"Enter":o(".gux-select-menu-button",e)&&this.focusFirstItemInPopupList();break;case"Escape":o("gux-list",e)&&(e.stopPropagation(),this.popoverHidden=!0,(s=this.tableSelectMenuButtonElement)===null||s===void 0||s.focus());break;case"Tab":this.popoverHidden=!0;break}}onKeyup(e){switch(e.key){case" ":o(".gux-select-menu-button",e)&&this.focusFirstItemInPopupList()}}toggleOptions(){this.popoverHidden=!this.popoverHidden}renderSelectDropdown(){if(this.hasSelectMenuOptions)return[t("button",{id:this.dropdownOptionsButtonId,"aria-haspopup":"listbox","aria-expanded":(!this.popoverHidden).toString(),type:"button",class:"gux-select-menu-button",ref:e=>this.tableSelectMenuButtonElement=e,onClick:()=>this.toggleOptions(),disabled:this.dropdownDisabled},t("gux-icon",{"icon-name":"custom/chevron-down-small-regular","screenreader-text":this.i18n("tableOptions")})),t("gux-popover-list",{for:this.dropdownOptionsButtonId,isOpen:!this.popoverHidden,closeOnClickOutside:!0,onGuxdismiss:()=>this.popoverHidden=!0},t("div",null,t("slot",{name:"select-menu-options"})))]}render(){return t(n,{key:"ecc496eaea0b7d7aff6408a031648c9cea34d267"},t("slot",{key:"fe1418874e6484d8b5fd69957f039c67ba035df5"}),this.renderSelectDropdown())}get root(){return r(this)}};g.style=p;export{g as gux_table_select_menu};
