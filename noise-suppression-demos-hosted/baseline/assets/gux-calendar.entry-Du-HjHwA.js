import{r as C,c as E,h as s,g as R}from"./index-d9wy7qxQ.js";import{a as d}from"./after-next-render-07a41f53-C_KTwidI.js";import{b as c,c as v,a as w,f as g}from"./iso-dates-8d3f106d-Dhyd_FQE.js";import{t as S}from"./usage-6129fffe-6kP8_2TX.js";import{g as A,a as O}from"./index-3f1e5ba8-CvJZzdvG.js";import{c as y}from"./capitalize-first-letter-404638dd-DDlMtXXu.js";import{u as F,d as B}from"./use-regional-dates-a47e74e6-CHt-lzjs.js";import"vite-plugin-node-polyfills/shims/process";import"vite-plugin-node-polyfills/shims/buffer";import"./get-closest-element-728b9f18-C_5KDHD-.js";function P(e,t){T(e,"add",t)}function M(e,t){T(e,"remove",t)}function T(e=[],t,a){const n=[].concat(e);for(const r of n)r.classList[t](a)}function z(e,t,a){const n=new Date(t,e,1,1,0,0,0),r=n.getDay(),o=-1*(a-r-7)%7;return new Date(n.getTime()-o*(86400*1e3))}function W(e,t){const a=[],n=new Date(1970,0,4);for(let r=0;r<7;r++){const o=n.toLocaleString(e,{weekday:"narrow"});a.push(o),n.setDate(n.getDate()+1)}return H(a,t)}function H(e,t){const a=t>e.length?t%e.length:t;return e.concat(e.splice(0,a))}function L(e,t){const a=new Date(e);return a.setDate(1),a.setMonth(a.getMonth()+t),a}function k(e,t){return F()?y(B(t,{year:"numeric",month:"long"}).format(e)):y(e.toLocaleDateString(t,{year:"numeric",month:"long"}))}const I=":host{display:inline-block}.gux-calendar{margin-top:2px;border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius);box-shadow:var(--gse-ui-calendarMenu-boxShadow-x) var(--gse-ui-calendarMenu-boxShadow-y) var(--gse-ui-calendarMenu-boxShadow-blur) var(--gse-ui-calendarMenu-boxShadow-spread) var(--gse-ui-calendarMenu-boxShadow-color)}.gux-calendar .gux-header{position:relative;display:flex;gap:var(--gse-ui-calendarMenu-header-gap);align-items:center;justify-content:space-between;height:var(--gse-ui-calendarMenu-month-single-header-height);padding:var(--gse-ui-calendarMenu-header-padding);font-weight:var(--gse-ui-calendarMenu-month-currentText-fontWeight);color:var(--gse-ui-calendarMenu-header-foregroundColor);background-color:var(--gse-ui-calendarMenu-header-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-header-borderRadius)}.gux-calendar .gux-header button{position:absolute;color:var(--gse-ui-calendarMenu-month-monthHeader-foregroundColor);cursor:pointer;background:none;border:none;outline:none}.gux-calendar .gux-header button:focus-visible{outline:var(--gse-ui-formControl-input-focus-border-width) var(--gse-ui-formControl-input-focus-border-style) var(--gse-ui-formControl-input-focus-border-color)}.gux-calendar .gux-header button.gux-left{left:18px}.gux-calendar .gux-header button.gux-right{right:18px}.gux-calendar .gux-header button gux-icon{width:var(--gse-ui-icon-size-sm);height:var(--gse-ui-icon-size-sm);pointer-events:none}.gux-calendar .gux-header .gux-month-list{display:flex;justify-content:space-between;width:100%;font-family:var(--gse-ui-calendarMenu-month-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-month-headerText-fontSize);line-height:var(--gse-ui-calendarMenu-month-headerText-lineHeight)}.gux-calendar .gux-header .gux-month-list label{width:100%;text-align:center}.gux-calendar .gux-content{display:flex;align-items:flex-start;height:var(--gse-ui-calendarMenu-height);padding:var(--gse-ui-calendarMenu-dateBody-padding);color:var(--gse-ui-calendarMenu-month-default-foregroundColor);background-color:var(--gse-ui-calendarMenu-backgroundColor);border-radius:var(--gse-ui-calendarMenu-single-body-borderRadius)}.gux-calendar .gux-content table{width:var(--gse-ui-calendarMenu-day-input-width);text-align:left;table-layout:fixed;border-spacing:0;-ms-user-select:none;user-select:none}.gux-calendar .gux-content table:not(:last-child){padding-right:24px}.gux-calendar .gux-content table tr{height:var(--gse-ui-calendarMenu-day-input-height)}.gux-calendar .gux-content table tr:empty{display:none}.gux-calendar .gux-content table tr th,.gux-calendar .gux-content table tr td{width:var(--gse-ui-calendarMenu-day-date-size);height:var(--gse-ui-calendarMenu-day-date-size);padding:0;margin:0;text-align:center}.gux-calendar .gux-content table tr th{font-family:var(--gse-ui-calendarMenu-day-headerText-fontFamily);font-size:var(--gse-ui-calendarMenu-day-headerText-fontSize);font-weight:var(--gse-ui-calendarMenu-day-headerText-fontWeight);line-height:var(--gse-ui-calendarMenu-day-headerText-lineHeight)}.gux-calendar .gux-content table tr td{font-family:var(--gse-ui-calendarMenu-date-defaultText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-defaultText-fontSize);font-weight:var(--gse-ui-calendarMenu-date-defaultText-fontWeight);line-height:var(--gse-ui-calendarMenu-date-defaultText-lineHeight);color:var(--gse-ui-calendarMenu-date-default-foregroundColor);cursor:pointer}.gux-calendar .gux-content table tr td.gux-hovered{background-color:var(--gse-ui-calendarMenu-date-range-backgroundColor)}.gux-calendar .gux-content table tr td.gux-selected{color:var(--gse-ui-calendarMenu-date-selected-foregroundColor);background-color:var(--gse-ui-calendarMenu-date-selected-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-selected:hover:not(.gux-calendar .gux-content table tr td.gux-selected.gux-start-date):not(.gux-calendar .gux-content table tr td.gux-selected.gux-end-date){background-color:var(--gse-ui-calendarMenu-date-selected-hoverBackgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date,.gux-calendar .gux-content table tr td.gux-end-date{background-color:var(--gse-ui-calendarMenu-date-range-backgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date .gux-date,.gux-calendar .gux-content table tr td.gux-end-date .gux-date{display:flex;align-items:center;justify-content:center;width:var(--gse-ui-calendarMenu-day-date-size);height:var(--gse-ui-calendarMenu-day-date-size);background-color:var(--gse-ui-calendarMenu-date-selected-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-start-date .gux-date:hover,.gux-calendar .gux-content table tr td.gux-end-date .gux-date:hover{background-color:var(--gse-ui-calendarMenu-date-selected-hoverBackgroundColor)}.gux-calendar .gux-content table tr td.gux-start-date{border-radius:16px 0 0 16px}.gux-calendar .gux-content table tr td.gux-end-date{border-radius:0 16px 16px 0}.gux-calendar .gux-content table tr td:hover:not(.gux-calendar .gux-content table tr td.gux-start-date):not(.gux-calendar .gux-content table tr td.gux-end-date):not(.gux-calendar .gux-content table tr td.gux-hovered):not(.gux-calendar .gux-content table tr td.gux-selected){background-color:var(--gse-ui-calendarMenu-date-hover-backgroundColor);border-radius:var(--gse-ui-calendarMenu-month-borderRadius)}.gux-calendar .gux-content table tr td.gux-disabled{pointer-events:none;opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar .gux-content table tr td.gux-not-in-month{opacity:var(--gse-ui-calendarMenu-disabled-opacity)}.gux-calendar .gux-content table tr td.gux-not-in-month:hover{background-color:var(--gse-ui-calendarMenu-date-hover-backgroundColor)}.gux-calendar .gux-content table tr td.gux-not-in-month.gux-hidden{visibility:hidden}.gux-calendar .gux-content table tr td.gux-current-date{font-family:var(--gse-ui-calendarMenu-date-currentText-fontFamily);font-size:var(--gse-ui-calendarMenu-date-currentText-fontSize);font-weight:var(--gse-ui-calendarMenu-date-currentText-fontWeight);line-height:var(--gse-ui-calendarMenu-date-currentText-lineHeight)}.gux-calendar .gux-content table tr td:focus-visible{border-radius:var(--gse-ui-calendarMenu-month-focusBorderRadius);outline:var(--gse-semantic-focusRing-default-border-width) solid var(--gse-semantic-focusRing-default-border-color)}.gux-sr-only{position:absolute;top:auto;left:-10000px;width:1px;height:1px;overflow:hidden}",Y=I,q=class{constructor(e){C(this,e),this.calendarSelect=E(this,"calendarSelect",7),this.locale="en",this.value="",this.minDate="",this.maxDate="",this.mode="single",this.numberOfMonths=1,this.startDayOfWeek=void 0,this.previewValue=new Date,this.selectingDate=null}emitCalendarSelect(){this.calendarSelect.emit(this.value)}async setValue(e){if(this.mode==="range"&&e instanceof Array){const[t,a]=e;this.value=c(t,a),this.previewValue=v(this.value)[0]}else{const t=e;this.value=w(t),this.previewValue=t}}async focusPreviewDate(){const e=this.root.shadowRoot.querySelector(`td[data-date="${this.previewValue.getTime()}"]`);e&&e.focus()}async resetCalendarView(e){this.previewValue=e}incrementPreviewDateByMonth(e){this.previewValue=new Date(this.previewValue.getFullYear(),this.previewValue.getMonth()+e,15,0,0,0),d(()=>{this.focusPreviewDate()})}async setValueAndEmit(e){await this.setValue(e),this.emitCalendarSelect()}outOfBounds(e){return this.maxDate!==""&&g(this.maxDate)<e||this.minDate!==""&&g(this.minDate)>e}generateDatesFrom(e,t,a){const n=[],r=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);for(let o=0;o<a;o++){const u=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0),i=[],h=new Date,m=r.getFullYear()===h.getFullYear()&&r.getMonth()===h.getMonth()&&r.getDate()===h.getDate();let x=!1,b=!1;u.getMonth()!==e&&(i.push("gux-not-in-month"),x=!0,this.mode==="range"&&(i.push("gux-hidden"),b=!0)),this.outOfBounds(u)&&(i.push("gux-disabled"),x=!0);let l=!1;if(m&&i.push("gux-current-date"),this.mode==="range"){const[f,V]=v(this.value),p=f.getTime(),D=V.getTime();u.getTime()===p&&u.getTime()===D?(l=!0,i.push("gux-selected")):u.getTime()===p?(l=!0,i.push("gux-selected"),i.push("gux-start-date")):u.getTime()===D&&(l=!0,i.push("gux-selected"),i.push("gux-end-date"))}else{const f=g(this.value).getTime();u.getTime()===f&&(l=!0,i.push("gux-selected"))}n.push({class:i.join(" "),date:u,hidden:b,disabled:x,selected:l,isToday:m}),r.setDate(r.getDate()+1)}return n}create2DArray(e,t){const a=[];for(let n=0;n<t-1;n++){const r=e.slice(n*t,n*t+t);this.weekShouldBeDisplayed(r)&&a.push(r)}return a}isFocusableDate(e){return e.selected||this.previewValue.getTime()===e.date.getTime()}weekShouldBeDisplayed(e){const t=e.find(a=>!a.hidden);return e.length&&!!t}getMonthDays(e){const t=new Date(this.previewValue.getTime());t.setDate(1),t.setMonth(t.getMonth()+e);const a=t.getMonth(),n=t.getFullYear(),r=z(a,n,this.startDayOfWeek),o=this.generateDatesFrom(a,r,42);return this.create2DArray(o,7)}addDays(e,t){const a=new Date(e.valueOf());return a.setDate(a.getDate()+t),a}getAllDatesElements(){const e=this.root.shadowRoot.querySelectorAll("td");return Array.from(e)}getAllSelectableDatesElements(){const e=this.root.shadowRoot.querySelectorAll('td[tabindex="0"]');return Array.from(e)}getRangeDatesElements(e,t){const a=[];let n;t<e?n=this.getRangeDates(t,e):n=this.getRangeDates(e,t);for(const r of n){const o=this.root.shadowRoot.querySelector(`td[data-date="${r.getTime()}"]:not(.gux-hidden)`);o&&a.push(o)}return a}getRangeDates(e,t){const a=[];let n=e;for(;n<=t;)a.push(new Date(n)),n=this.addDays(n,1);return a}async onDateClick(e){if(!this.outOfBounds(e))if(this.mode!=="range")await this.setValueAndEmit(e);else if(this.selectingDate===null)M(this.getAllDatesElements(),"gux-hovered"),this.selectingDate=new Date(e.valueOf()),this.value=c(e,e);else{const t=this.root.shadowRoot.querySelector(`td[data-date="${e.getTime()}"]`);t&&t.classList.add("gux-selected"),this.updateRangeElements(),await this.setValueAndEmit([this.selectingDate,e]),this.previewValue=e,this.selectingDate=null}}onDateMouseEnter(e){this.mode==="range"&&this.selectingDate!==null&&(this.value=c(e,this.selectingDate),this.updateRangeElements())}updateRangeElements(){if(this.mode==="range"){M(this.getAllDatesElements(),"gux-hovered");const[e,t]=v(this.value),a=this.getRangeDatesElements(e,t);P(a,"gux-hovered")}}async onKeyDown(e){switch(e.key){case" ":case"Enter":e.preventDefault(),await this.onDateClick(this.previewValue);break;case"ArrowDown":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()+7)),this.onDateMouseEnter(this.previewValue),d(()=>{this.focusPreviewDate()});break;case"ArrowUp":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()-7)),this.onDateMouseEnter(this.previewValue),d(()=>{this.focusPreviewDate()});break;case"ArrowLeft":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()-1)),this.onDateMouseEnter(this.previewValue),d(()=>{this.focusPreviewDate()});break;case"ArrowRight":e.preventDefault(),this.previewValue=new Date(this.previewValue.setDate(this.previewValue.getDate()+1)),this.onDateMouseEnter(this.previewValue),d(()=>{this.focusPreviewDate()});break;case"PageUp":this.incrementPreviewDateByMonth(1),this.onDateMouseEnter(this.previewValue);break;case"PageDown":this.incrementPreviewDateByMonth(-1),this.onDateMouseEnter(this.previewValue);break}}componentWillLoad(){if(S(this.root,{variant:this.mode}),this.locale=A(this.root),this.startDayOfWeek=this.startDayOfWeek||O(this.locale),!this.value){const e=new Date;e.setHours(0,0,0,0),this.mode==="range"?this.value=c(e,e):this.value=w(e)}this.previewValue=g(this.value)}componentDidRender(){this.updateRangeElements()}renderMonthHeader(){return s("div",{class:"gux-month-list"},Array.from(Array(this.numberOfMonths).keys()).map(e=>{const t=L(this.previewValue,e);return s("label",null,k(t,this.locale))}))}renderCalendarTable(e){return s("table",null,s("tr",null,W(this.locale,this.startDayOfWeek).map(t=>s("th",null,t))),this.getMonthDays(e).map(t=>s("tr",null,t.map(a=>s("td",{tabindex:this.isFocusableDate(a)?"0":"-1",class:a.class,"aria-hidden":a.hidden?"true":"false","aria-disabled":a.disabled?"true":"false","data-date":a.date.getTime(),onClick:()=>void this.onDateClick(a.date),onMouseEnter:()=>this.onDateMouseEnter(a.date),onKeyDown:n=>void this.onKeyDown(n)},s("div",{class:"gux-date"},a.date.getDate(),s("span",{class:"gux-sr-only"},k(a.date,this.locale))))))))}render(){return s("div",{key:"16221a149dfe8fac67eb2b4c38f84775f04e6122",class:"gux-calendar"},s("div",{key:"9d2984e7852a9012ad1bce4803d132e1779eafd1",class:"gux-header"},s("button",{key:"f0b75de22c5df1ba52a9b731cf5bc114c6fa0edc",type:"button",class:"gux-left",onClick:()=>this.incrementPreviewDateByMonth(-1),tabindex:"-1","aria-hidden":"true"},s("gux-icon",{key:"e200f6e4a419091ba09d79e6cd411dac342a0bd8",decorative:!0,"icon-name":"custom/chevron-left-small-regular"})),this.renderMonthHeader(),s("button",{key:"1509ebeb10278bd9c124577040b22cbf523b8b35",type:"button",class:"gux-right",onClick:()=>this.incrementPreviewDateByMonth(1),tabindex:"-1","aria-hidden":"true"},s("gux-icon",{key:"f6e8ea3aa272de7187d70dd3694b4afff76aeb72",decorative:!0,"icon-name":"custom/chevron-right-small-regular"}))),s("div",{key:"4bace72796459b7064d365285a09c70042dc852c",class:"gux-content"},Array.from(Array(this.numberOfMonths).keys()).map(e=>this.renderCalendarTable(e))))}get root(){return R(this)}};q.style=Y;export{q as gux_calendar};
